{"version":3,"sources":["webpack:///$_lazy_route_resource lazy namespace object","webpack:///src/app/app-routing.module.ts","webpack:///src/app/app.component.ts","webpack:///src/app/app.component.html","webpack:///src/app/app.module.ts","webpack:///src/app/drawing-canvas/drawing-canvas.component.ts","webpack:///src/app/drawing-canvas/drawing-canvas.component.html","webpack:///src/app/git-manage/git-manage.component.ts","webpack:///src/app/git-manage/git-manage.component.html","webpack:///src/app/git.service.ts","webpack:///src/app/git/git.component.ts","webpack:///src/app/image-selector/image-selector.component.ts","webpack:///src/app/image-selector/image-selector.component.html","webpack:///src/app/layers/layers.component.ts","webpack:///src/app/layers/layers.component.html","webpack:///src/app/models/layer-change.ts","webpack:///src/app/models/layer.ts","webpack:///src/app/revert-from-history/revert-from-history.component.ts","webpack:///src/app/revert-from-history/revert-from-history.component.html","webpack:///src/app/services/lut-service.service.ts","webpack:///src/app/services/masking.service.ts","webpack:///src/app/services/png-to-svg.service.ts","webpack:///src/app/services/svgtopng.service.ts","webpack:///src/app/toggle-pixelation/toggle-pixelation.component.ts","webpack:///src/app/toolbar-color-selector/toolbar-color-selector.component.ts","webpack:///src/app/toolbar-color-selector/toolbar-color-selector.component.html","webpack:///src/app/toolbar/toolbar.component.ts","webpack:///src/app/toolbar/toolbar.component.html","webpack:///src/environments/environment.ts","webpack:///src/main.ts"],"names":["webpackEmptyAsyncContext","req","Promise","resolve","then","e","Error","code","keys","module","exports","id","routes","path","component","AppRoutingModule","forRoot","imports","AppComponent","route","git","title","queryParams","subscribe","params","getGithubToken","ret","toString","includes","localStorage","setItem","match","window","close","selector","templateUrl","styleUrls","AppModule","declarations","providers","bootstrap","DrawingCanvasComponent","renderer","pngToSvg","ngxService","lut","activatedRoute","maskSvc","svgToPng","dragging","drawing","startPoint","isCollapsed","points","color","colorIndex","history","panzoomConfig","zoomLevels","scalePerZoomLevel","zoomStepDuration","freeMouseWheel","invertMouseWheel","zoomToFitZoomLevelFactor","dragMouseButton","initialZoomLevel","loadedMask","layerPoints","previewShown","opacity","setArtboard","artboard","nativeElement","innerHTML","setLayers","svgElement","children","storage","Object","entries","item","substring","push","apiSubscription","api","panZoomAPI","modelChangedSubscription","modelChanged","model","onModelChanged","panzoomModel","dimensions","getDimensions","svg","append","attr","width","height","canvasHeight","canvasWidth","userId","getImageUrl","url","updateCanvas","style","getMaskUrl","selectAll","remove","g","getLayerChange","obj","type","index","deleteLayer","toFront","toBottom","toggleVisibility","deleteAllLayers","revertFromLocalStorage","collection","toggleAll","addToLocalStorage","colors","map","updateColor","select","updateMask","d3","dom","target","tagName","parentNode","altKey","deleteLayerClick","addToHistory","button","layerX","pan","x","getBoundingClientRect","offsetWidth","layerY","y","empty","toElement","closePolygon","zoomLevel","length","currentColor","childPoly","child","point","holder","data","enter","call","on","handleDrag","splice","className","baseVal","newPoints","circle","poly","circles","setAttribute","_groups","circleGroup","up","Math","min","max","value","imageNumber","getUrl","padStart","unshift","JSON","stringify","pop","contents","currentUrl","parse","enableDragging","shift","i","prepend","getAttribute","getVisibility","layer","classList","contains","add","base64ToGit","base64","getLayerType","confirm","event","deleteCurrentLayer","toggleControlPoints","previewExport","ctrlKey","undo","resetView","mouseUp","mouseMove","GitManageComponent","authenticated","errorOccurred","commitReturn","getItem","gitLoad","getUserInfo","pipe","userData","getRepoBranches","login","branches","error","logout","removeItem","s","open","timer","setInterval","closed","clearInterval","sha","branch","imgUrl","imgs2","indexOf","console","log","start","defaultMessage","replace","substr","commitMessage","prompt","valueOf","getTree","tree","filter","commitFile","base64Mask","mask","stop","GitService","http","gitTokenHeader","set","get","setHeaders","headers","user","message","content","imageName","body","header","put","providedIn","GitComponent","snapshot","queryParamMap","ImageSelectorComponent","updateImageByNum","defaultImageNumber","setTimeout","showMask","imageDirectoryName","maskDirectoryName","setMaskUrl","setImageUrl","number","num","slice","imgN","element","imageDirectory","find","val","alert","image2Directory","updateImage","fromUrl","LayersComponent","getLayers","layers","reverse","modifyLayer","undefined","parseInt","opacityForm","layerColor","name","updateOpacity","forEach","update","incrementOpacity","deleteAll","LayerChange","Layer","visibility","elem","RevertFromHistoryComponent","loadMasksFromStorage","previousMasks","key","sort","a","b","revert","save","LutServiceService","MaskingService","maskUrl","imageUrl","layerChange","defaultImage","imgDimensionConfig","series","getComputedStyle","imageRendering","split","setDimensions","next","currentMaskUrl","attributes","href","change","currentOpacity","PngToSvgService","svgPathString","opts","tolerance","polys","tolerance2","prev","cmd","sampleCubicBÃ©zier","x0","y0","x1","y1","x2","y2","command","process","exit","x3","y3","x01","y01","x12","y12","x23","y23","x012","y012","x123","y123","x0123","y0123","dx","dy","d1","abs","d2","decimals","toFixed","vs","inside","j","xi","yi","xj","yj","intersect","SvgtopngService","insert","getCurrentImageUrl","top","left","encoderOptions","scale","devicePixelRatio","uri","loadedMaskUrl","err","originalMask","image","composite","downloadImage","getBase64","res","download","document","createElement","click","gitImage","TogglePixelationComponent","maskingSvc","pixelationOff","togglePixelation","ToolbarColorSelectorComponent","ntype","compactDropDownMenu","selectMenuLayout","innerWidth","windowWidth","setColor","findIndex","KeyMap","ToolbarComponent","version","environment","production","bootstrapModule","catch"],"mappings":";;;;;;;;;;;;;;;;;AAAA,aAASA,wBAAT,CAAkCC,GAAlC,EAAuC;AACtC;AACA;AACA,aAAOC,OAAO,CAACC,OAAR,GAAkBC,IAAlB,CAAuB,YAAW;AACxC,YAAIC,CAAC,GAAG,IAAIC,KAAJ,CAAU,yBAAyBL,GAAzB,GAA+B,GAAzC,CAAR;AACAI,SAAC,CAACE,IAAF,GAAS,kBAAT;AACA,cAAMF,CAAN;AACA,OAJM,CAAP;AAKA;;AACDL,4BAAwB,CAACQ,IAAzB,GAAgC,YAAW;AAAE,aAAO,EAAP;AAAY,KAAzD;;AACAR,4BAAwB,CAACG,OAAzB,GAAmCH,wBAAnC;AACAS,UAAM,CAACC,OAAP,GAAiBV,wBAAjB;AACAA,4BAAwB,CAACW,EAAzB,GAA8B,yCAA9B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACZA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AAKA,QAAMC,MAAM,GAAW,CACrB;AAACC,UAAI,EAAE,EAAP;AAAWC,eAAS,EAAE;AAAtB,KADqB,EAErB;AAACD,UAAI,EAAE,cAAP;AAAuBC,eAAS,EAAE;AAAlC,KAFqB,CAAvB;;QASaC,gB;;;;;YAAAA;;;;yBAAAA,gB;AAAgB,O;AAAA,gBAHlB,CAAC,6DAAaC,OAAb,CAAqBJ,MAArB,CAAD,CAGkB,EAFjB,4DAEiB;;;;0HAAhBG,gB,EAAgB;AAAA;AAAA,kBAFjB,4DAEiB;AAAA,O;AAFL,K;;;;;sEAEXA,gB,EAAgB;cAJ5B,sDAI4B;eAJnB;AACRE,iBAAO,EAAE,CAAC,6DAAaD,OAAb,CAAqBJ,MAArB,CAAD,CADD;AAERF,iBAAO,EAAE,CAAC,4DAAD;AAFD,S;AAImB,Q;;;;;;;;;;;;;;;;;;ACd7B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QASaQ,Y;;;AACX,4BAAoBC,KAApB,EAAmDC,GAAnD,EAAkE;AAAA;;AAA9C,aAAAD,KAAA,GAAAA,KAAA;AAA+B,aAAAC,GAAA,GAAAA,GAAA;AAgBnD,aAAAC,KAAA,GAAQ,aAAR;AAhBqE;;;;mCAC7D;AAAA;;AACN,eAAKF,KAAL,CAAWG,WAAX,CAAuBC,SAAvB,CAAiC,UAAAC,MAAM,EAAI;AACzC,gBAAGA,MAAM,CAACjB,IAAV,EAAe;AACb,mBAAI,CAACa,GAAL,CAASK,cAAT,CAAwBD,MAAM,CAACjB,IAA/B,EAAqCgB,SAArC,CAAgD,UAAAG,GAAG,EAAI;AACrD,oBAAI,CAACA,GAAG,CAACC,QAAJ,GAAeC,QAAf,CAAwB,OAAxB,CAAL,EAAuC;AACrCC,8BAAY,CAACC,OAAb,CAAqB,UAArB,EAAiC,YAAYJ,GAAG,CAACC,QAAJ,GAAeI,KAAf,CAAqB,kBAArB,EAAyC,CAAzC,CAA7C;AACAC,wBAAM,CAACC,KAAP;AACD,iBAHD,MAGO;AACLJ,8BAAY,CAACC,OAAb,CAAqB,UAArB,EAAiC,OAAjC;AACAE,wBAAM,CAACC,KAAP;AACD;AACF,eARD;AASD;AACF,WAZD;AAaD;;;;;;;uBAhBUf,Y,EAAY,+H,EAAA,wH;AAAA,K;;;YAAZA,Y;AAAY,+B;AAAA,c;AAAA,a;AAAA;AAAA;ACTzB;;AACA;;AADA;;;;;;;;;sEDSaA,Y,EAAY;cALxB,uDAKwB;eALd;AACTgB,kBAAQ,EAAE,UADD;AAETC,qBAAW,EAAE,sBAFJ;AAGTC,mBAAS,EAAE,CAAC,qBAAD;AAHF,S;AAKc,Q;;;;;;;;;;;;;;;;;;;;;;;;AETzB;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QA4CaC,S;;;;;YAAAA,S;AAAS,kBAFR,2DAEQ;;;;yBAATA,S;AAAS,O;AAAA,iBAHT,E;AAAE,gBARJ,CACP,uEADO,EAEP,oEAFO,EAGP,4DAHO,EAIP,oEAJO,EAKP,+DALO,EAMP,qEANO,CAQI;;;;0HAGFA,S,EAAS;AAAA,uBAtBlB,2DAsBkB,EArBlB,+FAqBkB,EApBlB,+DAoBkB,EAnBlB,oFAmBkB,EAlBlB,4EAkBkB,EAjBlB,uHAiBkB,EAhBlB,gGAgBkB,EAflB,yEAekB,EAdlB,8GAckB,EAblB,yGAakB;AAbO,kBAGzB,uEAHyB,EAIzB,oEAJyB,EAKzB,4DALyB,EAMzB,oEANyB,EAOzB,+DAPyB,EAQzB,qEARyB;AAaP,O;AALF,K;;;;;sEAKPA,S,EAAS;cAxBrB,sDAwBqB;eAxBZ;AACRC,sBAAY,EAAE,CACZ,2DADY,EAEZ,+FAFY,EAGZ,+DAHY,EAIZ,oFAJY,EAKZ,4EALY,EAMZ,uHANY,EAOZ,gGAPY,EAQZ,yEARY,EASZ,8GATY,EAUZ,yGAVY,CADN;AAaRrB,iBAAO,EAAE,CACP,uEADO,EAEP,oEAFO,EAGP,4DAHO,EAIP,oEAJO,EAKP,+DALO,EAMP,qEANO,CAbD;AAqBRsB,mBAAS,EAAE,EArBH;AAsBRC,mBAAS,EAAE,CAAC,2DAAD;AAtBH,S;AAwBY,Q;;;;;;;;;;;;;;;;;;AC5CtB;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;QAqBaC,sB;;;AAkDT,sCAAoBC,QAApB,EAAiDC,QAAjD,EACYC,UADZ,EACoDC,GADpD,EAEYC,cAFZ,EAEoDC,OAFpD,EAGYC,QAHZ,EAGuC;AAAA;;AAHnB,aAAAN,QAAA,GAAAA,QAAA;AAA6B,aAAAC,QAAA,GAAAA,QAAA;AACrC,aAAAC,UAAA,GAAAA,UAAA;AAAwC,aAAAC,GAAA,GAAAA,GAAA;AACxC,aAAAC,cAAA,GAAAA,cAAA;AAAwC,aAAAC,OAAA,GAAAA,OAAA;AACxC,aAAAC,QAAA,GAAAA,QAAA;AAlDL,aAAAC,QAAA,GAAW,KAAX;AACA,aAAAC,OAAA,GAAU,KAAV;AACA,aAAAC,UAAA,GAAa,EAAb;AAGA,aAAAC,WAAA,GAAc,KAAd;AACA,aAAAC,MAAA,GAAS,EAAT;AAEA,aAAAC,KAAA,GAAQ,SAAR;AACA,aAAAC,UAAA,GAAa,CAAb;AACA,aAAAC,OAAA,GAAU,EAAV;AAIA,aAAAC,aAAA,GAA+B,IAAI,yDAAJ,CAAkB;AACpDC,oBAAU,EAAE,EADwC;AAEpDC,2BAAiB,EAAE,GAFiC;AAGpDC,0BAAgB,EAAE,GAHkC;AAIpDC,wBAAc,EAAE,KAJoC;AAKpDC,0BAAgB,EAAE,IALkC;AAMpDC,kCAAwB,EAAE,GAN0B;AAOpDC,yBAAe,EAAE,OAPmC;AAQpDC,0BAAgB,EAAE;AARkC,SAAlB,CAA/B;AAeA,aAAAC,UAAA,GAAa,KAAb;AACA,aAAAC,WAAA,GAAc,EAAd;AACA,aAAAtC,YAAA,GAAe,EAAf;AACA,aAAAuC,YAAA,GAAe,KAAf;AAEA,aAAAC,OAAA,GAAkB,GAAlB;AAgBmC;;;;0CAT3B;AACX,eAAKtB,OAAL,CAAauB,WAAb,CAAyB,KAAKC,QAAL,CAAcC,aAAd,CAA4BC,SAArD;AACA,eAAKC,SAAL;AACA,eAAKC,UAAL,GAAkB,KAAKJ,QAAL,CAAcC,aAAd,CAA4BI,QAA5B,CAAqC,CAArC,CAAlB;AACH;;;mCAOO;AAAA;;AACJ,cAAMC,OAAO,GAAGC,MAAM,CAACC,OAAP,CAAelD,YAAf,CAAhB;;AACA,sCAAmBgD,OAAnB,8BAA4B;AAAvB,gBAAMG,IAAI,eAAV;;AACD,gBAAIA,IAAI,CAAC,CAAD,CAAJ,CAAQpD,QAAR,CAAiB,QAAjB,CAAJ,EAAgC;AAC5BoD,kBAAI,CAAC,CAAD,CAAJ,GAAUA,IAAI,CAAC,CAAD,CAAJ,CAAQjD,KAAR,CAAc,mBAAd,EAAmC,CAAnC,EAAsCkD,SAAtC,CAAgD,CAAhD,EAAmD,CAAnD,CAAV;AACA,mBAAKpD,YAAL,CAAkBqD,IAAlB,CAAuBF,IAAvB;AACH;AACJ;;AACD,eAAKG,eAAL,GAAuB,KAAK1B,aAAL,CAAmB2B,GAAnB,CAAuB7D,SAAvB,CAAiC,UAAC6D,GAAD;AAAA,mBAAqB,MAAI,CAACC,UAAL,GAAkBD,GAAvC;AAAA,WAAjC,CAAvB;AACA,eAAKE,wBAAL,GAAgC,KAAK7B,aAAL,CAAmB8B,YAAnB,CAAgChE,SAAhC,CAA0C,UAACiE,KAAD,EAAyB;AAC/F,kBAAI,CAACC,cAAL,CAAoBD,KAApB;;AACA,kBAAI,CAACE,YAAL,GAAoBF,KAApB;AACH,WAH+B,CAAhC;AAKA,eAAKG,UAAL,GAAkB,KAAK5C,OAAL,CAAa6C,aAAb,EAAlB;AACA,eAAKC,GAAL,GAAW,0CAAU,WAAV,EAAuBC,MAAvB,CAA8B,KAA9B,EACNC,IADM,CACD,iBADC,EACkB,KAAKJ,UAAL,CAAgBK,KAAhB,GAAsB,KAAtB,GAA4B,KAAKL,UAAL,CAAgBM,MAA5C,GAAmD,IADrE,EAENF,IAFM,CAED,QAFC,EAES,KAAKJ,UAAL,CAAgBO,YAFzB,EAGNH,IAHM,CAGD,OAHC,EAGQ,KAAKJ,UAAL,CAAgBQ,WAHxB,CAAX;AAKA,eAAKrD,cAAL,CAAoBxB,WAApB,CAAgCC,SAAhC,CAA0C,UAAAC,MAAM,EAAI;AAChD,gBAAM4E,MAAM,GAAG5E,MAAM,CAAC4E,MAAtB;AACH,WAFD;AAIA,eAAKrD,OAAL,CAAasD,WAAb,GAA2B9E,SAA3B,CAAqC,UAAA+E,GAAG,EAAI;AACxC,kBAAI,CAACC,YAAL;;AACA,kBAAI,CAACV,GAAL,CAASW,KAAT,CAAe,kBAAf,iBAA2CF,GAA3C;AACH,WAHD;AAKA,eAAKvD,OAAL,CAAa0D,UAAb,GAA0BlF,SAA1B,CAAoC,UAAA+E,GAAG,EAAI;AACvC,kBAAI,CAACpC,UAAL,GAAkB,IAAlB;;AACA,kBAAI,CAAC2B,GAAL,CAASa,SAAT,CAAmB,eAAnB,EAAoCC,MAApC;;AACA,gBAAMC,CAAC,GAAG,MAAI,CAACf,GAAL,CAASC,MAAT,CAAgB,GAAhB,EAAqBC,IAArB,CAA0B,OAA1B,EAAmC,iBAAiB,eAApD,EAAqEA,IAArE,CAA0E,aAA1E,EAAyF,OAAzF,EACLA,IADK,CACA,OADA,EACS,cADT,EAELA,IAFK,CAEA,SAFA,EAEW,MAAI,CAAC1B,OAFhB,EAGL0B,IAHK,CAGA,YAHA,EAGc,SAHd,CAAV;;AAIAa,aAAC,CAACd,MAAF,CAAS,WAAT,EACKC,IADL,CACU,MADV,EACkBO,GADlB,EAEKP,IAFL,CAEU,GAFV,EAEe,EAFf,EAGKA,IAHL,CAGU,GAHV,EAGe,EAHf;AAIH,WAXD;AAaA,eAAKhD,OAAL,CAAa8D,cAAb,GAA8BtF,SAA9B,CAAwC,UAAAuF,GAAG,EAAI;AAC3C,gBAAIA,GAAG,CAACC,IAAJ,KAAa,SAAjB,EAA4B;AACxB,oBAAI,CAAClB,GAAL,CAASa,SAAT,CAAmB,eAAnB,EAAoCX,IAApC,CAAyC,SAAzC,EAAoDe,GAAG,CAACE,KAAJ,GAAY,GAAhE;;AACA,oBAAI,CAAC3C,OAAL,GAAeyC,GAAG,CAACE,KAAJ,GAAY,GAA3B;AACH;;AACD,gBAAI,MAAI,CAAC5C,YAAT,EAAuB;AACnB;AACH;;AACD,gBAAI0C,GAAG,CAACC,IAAJ,KAAa,QAAjB,EAA2B;AACvB,oBAAI,CAACE,WAAL,CAAiBH,GAAG,CAACE,KAArB;AACH;;AACD,gBAAIF,GAAG,CAACC,IAAJ,KAAa,IAAjB,EAAuB;AACnB,oBAAI,CAACG,OAAL,CAAaJ,GAAG,CAACE,KAAjB;AACH;;AACD,gBAAIF,GAAG,CAACC,IAAJ,KAAa,MAAjB,EAAyB;AACrB,oBAAI,CAACI,QAAL,CAAcL,GAAG,CAACE,KAAlB;AACH;;AACD,gBAAIF,GAAG,CAACC,IAAJ,KAAa,QAAjB,EAA2B;AACvB,oBAAI,CAACK,gBAAL,CAAsBN,GAAG,CAACE,KAA1B;AACH;;AACD,gBAAIF,GAAG,CAACC,IAAJ,KAAa,UAAjB,EAA6B;AACzB,oBAAI,CAACM,eAAL;AACH;;AACD,gBAAIP,GAAG,CAACC,IAAJ,KAAa,QAAjB,EAA2B;AACvB,oBAAI,CAACO,sBAAL,CAA4BR,GAAG,CAACS,UAAhC;AACH;;AACD,gBAAIT,GAAG,CAACC,IAAJ,KAAa,WAAjB,EAA8B;AAC1B,oBAAI,CAACS,SAAL;AACH;;AACD,gBAAIV,GAAG,CAACC,IAAJ,KAAa,mBAAjB,EAAsC;AAClC,oBAAI,CAACU,iBAAL;AACH;;AACD,gBAAI,yEAAYC,MAAZ,CAAmBC,GAAnB,CAAuB,UAAAtH,CAAC;AAAA,qBAAIA,CAAC,CAACiD,KAAN;AAAA,aAAxB,EAAqC1B,QAArC,CAA8CkF,GAAG,CAACC,IAAlD,CAAJ,EAA6D;AACzD,oBAAI,CAACa,WAAL,CAAiBd,GAAG,CAACE,KAArB,EAA4BF,GAAG,CAACC,IAAhC;AACH;;AACD,kBAAI,CAACrC,SAAL;AACH,WApCD;AAsCH;;;uCAEmB;AAClB;AACA,eAAKiB,UAAL,GAAkB,KAAK5C,OAAL,CAAa6C,aAAb,EAAlB;;AACA,cAAI,KAAKD,UAAT,EAAqB;AACnB,iBAAKE,GAAL,GAAW,0CAAU,WAAV,EAAuBgC,MAAvB,CAA8B,KAA9B,EACR9B,IADQ,CACH,QADG,EACO,KAAKJ,UAAL,CAAgBO,YADvB,EAERH,IAFQ,CAEH,OAFG,EAEM,KAAKJ,UAAL,CAAgBQ,WAFtB,CAAX;AAGA,iBAAKN,GAAL,CAASW,KAAT,CAAe,iBAAf,EAAkC,KAAKb,UAAL,CAAgBK,KAAhB,GAAsB,KAAtB,GAA4B,KAAKL,UAAL,CAAgBM,MAA5C,GAAmD,IAArF;AACD;AACF;;;oCAEgB;AACb,eAAKlD,OAAL,CAAa+E,UAAb,CAAwB;AAAEC,cAAE,EAAE,KAAKlC,GAAX;AAAgBmC,eAAG,EAAE,KAAKzD,QAAL,CAAcC,aAAnC;AAAkDN,sBAAU,EAAE,KAAKA;AAAnE,WAAxB;AACH;;;yCAEwB7D,C,EAAC;AACtB,cAAIA,CAAC,CAAC4H,MAAF,CAASC,OAAT,KAAqB,SAAzB,EAAoC;AAChC7H,aAAC,CAAC4H,MAAF,CAASE,UAAT,CAAoBxB,MAApB;AACH;;AACD,eAAKjC,SAAL;AACA,eAAK+C,iBAAL;AACH;;;gCAEcpH,C,EAAG;AACd,cAAG,CAAC,KAAK6C,OAAN,IAAiB7C,CAAC,CAAC+H,MAAtB,EAA8B;AAC1B,iBAAKC,gBAAL,CAAsBhI,CAAtB;AACA;AACH;;AACD,cAAI,KAAKuG,CAAT,EAAY;AACR,iBAAK0B,YAAL,CAAkB,KAAKpF,OAAvB,EAAgC,KAAKC,UAArC,EAAiD,KAAKyD,CAAtD,EAAyD,KAAKvD,MAA9D;AACH;;AACD,eAAKuD,CAAL,GAAS,KAAKf,GAAL,CAASgC,MAAT,CAAgB,YAAhB,CAAT;;AACA,cAAIxH,CAAC,CAACkI,MAAF,KAAa,CAAjB,EAAoB;AAAE;AAAS;;AAC/B,cAAI,KAAKtF,QAAT,EAAmB;AAAE;AAAS;;AAC9B,cAAI,KAAKmB,YAAT,EAAuB;AAAE;AAAS;;AAClC,eAAKlB,OAAL,GAAe,IAAf;AACA,eAAKC,UAAL,GAAkB,CAAC,CAAC9C,CAAC,CAACmI,MAAF,GAAW,KAAK9C,YAAL,CAAkB+C,GAAlB,CAAsBC,CAAlC,KACd,KAAK,KAAKnE,QAAL,CAAcC,aAAd,CAA4BmE,qBAA5B,GAAoD3C,KAApD,GAA4D,KAAKzB,QAAL,CAAcC,aAAd,CAA4BoE,WAA7F,CADc,CAAD,EAElB,CAACvI,CAAC,CAACwI,MAAF,GAAW,KAAKnD,YAAL,CAAkB+C,GAAlB,CAAsBK,CAAlC,KACC,KAAK,KAAKvE,QAAL,CAAcC,aAAd,CAA4BmE,qBAA5B,GAAoD3C,KAApD,GAA4D,KAAKzB,QAAL,CAAcC,aAAd,CAA4BoE,WAA7F,CADD,CAFkB,CAAlB;;AAIA,cAAI,KAAK/C,GAAL,CAASgC,MAAT,CAAgB,YAAhB,EAA8BkB,KAA9B,EAAJ,EAA2C;AACvC,iBAAKnC,CAAL,GAAS,KAAKf,GAAL,CAASC,MAAT,CAAgB,GAAhB,EAAqBC,IAArB,CAA0B,OAA1B,EAAmC,UAAnC,CAAT;AACA,iBAAKF,GAAL,CAASa,SAAT,CAAmB,QAAnB,EAA6BX,IAA7B,CAAkC,QAAlC,EAA4C,SAA5C;AACH;;AACD,cAAI1F,CAAC,CAAC2I,SAAF,CAAYd,OAAZ,KAAwB,QAA5B,EAAsC;AAClC,iBAAKe,YAAL;AACA;AACH;;AACD,eAAK5F,MAAL,CAAY6B,IAAZ,CAAiB,CAAC,CAAC7E,CAAC,CAACmI,MAAF,GAAW,KAAK9C,YAAL,CAAkB+C,GAAlB,CAAsBC,CAAlC,KACb,KAAK,KAAKnE,QAAL,CAAcC,aAAd,CAA4BmE,qBAA5B,GAAoD3C,KAApD,GAA4D,KAAKzB,QAAL,CAAcC,aAAd,CAA4BoE,WAA7F,CADa,CAAD,EAEjB,CAACvI,CAAC,CAACwI,MAAF,GAAW,KAAKnD,YAAL,CAAkB+C,GAAlB,CAAsBK,CAAlC,KACC,KAAK,KAAKvE,QAAL,CAAcC,aAAd,CAA4BmE,qBAA5B,GAAoD3C,KAApD,GAA4D,KAAKzB,QAAL,CAAcC,aAAd,CAA4BoE,WAA7F,CADD,CAFiB,CAAjB;AAIA,eAAK/C,GAAL,CAASgC,MAAT,CAAgB,YAAhB,EAA8B/B,MAA9B,CAAqC,UAArC,EAAiDC,IAAjD,CAAsD,QAAtD,EAAgE,KAAK1C,MAArE,EACKmD,KADL,CACW,MADX,EACmB,MADnB,EAEKT,IAFL,CAEU,cAFV,EAE0B,KAAK,KAAKL,YAAL,CAAkBwD,SAAlB,GAA8B,CAAnC,CAF1B,EAGKnD,IAHL,CAGU,QAHV,EAGoB,MAHpB;AAIA,eAAKF,GAAL,CAASgC,MAAT,CAAgB,YAAhB,EAA8B/B,MAA9B,CAAqC,QAArC,EACKC,IADL,CACU,IADV,EACgB,KAAK1C,MAAL,CAAY,KAAKA,MAAL,CAAY8F,MAAZ,GAAqB,CAAjC,EAAoC,CAApC,CADhB,EAEKpD,IAFL,CAEU,IAFV,EAEgB,KAAK1C,MAAL,CAAY,KAAKA,MAAL,CAAY8F,MAAZ,GAAqB,CAAjC,EAAoC,CAApC,CAFhB,EAGKpD,IAHL,CAGU,GAHV,EAGe,KAAK,KAAKL,YAAL,CAAkBwD,SAAlB,GAA8B,GAAnC,CAHf,EAIKnD,IAJL,CAIU,cAJV,EAI0B,KAAK,KAAKL,YAAL,CAAkBwD,SAAlB,GAA8B,CAAnC,CAJ1B,EAKKnD,IALL,CAKU,MALV,EAKkB,KAAKhD,OAAL,CAAaqG,YAAb,CAA0B9F,KAL5C,EAMKyC,IANL,CAMU,QANV,EAMoB,MANpB,EAOKA,IAPL,CAOU,WAPV,EAOuB,MAPvB,EAQKA,IARL,CAQU,OARV,EAQmB,kBARnB,EASKA,IATL,CASU,OATV,EASmB,gBATnB;AAUH;;;qCACmBsD,S,EAAqB;AAAA;;AACrC,cAAIC,KAAK,GAAG,EAAZ;;AACA,cAAID,SAAJ,EAAe;AACXC,iBAAK,GAAG,QAAR;AACH;;AACD,eAAKzD,GAAL,CAASa,SAAT,CAAmB,QAAnB,EAA6BX,IAA7B,CAAkC,QAAlC,EAA4C,MAA5C;AACA,eAAKF,GAAL,CAASgC,MAAT,CAAgB,YAAhB,EAA8BlB,MAA9B;AACA,cAAMC,CAAC,GAAG,KAAKf,GAAL,CAASC,MAAT,CAAgB,GAAhB,EAAqBC,IAArB,CAA0B,OAA1B,EAAmC,KAAKhD,OAAL,CAAaqG,YAAb,CAA0B9F,KAA1B,GAAkC,eAAlC,GAAoDgG,KAAvF,EAA8FvD,IAA9F,CAAmG,aAAnG,EAAkH,OAAlH,EACLA,IADK,CACA,OADA,EACS,KAAKhD,OAAL,CAAaqG,YAAb,CAA0B9F,KADnC,EAELyC,IAFK,CAEA,SAFA,EAEW,KAAK1B,OAFhB,EAGL0B,IAHK,CAGA,YAHA,EAGc,SAHd,CAAV;AAIAa,WAAC,CAACd,MAAF,CAAS,SAAT,EACKC,IADL,CACU,QADV,EACoB,KAAK1C,MADzB,EAEK0C,IAFL,CAEU,iBAFV,EAE6B,YAF7B,EAGKS,KAHL,CAGW,MAHX,EAGmB,KAAKzD,OAAL,CAAaqG,YAAb,CAA0B9F,KAH7C;AAXqC;AAAA;AAAA;;AAAA;AAAA;AAAA,kBAe1BiG,KAf0B;AAgBjC,kBAAMC,MAAM,GAAG,MAAf;AACA5C,eAAC,CAACF,SAAF,CAAY,SAAZ,EACK+C,IADL,CACU,CAACF,KAAD,CADV,EAEKG,KAFL,GAGK5D,MAHL,CAGY,QAHZ,EAIKC,IAJL,CAIU,IAJV,EAIgBwD,KAAK,CAAC,CAAD,CAJrB,EAKKxD,IALL,CAKU,IALV,EAKgBwD,KAAK,CAAC,CAAD,CALrB,EAMKxD,IANL,CAMU,GANV,EAMe,IAAI,MAAI,CAACL,YAAL,CAAkBwD,SANrC,EAOKnD,IAPL,CAOU,cAPV,EAO0B,KAAK,MAAI,CAACL,YAAL,CAAkBwD,SAAlB,GAA8B,CAAnC,CAP1B,EAQKnD,IARL,CAQU,MARV,EAQkB,SARlB,EASKA,IATL,CASU,QATV,EASoB,MATpB,EAUKA,IAVL,CAUU,WAVV,EAUuB,MAVvB,EAWKA,IAXL,CAWU,OAXV,EAWmB,YAXnB,EAYKA,IAZL,CAYU,QAZV,EAYoB,MAZpB,EAaK4D,IAbL,CAaU,0CACDC,EADC,CACE,MADF,EACU,YAAY;AACpBJ,sBAAM,CAACK,UAAP,CAAkB,IAAlB;AACH,eAHC,EAIDD,EAJC,CAIE,KAJF,EAIS,YAAM;AACb,sBAAI,CAAC3G,QAAL,GAAgB,KAAhB;;AACA,sBAAI,CAACqF,YAAL,CAAkB,MAAI,CAACpF,OAAvB,EAAgC,MAAI,CAACC,UAArC,EAAiD,MAAI,CAACyD,CAAtD,EAAyD,MAAI,CAACvD,MAA9D;AACH,eAPC,CAbV;AAjBiC;;AAerC,iCAAoB,KAAKA,MAAzB,8HAAiC;AAAA;AAyBhC;AAxCoC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAyCrC,eAAKA,MAAL,CAAYyG,MAAZ,CAAmB,CAAnB;AACA,eAAK5G,OAAL,GAAe,KAAf;AACA,eAAKwB,SAAL;AACA,eAAK+C,iBAAL;AACA,eAAKa,YAAL,CAAkB,KAAKpF,OAAvB,EAAgC,KAAKC,UAArC,EAAiD,KAAKyD,CAAtD,EAAyD,KAAKvD,MAA9D;AACH;;;yCAEuB;AAAA;;AACpB,cAAMmG,MAAM,GAAG,IAAf;AACA,eAAK3D,GAAL,CAASa,SAAT,CAAmB,aAAnB,EAAkCiD,IAAlC,CAAuC,0CAClCC,EADkC,CAC/B,MAD+B,EACvB,YAAY;AACpBJ,kBAAM,CAACK,UAAP,CAAkB,IAAlB;AACH,WAHkC,EAIlCD,EAJkC,CAI/B,KAJ+B,EAIxB,YAAM;AACb,kBAAI,CAAC3G,QAAL,GAAgB,KAAhB;;AACA,kBAAI,CAACqF,YAAL,CAAkB,MAAI,CAACpF,OAAvB,EAAgC,MAAI,CAACC,UAArC,EAAiD,MAAI,CAACyD,CAAtD,EAAyD,MAAI,CAACvD,MAA9D;AACH,WAPkC,CAAvC;AASH;;;kCACgBhD,C,EAAG;AAChB,cAAI,CAAC,KAAK6C,OAAV,EAAmB;AAAE;AAAS;;AAC9B,cAAM0D,CAAC,GAAG,0CAAU,YAAV,CAAV;;AACA,cAAIvG,CAAC,CAAC4H,MAAF,CAASC,OAAT,KAAqB,MAAzB,EAAiC;AAAE;AAAS;;AAC5C,cAAI7H,CAAC,CAAC4H,MAAF,CAAS8B,SAAT,CAAmBC,OAAnB,KAA+B,kBAAnC,EAAuD;AACnDpD,aAAC,CAACiB,MAAF,CAAS,MAAT,EAAiBlB,MAAjB;AACA;AACH;;AACDC,WAAC,CAACiB,MAAF,CAAS,MAAT,EAAiBlB,MAAjB;AACAC,WAAC,CAACd,MAAF,CAAS,MAAT,EACKC,IADL,CACU,IADV,EACgB,KAAK5C,UAAL,CAAgB,CAAhB,CADhB,EAEK4C,IAFL,CAEU,IAFV,EAEgB,KAAK5C,UAAL,CAAgB,CAAhB,CAFhB,EAGK4C,IAHL,CAGU,IAHV,EAGgB,CAAC1F,CAAC,CAACmI,MAAF,GAAW,KAAK9C,YAAL,CAAkB+C,GAAlB,CAAsBC,CAAlC,KACP,KAAK,KAAKnE,QAAL,CAAcC,aAAd,CAA4BmE,qBAA5B,GAAoD3C,KAApD,GAA4D,KAAKzB,QAAL,CAAcC,aAAd,CAA4BoE,WAA7F,CADO,CAHhB,EAKK7C,IALL,CAKU,IALV,EAKgB,CAAC1F,CAAC,CAACwI,MAAF,GAAW,KAAKnD,YAAL,CAAkB+C,GAAlB,CAAsBK,CAAlC,KACP,KAAK,KAAKvE,QAAL,CAAcC,aAAd,CAA4BmE,qBAA5B,GAAoD3C,KAApD,GAA4D,KAAKzB,QAAL,CAAcC,aAAd,CAA4BoE,WAA7F,CADO,CALhB,EAOK7C,IAPL,CAOU,QAPV,EAOoB,SAPpB,EAQKA,IARL,CAQU,cARV,EAQ0B,KAAK,KAAKL,YAAL,CAAkBwD,SAAlB,GAA8B,GAAnC,CAR1B;AASH;;;mCAEiB7I,C,EAAG;AACjB,cAAI,KAAK6C,OAAT,EAAkB;AAAE;AAAS;;AAC7B,cAAM+G,SAAS,GAAG,EAAlB;AACA,cAAIC,MAAJ;AACA,eAAKjH,QAAL,GAAgB,IAAhB;AACA,cAAMkH,IAAI,GAAG,0CAAU9J,CAAC,CAAC8H,UAAZ,EAAwBN,MAAxB,CAA+B,SAA/B,CAAb;AACA,cAAMuC,OAAO,GAAG,0CAAU/J,CAAC,CAAC8H,UAAZ,EAAwBzB,SAAxB,CAAkC,QAAlC,CAAhB;AACArG,WAAC,CAACgK,YAAF,CAAe,IAAf,EAAqB,yCAASvB,CAA9B;AACAzI,WAAC,CAACgK,YAAF,CAAe,IAAf,EAAqB,yCAAS3B,CAA9B;AARiB;AAAA;AAAA;;AAAA;AASjB,kCAA0B0B,OAAO,CAACE,OAAR,CAAgB,CAAhB,CAA1B,mIAA8C;AAAA,kBAAnCC,WAAmC;AAC1CL,oBAAM,GAAG,0CAAUK,WAAV,CAAT;AACAN,uBAAS,CAAC/E,IAAV,CAAe,CAACgF,MAAM,CAACnE,IAAP,CAAY,IAAZ,CAAD,EAAoBmE,MAAM,CAACnE,IAAP,CAAY,IAAZ,CAApB,CAAf;AACH;AAZgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAajBoE,cAAI,CAACpE,IAAL,CAAU,QAAV,EAAoBkE,SAApB;AACH;;;yCAEuBO,E,EAAW;AAC/B,cAAIA,EAAJ,EAAQ;AACJ,iBAAKnG,OAAL,GAAeoG,IAAI,CAACC,GAAL,CAAS,KAAKrG,OAAL,GAAe,EAAxB,EAA4B,GAA5B,CAAf;AACH,WAFD,MAEO;AACH,iBAAKA,OAAL,GAAeoG,IAAI,CAACE,GAAL,CAAS,KAAKtG,OAAL,GAAe,EAAxB,EAA4B,CAA5B,CAAf;AACH,WAL8B,CAM/B;;AACH;;;oCAIkBiC,G,EAAI;AACnB,cAAIA,GAAJ,EAAS;AAAE,iBAAKT,GAAL,CAASW,KAAT,CAAe,kBAAf,iBAA2CF,GAA3C;AAAsD,WAAjE,MAAuE;AACnE,iBAAKT,GAAL,CAASW,KAAT,CAAe,kBAAf,iBAA2C,KAAKF,GAAL,CAAS9B,aAAT,CAAuBoG,KAAlE;AACA,iBAAKC,WAAL,CAAiBrG,aAAjB,CAA+BoG,KAA/B,GAAuC,KAAKtE,GAAL,CAAS9B,aAAT,CAAuBoG,KAAvB,CAA6B7I,KAA7B,CAAmC,mBAAnC,EAAwD,CAAxD,EAA2DkD,SAA3D,CAAqE,CAArE,EAAwE,CAAxE,CAAvC;AACH;AACJ;;;8CAEyB;AACtB,eAAKY,GAAL,CAASW,KAAT,CAAe,kBAAf,gFAA0G,KAAK3D,GAAL,CAASiI,MAAT,CAAgB,KAAKD,WAAL,CAAiBrG,aAAjB,CAA+BoG,KAA/B,CAAqCG,QAArC,CAA8C,CAA9C,EAAiD,GAAjD,CAAhB,CAA1G;AACA,eAAKzE,GAAL,CAAS9B,aAAT,CAAuBoG,KAAvB,4EAAiG,KAAK/H,GAAL,CAASiI,MAAT,CAAgB,KAAKD,WAAL,CAAiBrG,aAAjB,CAA+BoG,KAA/B,CAAqCG,QAArC,CAA8C,CAA9C,EAAiD,GAAjD,CAAhB,CAAjG;AACA,eAAKF,WAAL,CAAiBrG,aAAjB,CAA+BoG,KAA/B,GAAuC,KAAKC,WAAL,CAAiBrG,aAAjB,CAA+BoG,KAA/B,CAAqCG,QAArC,CAA8C,CAA9C,EAAiD,GAAjD,CAAvC;AACH;;;uCAEcvF,K,EAAmB;AAC9B,cAAI,KAAKjB,QAAL,IAAiBiB,KAAK,CAAC0D,SAAN,IAAmB,CAAxC,EAA2C;AACvC,iBAAKrD,GAAL,CAASa,SAAT,CAAmB,QAAnB,EAA6BX,IAA7B,CAAkC,GAAlC,EAAuC,KAAKP,KAAK,CAAC0D,SAAN,GAAkB,GAAvB,CAAvC;AACA,iBAAKrD,GAAL,CAASa,SAAT,CAAmB,UAAnB,EAA+BX,IAA/B,CAAoC,cAApC,EAAoD,KAAKP,KAAK,CAAC0D,SAAN,GAAkB,CAAvB,CAApD;AACA,iBAAKrD,GAAL,CAASa,SAAT,CAAmB,QAAnB,EAA6BX,IAA7B,CAAkC,cAAlC,EAAkD,KAAKP,KAAK,CAAC0D,SAAN,GAAkB,CAAvB,CAAlD;AACH;AACJ;;;qCAEmBhG,O,EAASC,U,EAAYyD,C,EAAGvD,M,EAAM;AAC9C,cAAMkE,UAAU,GAAG,KAAK5C,UAAL,CAAgBF,SAAnC;AACA,eAAKjB,OAAL,CAAawH,OAAb,CAAqB,CAACC,IAAI,CAACC,SAAL,CAAe3D,UAAf,CAAD,EAA6B0D,IAAI,CAACC,SAAL,CAAehI,OAAf,CAA7B,EACrB+H,IAAI,CAACC,SAAL,CAAe/H,UAAf,CADqB,EACO,0DAAS,CAACyD,CAAD,CADhB,EACqBqE,IAAI,CAACC,SAAL,CAAe7H,MAAf,CADrB,CAArB;;AAEA,cAAI,KAAKG,OAAL,CAAa2F,MAAb,GAAsB,EAA1B,EAA8B;AAC1B,iBAAK3F,OAAL,CAAa2H,GAAb;AACH;AACJ;;;4CAEuB;AACpB,cAAM5D,UAAU,GAAG,KAAKhD,QAAL,CAAcC,aAAd,CAA4BC,SAA/C;AACA,cAAM2G,QAAQ,GAAGH,IAAI,CAACC,SAAL,CAAe;AAC5B3G,oBAAQ,EAAE0G,IAAI,CAACC,SAAL,CAAe3D,UAAf,CADkB;AAE5BjB,eAAG,EAAE,KAAKvD,OAAL,CAAasI,UAFU;AAG5BhH,mBAAO,EAAE,KAAKA;AAHc,WAAf,CAAjB;AAKAxC,sBAAY,CAACC,OAAb,CAAqB,KAAKiB,OAAL,CAAasI,UAAlC,EAA8CD,QAA9C;AACH;;;+CAE6B7D,U,EAAkB;AAC5C,eAAKF,eAAL;AACA,cAAM+D,QAAQ,GAAGH,IAAI,CAACK,KAAL,CAAW/D,UAAX,CAAjB;AACA,eAAKhD,QAAL,CAAcC,aAAd,CAA4BC,SAA5B,GAAwCwG,IAAI,CAACK,KAAL,CAAWF,QAAQ,CAAC7G,QAApB,CAAxC;AACA,eAAKsB,GAAL,GAAW,0CAAU,KAAV,CAAX;AACA,eAAK9C,OAAL,CAAasI,UAAb,GAA0BD,QAAQ,CAAC9E,GAAnC;AACA,eAAKiF,cAAL;AACA,eAAK7G,SAAL;AACA,eAAKR,UAAL,GAAkB,KAAKnB,OAAL,CAAamB,UAAb,EAAlB;AACA,eAAKS,UAAL,GAAkB,KAAKJ,QAAL,CAAcC,aAAd,CAA4BI,QAA5B,CAAqC,CAArC,CAAlB;AACH;;;+BAEU;AACP,cAAI,KAAKpB,OAAL,CAAa2F,MAAb,GAAsB,CAA1B,EAA6B;AACzB,iBAAKxE,UAAL,CAAgBF,SAAhB,GAA4BwG,IAAI,CAACK,KAAL,CAAW,KAAK9H,OAAL,CAAa,CAAb,EAAgB,CAAhB,CAAX,CAA5B;AACA,iBAAKN,OAAL,GAAe+H,IAAI,CAACK,KAAL,CAAW,KAAK9H,OAAL,CAAa,CAAb,EAAgB,CAAhB,CAAX,CAAf;AACA,iBAAKL,UAAL,GAAkB8H,IAAI,CAACK,KAAL,CAAW,KAAK9H,OAAL,CAAa,CAAb,EAAgB,CAAhB,CAAX,CAAlB;AACA,iBAAKoD,CAAL,GAAS,KAAKpD,OAAL,CAAa,CAAb,EAAgB,CAAhB,CAAT;AACA,iBAAKH,MAAL,GAAc4H,IAAI,CAACK,KAAL,CAAW,KAAK9H,OAAL,CAAa,CAAb,EAAgB,CAAhB,CAAX,CAAd;AACA,iBAAKA,OAAL,CAAagI,KAAb;AACH;;AACD,eAAKD,cAAL;AACH;;;gCAEcE,C,EAAW;AACtB,eAAK9G,UAAL,CAAgBmB,MAAhB,CAAuB,KAAKnB,UAAL,CAAgBC,QAAhB,CAAyB6G,CAAzB,CAAvB;AACH;;;iCAEeA,C,EAAW;AACvB,eAAK9G,UAAL,CAAgB+G,OAAhB,CAAwB,KAAK/G,UAAL,CAAgBC,QAAhB,CAAyB6G,CAAzB,CAAxB;AACH;;;oCAEkBA,C,EAAWnI,K,EAAe;AACzC,eAAKqB,UAAL,CAAgBC,QAAhB,CAAyB6G,CAAzB,EAA4B7G,QAA5B,CAAqC,CAArC,EAAwCyF,YAAxC,CAAqD,OAArD,EAA8D,WAAW/G,KAAX,GAAmB,GAAjF;AACA,eAAKqB,UAAL,CAAgBC,QAAhB,CAAyB6G,CAAzB,EAA4BpB,YAA5B,CAAyC,OAAzC,EAAkD/G,KAAlD,EAFyC,CAGzC;AACH;;;yCAEuBmI,C,EAAW;AAC/B,cAAI,KAAK9G,UAAL,CAAgBC,QAAhB,CAAyB6G,CAAzB,EAA4BE,YAA5B,CAAyC,YAAzC,MAA2D,QAA/D,EAAyE;AACrE,iBAAKhH,UAAL,CAAgBC,QAAhB,CAAyB6G,CAAzB,EAA4BpB,YAA5B,CAAyC,YAAzC,EAAuD,QAAvD;AACA,iBAAK1F,UAAL,CAAgBC,QAAhB,CAAyB6G,CAAzB,EAA4BpB,YAA5B,CAAyC,aAAzC,EAAwD,MAAxD;AACA;AACH;;AACD,eAAK1F,UAAL,CAAgBC,QAAhB,CAAyB6G,CAAzB,EAA4BpB,YAA5B,CAAyC,YAAzC,EAAuD,SAAvD;AACA,eAAK1F,UAAL,CAAgBC,QAAhB,CAAyB6G,CAAzB,EAA4BpB,YAA5B,CAAyC,aAAzC,EAAwD,OAAxD;AACA,eAAK3F,SAAL;AACH;;;oCAEe;AACZ,cAAI,KAAKC,UAAL,CAAgBC,QAAhB,CAAyBuE,MAAzB,GAAkC,CAAtC,EAAyC;AACrC,gBAAI,KAAKyC,aAAL,CAAmB,CAAnB,CAAJ,EAA2B;AAAA;AAAA;AAAA;;AAAA;AACvB,sCAAoB,KAAKjH,UAAL,CAAgBC,QAApC,mIAA8C;AAAA,sBAAnCiH,KAAmC;;AAC1C,sBAAIA,KAAK,CAACC,SAAN,CAAgBC,QAAhB,CAAyB,cAAzB,CAAJ,EAA8C;AAC1CF,yBAAK,CAACxB,YAAN,CAAmB,YAAnB,EAAiC,QAAjC;AACAwB,yBAAK,CAACxB,YAAN,CAAmB,aAAnB,EAAkC,MAAlC;AACH;AACJ;AANsB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAO1B,aAPD,MAOO;AAAA;AAAA;AAAA;;AAAA;AACH,sCAAoB,KAAK1F,UAAL,CAAgBC,QAApC,mIAA8C;AAAA,sBAAnCiH,MAAmC;;AAC1CA,wBAAK,CAACxB,YAAN,CAAmB,YAAnB,EAAiC,SAAjC;;AACAwB,wBAAK,CAACxB,YAAN,CAAmB,aAAnB,EAAkC,OAAlC;AACH;AAJE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKN;AACJ;AACJ;;;8CAEyB;AACtB,cAAI,KAAK1F,UAAL,CAAgBmH,SAAhB,CAA0BC,QAA1B,CAAmC,aAAnC,CAAJ,EAAuD;AACnD,iBAAKpH,UAAL,CAAgBmH,SAAhB,CAA0BnF,MAA1B,CAAiC,aAAjC;AACH,WAFD,MAEO;AACH,iBAAKhC,UAAL,CAAgBmH,SAAhB,CAA0BE,GAA1B,CAA8B,aAA9B;AACH;AACJ;;;wCAEmB;AAAA;;AAChB,cAAI,CAAC,KAAK5H,YAAV,EAAwB;AACpB,gBAAI,KAAKlB,OAAT,EAAkB;AACd;AACH;;AACD,iBAAKkB,YAAL,GAAoB,IAApB;AACA,iBAAKpB,QAAL,CAAciJ,WAAd,GACK7L,IADL,CACU,UAAA8L,MAAM,EAAI;AACZ,kBAAMtF,CAAC,GAAG,MAAI,CAACf,GAAL,CAASC,MAAT,CAAgB,GAAhB,EAAqBC,IAArB,CAA0B,OAA1B,EAAmC,iBAAiB,eAAjB,GAAmC,UAAtE,EAAkFA,IAAlF,CAAuF,aAAvF,EAAsG,OAAtG,EACLA,IADK,CACA,OADA,EACS,cADT,EAELA,IAFK,CAEA,SAFA,EAEY,MAAI,CAAC1B,OAAL,GAAe,GAAf,GAAqB,MAAI,CAACA,OAA1B,GAAoC,GAFhD,EAGL0B,IAHK,CAGA,YAHA,EAGc,SAHd,CAAV;;AAIAa,eAAC,CAACd,MAAF,CAAS,WAAT,EACKC,IADL,CACU,MADV,EACkBmG,MADlB,EAEKnG,IAFL,CAEU,GAFV,EAEe,EAFf,EAGKA,IAHL,CAGU,GAHV,EAGe,EAHf;AALY;AAAA;AAAA;;AAAA;AASZ,sCAAoB,MAAI,CAACpB,UAAL,CAAgBC,QAApC,mIAA8C;AAAA,sBAAnCiH,KAAmC;;AAC1C,sBAAI,CAACA,KAAK,CAACC,SAAN,CAAgBC,QAAhB,CAAyB,SAAzB,CAAL,EAA0C;AACtCF,yBAAK,CAACxB,YAAN,CAAmB,YAAnB,EAAiC,QAAjC;AACAwB,yBAAK,CAACxB,YAAN,CAAmB,aAAnB,EAAkC,MAAlC;AACH;AACJ;AAdW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAeZ,oBAAI,CAAC3F,SAAL;AACH,aAjBL;AAkBH,WAvBD,MAuBO;AACH,iBAAKmB,GAAL,CAASa,SAAT,CAAmB,UAAnB,EAA+BC,MAA/B;AACA,iBAAKvC,YAAL,GAAoB,KAApB;AAFG;AAAA;AAAA;;AAAA;AAGH,oCAAoB,KAAKO,UAAL,CAAgBC,QAApC,mIAA8C;AAAA,oBAAnCiH,KAAmC;AAC1CA,qBAAK,CAACxB,YAAN,CAAmB,YAAnB,EAAiC,SAAjC;AACAwB,qBAAK,CAACxB,YAAN,CAAmB,aAAnB,EAAkC,OAAlC;AACH;AANE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAOH,iBAAK3F,SAAL;AACH;AACJ;;;sCAEoB+G,C,EAAS;AAC1B,cAAI,KAAK9G,UAAL,CAAgBC,QAAhB,CAAyB6G,CAAzB,EAA4BE,YAA5B,CAAyC,YAAzC,MAA2D,SAA/D,EAA0E;AACtE,mBAAO,IAAP;AACH;;AACD,iBAAO,KAAP;AACH;;;oCAEkBF,C,EAAW;AAC1B,cAAI,KAAKU,YAAL,CAAkBV,CAAlB,MAAyB,eAA7B,EAA8C;AAC1C,iBAAKvH,UAAL,GAAkB,KAAlB;AACH;;AACD,eAAKS,UAAL,CAAgBC,QAAhB,CAAyB6G,CAAzB,EAA4B9E,MAA5B;AACH;;;0CAEwB;AACrB,cAAI,KAAKzD,OAAT,EAAkB;AAAE;AAAS;;AAC7B,cAAIkJ,OAAO,CAAC,8CAAD,CAAX,EAA6D;AACzD,iBAAKvG,GAAL,CAASa,SAAT,CAAmB,GAAnB,EAAwBC,MAAxB;AACH;AACJ;;;6CAE2B;AACxB,cAAI,CAAC,KAAKzD,OAAV,EAAmB;AAAE;AAAS;;AAC9B,eAAKA,OAAL,GAAe,KAAf;AACA,eAAKC,UAAL,GAAkB,EAAlB;AACA,eAAKE,MAAL,GAAc,EAAd;AACA,eAAKwC,GAAL,CAASgC,MAAT,CAAgB,YAAhB,EAA8BlB,MAA9B;AACH;;;4CAImB0F,K,EAAsB;AACtC,cAAIA,KAAK,CAAC9L,IAAN,KAAe,QAAnB,EAA6B;AAAE,iBAAK+L,kBAAL;AAA4B;;AAC3D,cAAID,KAAK,CAAC9L,IAAN,KAAe,aAAnB,EAAkC;AAAE,iBAAKgM,mBAAL;AAA6B;;AACjE,cAAIF,KAAK,CAAC9L,IAAN,KAAe,MAAnB,EAA2B;AAAE,iBAAKiM,aAAL;AAAuB;;AACpD,cAAIH,KAAK,CAAC9L,IAAN,KAAe,MAAf,IAAyB8L,KAAK,CAACI,OAAN,KAAkB,IAA/C,EAAqD;AAAE,iBAAKC,IAAL;AAAc;;AACrE,cAAIL,KAAK,CAAC9L,IAAN,KAAe,SAAf,IAA4B8L,KAAK,CAAC9L,IAAN,KAAe,QAA/C,EAAyD;AAAE,iBAAK8E,UAAL,CAAgBsH,SAAhB;AAA6B;AAC3F;;;qCAEmBlB,C,EAAS;AAEzB,cAAM/D,MAAM,GAAG,CAAC,CAAC,sBAAD,EAAyB,MAAzB,CAAD,EAAmC,CAAC,sBAAD,EAAyB,eAAzB,CAAnC,EAA8E,CAAC,sBAAD,EAAyB,YAAzB,CAA9E,EACf,CAAC,sBAAD,EAAyB,SAAzB,CADe,EACsB,CAAC,sBAAD,EAAyB,QAAzB,CADtB,EAC0D,CAAC,2BAAD,EAA8B,eAA9B,CAD1D,CAAf;;AAEA,sCAAoBA,MAApB,+BAA4B;AAAvB,gBAAMpE,KAAK,eAAX;;AACD,gBAAIA,KAAK,CAAC,CAAD,CAAL,KAAa,KAAKqB,UAAL,CAAgBC,QAAhB,CAAyB6G,CAAzB,EAA4BE,YAA5B,CAAyC,OAAzC,CAAjB,EAAoE;AAChE,qBAAOrI,KAAK,CAAC,CAAD,CAAZ;AACH;AACJ;;AACD,iBAAO,aAAP;AACH;;;;;;;uBA9fQb,sB,EAAsB,wH,EAAA,6I,EAAA,iI,EAAA,gJ,EAAA,+H,EAAA,yI,EAAA,4I;AAAA,K;;;YAAtBA,sB;AAAsB,yC;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrBnC;;AACA;;AACI;;AACI;;AAAsB;AAAA,mBAAW,IAAAmK,OAAA,QAAX;AAA0B,WAA1B,EAA2B,WAA3B,EAA2B;AAAA,mBAAc,IAAAC,SAAA,QAAd;AAA+B,WAA1D;;AACtB;;AACJ;;AACJ;;;;AAJc;;AAAA;;;;;;;;;sEDmBDpK,sB,EAAsB;cALlC,uDAKkC;eALxB;AACPP,kBAAQ,EAAE,oBADH;AAEPC,qBAAW,EAAE,iCAFN;AAGPC,mBAAS,EAAE,CAAC,gCAAD;AAHJ,S;AAKwB,Q;;;;;;;;;;;;;;;;;;gBAoC9B,uD;iBAAU,U;;;gBAEV,uD;iBAAU,a;;;gBACV,uD;iBAAU,K;;;gBACV;;;gBAmcA,0D;iBAAa,gB,EAAkB,CAAC,QAAD,C;;;;;;;;;;;;;;;;;;;;AEhgBpC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;ACEA;;AAAoF;AAAA;;AAAA;;AAAA;AAAA;;AAA+B;;AAAM;;;;;;;;AACzH;;AAAmF;AAAA;;AAAA;;AAAA;AAAA;;AAAoB;;AAAM;;;;;;;;AAC7G;;AAAwF;AAAA;;AAAA;;AAAA;AAAA;;AAAmB;;AAAO;;;;;;;;AAY9G;;AAEI;;AAAI;;AAAe;;AAAK;;AAAI;;AAA6D;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAAiD;;AAAM;;AAAS;;AACzJ;;;;;;AADI;;AAAA;;;;;;AAIZ;;AAAsD;;AAA2B;;;;;;AAhBjF;;AACI;;AAA2B;;AAC3B;;AACI;;AACA;;AACI;;AAAI;;AAAW;;AACf;;AACJ;;AACJ;;AACA;;AACA;;AAIJ;;AACA;;AACA;;AACA;;;;;;AAhBI;;AAAA;;AASI;;AAAA;;AAMyB;;AAAA;;;;QDVpB0K,kB;;;AAEX,kCAAoB1L,GAApB,EAA6CwB,UAA7C,EACQG,OADR,EACyCC,QADzC,EACoE;AAAA;;AADhD,aAAA5B,GAAA,GAAAA,GAAA;AAAyB,aAAAwB,UAAA,GAAAA,UAAA;AACrC,aAAAG,OAAA,GAAAA,OAAA;AAAiC,aAAAC,QAAA,GAAAA,QAAA;AAClC,aAAA+J,aAAA,GAAgB,KAAhB;AACA,aAAAC,aAAA,GAAgB,KAAhB;AAGA,aAAAC,YAAA,GAAwB,KAAxB;AALgE;;;;mCAO/D;AACN,cAAGpL,YAAY,CAACqL,OAAb,CAAqB,UAArB,KAAoCrL,YAAY,CAACqL,OAAb,CAAqB,UAArB,KAAoC,OAA3E,EAAmF;AACjF,iBAAKC,OAAL;AACD;AACF;;;kCAEa;AAAA;;AACZ,eAAKF,YAAL,GAAoB,KAApB;AACA,eAAK7L,GAAL,CAASgM,WAAT,GAAuBC,IAAvB,CACE,iEAAW,UAAA3L,GAAG,EAAI;AAChB,kBAAI,CAAC4L,QAAL,GAAgB5L,GAAhB;AACA,mBAAO,MAAI,CAACN,GAAL,CAASmM,eAAT,CAAyB7L,GAAG,CAAC8L,KAA7B,CAAP;AACD,WAHD,CADF,EAMDjM,SANC,CAMS,UAACG,GAAD,EAAS;AAClB,kBAAI,CAAC+L,QAAL,GAAgB/L,GAAhB;AACA,kBAAI,CAACqL,aAAL,GAAqB,IAArB;AACD,WATC,EAUF,UAAAW,KAAK,EAAI;AACP,kBAAI,CAACC,MAAL;AAED,WAbC;AAcD;;;iCAEY;AACX9L,sBAAY,CAAC+L,UAAb,CAAwB,UAAxB;AACA,eAAKb,aAAL,GAAqB,KAArB;AACD;;;6CAE2B;AAAA;;AAC1B,cAAMc,CAAC,GAAG7L,MAAM,CAAC8L,IAAP,CAAY,2FAAZ,EAAyG,QAAzG,CAAV;AACA,cAAMC,KAAK,GAAGC,WAAW,CAAC,YAAM;AACxB,gBAAIH,CAAC,CAACI,MAAN,EAAc;AACV,kBAAIpM,YAAY,CAACqL,OAAb,CAAqB,UAArB,MAAqC,OAAzC,EAAkD;AAChD,sBAAI,CAACF,aAAL,GAAqB,IAArB;AACAkB,6BAAa,CAACH,KAAD,CAAb;AACD,eAHD,MAGO;AACLG,6BAAa,CAACH,KAAD,CAAb;;AACA,sBAAI,CAACZ,OAAL;AACD;AACJ;AACJ,WAVoB,EAUlB,IAVkB,CAAzB;AAWD;;;+BAEagB,G,EAAaC,M,EAAc;AAAA;;AACvC,cAAIC,MAAM,GAAG,KAAKtL,OAAL,CAAasI,UAAb,CAAwBtJ,KAAxB,CAA8B,aAA9B,EAA6C,CAA7C,CAAb;AACA,cAAMuM,KAAK,GAAID,MAAM,CAACE,OAAP,CAAe,GAAf,MAAwB,CAAvC;AACAC,iBAAO,CAACC,GAAR,CAAYH,KAAZ;AACA,eAAKtL,QAAL,CAAciJ,WAAd,GACC7L,IADD,CACM,UAAA8L,MAAM,EAAI;AAChB,kBAAI,CAACtJ,UAAL,CAAgB8L,KAAhB;;AACA,gBAAIC,cAAc,aAAMN,MAAM,CAACO,OAAP,CAAe,GAAf,EAAoB,EAApB,EAAwBC,MAAxB,CAA+B,CAA/B,EAAkC,CAAlC,CAAN,cAA8C,MAAI,CAACvB,QAAL,CAAcE,KAA5D,CAAlB;;AACA,gBAAGc,KAAH,EAAS;AACPK,4BAAc,aAAMN,MAAM,CAACO,OAAP,CAAe,GAAf,EAAoB,EAApB,EAAwBC,MAAxB,CAA+B,CAA/B,EAAkC,CAAlC,CAAN,cAA8C,MAAI,CAACvB,QAAL,CAAcE,KAA5D,CAAd;AACD;;AACD,gBAAMsB,aAAa,GAAIC,MAAM,CAAC,sBAAD,EAAyBJ,cAAzB,CAAN,CAA+CK,OAA/C,EAAvB;;AACA,kBAAI,CAAC5N,GAAL,CAAS6N,OAAT,CAAiB,MAAI,CAAC3B,QAAL,CAAcE,KAA/B,EAAsCW,GAAtC,EAA2Cd,IAA3C,CACE,iEAAU,UAAA3L,GAAG,EAAI;AACf,kBAAG4M,KAAH,EAAU;AAAE,uBAAO,MAAI,CAAClN,GAAL,CAAS6N,OAAT,CAAiB,MAAI,CAAC3B,QAAL,CAAcE,KAA/B,EAAsC9L,GAAG,CAACwN,IAAJ,CAASC,MAAT,CAAgB,UAAAnK,IAAI;AAAA,yBAAIA,IAAI,CAACnE,IAAL,KAAc,QAAlB;AAAA,iBAApB,EAAgD,CAAhD,EAAmDsN,GAAzF,CAAP;AAAuG,eAAnH,MACI;AACF,uBAAO,MAAI,CAAC/M,GAAL,CAAS6N,OAAT,CAAiB,MAAI,CAAC3B,QAAL,CAAcE,KAA/B,EAAsC9L,GAAG,CAACwN,IAAJ,CAASC,MAAT,CAAgB,UAAAnK,IAAI;AAAA,yBAAIA,IAAI,CAACnE,IAAL,KAAc,OAAlB;AAAA,iBAApB,EAA+C,CAA/C,EAAkDsN,GAAxF,CAAP;AACD;AACF,aALD,CADF,EAQCd,IARD,CASE,iEAAU,UAAA3L,GAAG,EAAI;AACjB,qBAAO,MAAI,CAACN,GAAL,CAASgO,UAAT,CAAoB,MAAI,CAAC9B,QAAL,CAAcE,KAAlC,EAAyCsB,aAAzC,EAAwD,MAAI,CAAC9L,QAAL,CAAcqM,UAAd,CAAyBT,OAAzB,CAAiC,wBAAjC,EAA2D,EAA3D,CAAxD,EACHlN,GAAG,CAACwN,IAAJ,CAASC,MAAT,CAAgB,UAAAG,IAAI;AAAA,uBAAIA,IAAI,CAACzO,IAAL,KAAcwN,MAAlB;AAAA,eAApB,EAA8C,CAA9C,EAAiDF,GAD9C,EACmDC,MADnD,EAC2DC,MAD3D,CAAP;AAEC,aAHD,CATF,EAaE9M,SAbF,CAaY,UAAAG,GAAG,EAAI;AACjB,oBAAI,CAACuL,YAAL,GAAoB,IAApB;;AACA,oBAAI,CAACrK,UAAL,CAAgB2M,IAAhB;AACD,aAhBD;AAiBC,WAzBD;AA0BD;;;;;;;uBApFUzC,kB,EAAkB,wH,EAAA,iI,EAAA,yI,EAAA,2I;AAAA,K;;;YAAlBA,kB;AAAkB,qC;AAAA,c;AAAA,a;AAAA,inB;AAAA;AAAA;ACZ/B;;AAAI;;AAAkB;;AAEtB;;AACA;;AACA;;AAEA;;;;AAJQ;;AAAA;;AACA;;AAAA;;AACA;;AAAA;;AAEH;;AAAA;;;;;;;;;sEDMQA,kB,EAAkB;cAL9B,uDAK8B;eALpB;AACT5K,kBAAQ,EAAE,gBADD;AAETC,qBAAW,EAAE,6BAFJ;AAGTC,mBAAS,EAAE,CAAC,4BAAD;AAHF,S;AAKoB,Q;;;;;;;;;;;;;;;;;;;;;;;;;;;;AEZ/B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAOaoN,U;;;AAEX,0BAAoBC,IAApB,EAAsC;AAAA;;AAAlB,aAAAA,IAAA,GAAAA,IAAA;AAAqB;;;;qCAIvB;AAChB,eAAKC,cAAL,GAAsB,IAAI,gEAAJ,CAAgB;AACpC,4BAAiB,kBADmB;AAEpC,6BAAiB7N,YAAY,CAACqL,OAAb,CAAqB,UAArB;AAFmB,WAAhB,CAAtB;AAID;;;wCAEmB;AAClB,cAAM5G,GAAG,GAAG,0CAAZ;AACA,cAAI9E,MAAM,GAAG,IAAI,+DAAJ,GAAiBmO,GAAjB,CAAqB,WAArB,EAAkC,sBAAlC,CAAb;AACAnO,gBAAM,GAAGA,MAAM,CAACmO,GAAP,CAAW,OAAX,EAAoB,aAApB,CAAT;AACA,iBAAO,KAAKF,IAAL,CAAUG,GAAV,CAActJ,GAAd,EAAmB;AAAC9E,kBAAM,EAANA;AAAD,WAAnB,CAAP;AACD;;;uCAEqBjB,I,EAAY;AAChC,cAAM+F,GAAG,4GAAqG/F,IAArG,CAAT;AACA,iBAAO,KAAKkP,IAAL,CAAUG,GAAV,CAActJ,GAAd,CAAP;AACD;;;sCAEiB;AAChB,eAAKuJ,UAAL;AACA,cAAMvJ,GAAG,gCAAT;AACA,iBAAO,KAAKmJ,IAAL,CAAUG,GAAV,CAActJ,GAAd,EAAmB;AAACwJ,mBAAO,EAAE,KAAKJ;AAAf,WAAnB,CAAP;AACD;;;qCAEmBK,I,EAAY;AAC9B,eAAKF,UAAL;AACA,cAAMvJ,GAAG,0CAAmCyJ,IAAnC,WAAT;AACA,iBAAO,KAAKN,IAAL,CAAUG,GAAV,CAActJ,GAAd,EAAmB;AAACwJ,mBAAO,EAAE,KAAKJ;AAAf,WAAnB,CAAP;AACD;;;wCAEsBK,I,EAAY;AACjC,eAAKF,UAAL;AACA,cAAMvJ,GAAG,0CAAmCyJ,IAAnC,uBAAT;AACA,iBAAO,KAAKN,IAAL,CAAUG,GAAV,CAActJ,GAAd,EAAmB;AAACwJ,mBAAO,EAAE,KAAKJ;AAAf,WAAnB,CAAP;AACD;;;qCAEmBK,I,EAAcC,O,EAAe;AAC/C,eAAKH,UAAL;AACA,cAAMvJ,GAAG,0CAAmCyJ,IAAnC,uBAAT;AACA,iBAAO,KAAKN,IAAL,CAAUG,GAAV,CAActJ,GAAd,EAAmB;AAACwJ,mBAAO,EAAE,KAAKJ;AAAf,WAAnB,CAAP;AACD;;;gCAEcK,I,EAAc5B,G,EAAW;AACtC,eAAK0B,UAAL;AACA,cAAMvJ,GAAG,0CAAmCyJ,IAAnC,iCAA8D5B,GAA9D,CAAT;AACA,iBAAO,KAAKsB,IAAL,CAAUG,GAAV,CAActJ,GAAd,EAAmB;AAACwJ,mBAAO,EAAE,KAAKJ;AAAf,WAAnB,CAAP;AACD;;;mCAEiBK,I,EAAcC,O,EAAiBC,O,EAAiB9B,G,EAAaC,M,EAAgB8B,S,EAAmB;AAChH,eAAKL,UAAL;AACA,cAAMM,IAAI,GAAG;AACX,uBAAWH,OADA;AAEX,mBAAO7B,GAFI;AAGX,sBAAUC,MAHC;AAIX,uBAAW6B;AAJA,WAAb;AAMA,cAAIG,MAAM,GAAG,IAAI,gEAAJ,CAAgB;AAC3B,4BAAiB,kBADU;AAE3B,6BAAiBvO,YAAY,CAACqL,OAAb,CAAqB,UAArB;AAFU,WAAhB,CAAb;AAIA,cAAI5G,GAAG,0CAAmCyJ,IAAnC,sCAAmEG,SAAnE,CAAP;;AACA,cAAGA,SAAS,CAAC3B,OAAV,CAAkB,GAAlB,MAA2B,CAA9B,EAAgC;AAC9BjI,eAAG,0CAAmCyJ,IAAnC,uCAAoEG,SAApE,CAAH;AACD;;AACD,iBAAO,KAAKT,IAAL,CAAUY,GAAV,CAAc/J,GAAd,EAAmB6J,IAAnB,EAAyB;AAACL,mBAAO,EAAEM;AAAV,WAAzB,CAAP;AACD;;;;;;;uBAxEUZ,U,EAAU,uH;AAAA,K;;;aAAVA,U;AAAU,eAAVA,UAAU,K;AAAA,kBAFT;;;;;sEAEDA,U,EAAU;cAHtB,wDAGsB;eAHX;AACVc,oBAAU,EAAE;AADF,S;AAGW,Q;;;;;;;;;;;;;;;;;;;;;;ACPvB;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QASaC,Y;;;AAEX,4BAAoBnP,GAApB,EAA6CD,KAA7C,EAAoE;AAAA;;AAAhD,aAAAC,GAAA,GAAAA,GAAA;AAAyB,aAAAD,KAAA,GAAAA,KAAA;AAA0B;;;;mCAE/D;AACN,eAAKC,GAAL,CAASK,cAAT,CAAwB,KAAKN,KAAL,CAAWqP,QAAX,CAAoBC,aAApB,CAAkCb,GAAlC,CAAsC,MAAtC,CAAxB,EAAuErO,SAAvE,CAAkF,UAAAG,GAAG,EAAI;AACvF,gBAAI,CAACA,GAAG,CAACC,QAAJ,GAAeC,QAAf,CAAwB,OAAxB,CAAL,EAAuC;AACrCC,0BAAY,CAACC,OAAb,CAAqB,UAArB,EAAiC,YAAYJ,GAAG,CAACC,QAAJ,GAAeI,KAAf,CAAqB,kBAArB,EAAyC,CAAzC,CAA7C;AACAC,oBAAM,CAACC,KAAP;AACD,aAHD,MAGO;AACLJ,0BAAY,CAACC,OAAb,CAAqB,UAArB,EAAiC,OAAjC;AACD;AACF,WAPD;AAQD;;;;;;;uBAbUyO,Y,EAAY,wH,EAAA,+H;AAAA,K;;;YAAZA,Y;AAAY,8B;AAAA,c;AAAA,a;AAAA,0D;AAAA;;;;;sEAAZA,Y,EAAY;cALxB,uDAKwB;eALd;AACTrO,kBAAQ,EAAE,SADD;AAETC,qBAAW,EAAE,sBAFJ;AAGTC,mBAAS,EAAE,CAAC,qBAAD;AAHF,S;AAKc,Q;;;;;;;;;;;;;;;;;;;;;;;;ACTzB;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;QAWasO,sB;;;AAIX,sCAAoB3N,OAApB,EAAqDD,cAArD,EAAqF;AAAA;;AAAjE,aAAAC,OAAA,GAAAA,OAAA;AAAiC,aAAAD,cAAA,GAAAA,cAAA;AAAmC;;;;mCAEhF,CACP;;;0CAEc;AAAA;;AACb,eAAKA,cAAL,CAAoBxB,WAApB,CAAgCC,SAAhC,CAA0C,UAAAC,MAAM,EAAI;AAClD,gBAAIA,MAAM,CAACqJ,WAAX,EAAwB;AACtB,oBAAI,CAAC8F,gBAAL,CAAsBnP,MAAM,CAACqJ,WAA7B;AACD,aAFD,MAEO;AACL,oBAAI,CAAC8F,gBAAL,CAAsB,yEAAYC,kBAAlC;AACD;;AACDC,sBAAU,CAAC,YAAM;AACf,kBAAIrP,MAAM,CAACsP,QAAX,EAAqB;AACnB,oBAAItP,MAAM,CAACsP,QAAP,KAAoB,MAAxB,EAAgC;AAC9B,wBAAI,CAACA,QAAL;AACD,iBAFD,MAEO;AACL,wBAAI,CAACA,QAAL,CAActP,MAAM,CAACsP,QAArB;AACD;AACF;AACF,aARS,CAAV;AAUD,WAhBD;AAiBD;;;iCACexK,G,EAAY;AAC1B,cAAI,CAACA,GAAL,EAAU;AACRA,eAAG,GAAG,KAAKA,GAAL,CAAS9B,aAAT,CAAuBoG,KAAvB,CAA6BgE,OAA7B,CAAqC,yEAAYmC,kBAAjD,EAAqE,yEAAYC,iBAAjF,CAAN;AACD;;AACD,eAAKjO,OAAL,CAAakO,UAAb,CAAwB3K,GAAxB;AACD;;;kCAEa;AACZ,eAAKwK,QAAL,CAAc/B,MAAM,CAAC,gBAAD,CAAN,CAAyBC,OAAzB,GAAmCJ,OAAnC,CAA2C,MAA3C,EAAmD,OAAnD,EAA4DA,OAA5D,CAAoE,WAApE,EAAiF,EAAjF,EACXA,OADW,CACH,oBADG,EACmB,mCADnB,EACwDA,OADxD,CACgE,OADhE,EACyE,EADzE,CAAd;AAED;;;sCAEiB;AAChB,eAAK7L,OAAL,CAAamO,WAAb,CAAyB,KAAK5K,GAAL,CAAS9B,aAAT,CAAuBoG,KAAhD;AACD;;;yCAEuBuG,M,EAAe;AACrC,cAAI,CAAC,CAAC,GAAD,EAAM,GAAN,EAAWvP,QAAX,CAAoB,KAAKwP,GAAL,CAAS5M,aAAT,CAAuBoG,KAAvB,CAA6ByG,KAA7B,CAAmC,CAAC,CAApC,CAApB,CAAL,EAAkE;AAChE,gBAAIC,IAAI,GAAG,KAAKF,GAAL,CAAS5M,aAAT,CAAuBoG,KAAvB,CAA6BG,QAA7B,CAAsC,CAAtC,EAAyC,GAAzC,CAAX;;AACA,gBAAIoG,MAAJ,EAAY;AACVG,kBAAI,GAAGH,MAAM,CAACpG,QAAP,CAAgB,CAAhB,EAAmB,GAAnB,CAAP;AACA,mBAAKqG,GAAL,CAAS5M,aAAT,CAAuBoG,KAAvB,GAA+B0G,IAA/B;AACD;;AACD,gBAAI,mDAAG,CAACnC,MAAJ,CAAW,UAAAoC,OAAO;AAAA,qBAAIA,OAAO,CAAC5Q,EAAR,KAAe2Q,IAAnB;AAAA,aAAlB,EAA2CnI,MAA3C,GAAoD,CAAxD,EAA2D;AACzD,kBAAI7C,GAAG,aAAM,yEAAYkL,cAAlB,SAAmC,mDAAG,CAACC,IAAJ,CAAS,UAAA3K,GAAG;AAAA,uBAAIA,GAAG,CAACnG,EAAJ,KAAW2Q,IAAf;AAAA,eAAZ,EAAiCI,GAApE,CAAP;AACA,mBAAKpL,GAAL,CAAS9B,aAAT,CAAuBoG,KAAvB,GAA+BtE,GAA/B;AACA,mBAAKvD,OAAL,CAAamO,WAAb,CAAyB5K,GAAzB;AACD,aAJD,MAKK;AACHqL,mBAAK,iBAAUL,IAAV,sBAAL;AACD;AACF,WAdD,MAcO;AACL,gBAAIA,KAAI,GAAG,KAAKF,GAAL,CAAS5M,aAAT,CAAuBoG,KAAvB,CAA6BG,QAA7B,CAAsC,CAAtC,EAAyC,GAAzC,CAAX;;AACA,gBAAIoG,MAAJ,EAAY;AACVG,mBAAI,GAAGH,MAAM,CAACpG,QAAP,CAAgB,CAAhB,EAAmB,GAAnB,CAAP;AACA,mBAAKqG,GAAL,CAAS5M,aAAT,CAAuBoG,KAAvB,GAA+B0G,KAA/B;AACD;;AACD,gBAAI,mDAAG,CAACnC,MAAJ,CAAW,UAAAoC,OAAO;AAAA,qBAAIA,OAAO,CAAC5Q,EAAR,KAAe2Q,KAAnB;AAAA,aAAlB,EAA2CnI,MAA3C,GAAoD,CAAxD,EAA2D;AACzD,kBAAI7C,IAAG,aAAM,yEAAYsL,eAAlB,SAAoC,mDAAG,CAACH,IAAJ,CAAS,UAAA3K,GAAG;AAAA,uBAAIA,GAAG,CAACnG,EAAJ,KAAW2Q,KAAf;AAAA,eAAZ,EAAiCI,GAArE,CAAP;;AACA,mBAAKpL,GAAL,CAAS9B,aAAT,CAAuBoG,KAAvB,GAA+BtE,IAA/B;AACA,mBAAKvD,OAAL,CAAamO,WAAb,CAAyB5K,IAAzB;AACD,aAJD,MAKK;AACHqL,mBAAK,iBAAUL,KAAV,sBAAL;AACD;AACF;AACF;;;;;;;uBA1EUZ,sB,EAAsB,yI,EAAA,+H;AAAA,K;;;YAAtBA,sB;AAAsB,yC;AAAA;AAAA;;;;;;;;;;;;;;;;;;ACXnC;;AACI;;AACI;;AACI;;AAAiD;;AAAS;;AAC9D;;AACA;;AACI;AAAA,mBAAS,IAAAmB,WAAA,EAAT;AAAsB,WAAtB;;AADJ;;AAGJ;;AAEA;;AACI;;AACI;;AAAiD;;AAAY;;AACjE;;AACA;;AACA;;AAA0C;AAAA,mBAAS,IAAAlB,gBAAA,EAAT;AAA2B,WAA3B;;AAA6B;;AAAE;;AAC7E;;AACA;;AAA2D;AAAA,mBAAS,IAAAG,QAAA,EAAT;AAAmB,WAAnB;;AAAqB;;AAAkB;;AAClG;;AAAI;;AAAG;AAAA,mBAAS,IAAAgB,OAAA,EAAT;AAAkB,WAAlB;;AAAoB;;AAAO;;AAAQ;;AAAQ;;AACtD;;;;;;;;sEDRapB,sB,EAAsB;cALlC,uDAKkC;eALxB;AACTxO,kBAAQ,EAAE,oBADD;AAETC,qBAAW,EAAE,iCAFJ;AAGTC,mBAAS,EAAE,CAAC,gCAAD;AAHF,S;AAKwB,Q;;;;;;;;gBAChC,uD;iBAAU,K;;;gBACV,uD;iBAAU,a;;;;;;;;;;;;;;;;;;;;AEbb;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;ACoCwB;;AAEC;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;AAAA,iBAA6B,YAA7B;AAA2C,SAA3C;;AACA;;AAAc;;;;;;AAFd;;AAEA;;AAAA;;;;;;;;AAML;;AAAG;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AACoB;;;;;;;;AAAI;;AAAG;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AACiB;;;;;;;;;;;;;;;;AAlBvD;;AACI;;AAAI;;AAAe;;AACnB;;AAAI;;AACA;;AAEC;;AAAiC;;AAClC;;AACI;;AAIJ;;AACJ;;AACA;;AACA;;AAAI;;AAA0B;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAAgD;;AAAI;;AAClF;;AAAI;;AAA4B;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAAmD;;AAAI;;AACvF;;AAAI;;AAC2B;;AACwB;;AACvD;;AAAI;;AAAuB;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAAiD;;AAC5E;;AACJ;;;;;;;;AApBQ;;AAAA;;AACuC;;AAAA;;AAErC;;AAAA;;AACD;;AAAA;;AAEW;;AAAA;;AASqB;;AAAA;;AAC2B;;AAAA;;;;;;AA7B5E;;AACI;;AACI;;AACI;;AAAgB;;AAAK;;AACrB;;AAAgB;;AAAI;;AACpB;;AAAgB;;AAAM;;AACtB;;AAAgB;;AAAS;;AACzB;;AAAgB;;AAAgB;;AAChC;;AAAgB;;AAAM;;AAC1B;;AACJ;;AACA;;AACI;;AAsBJ;;AACJ;;;;;;AAvBY;;AAAA;;;;;;AAwBZ;;AAA8C;;AAAa;;;;QD1ClD2P,e;;;AAEX,+BAAoBhP,OAApB,EAA6C;AAAA;;AAAzB,aAAAA,OAAA,GAAAA,OAAA;AAA4B;;;;mCAExC;AAAA;;AACN,eAAKA,OAAL,CAAaiP,SAAb,GAAyBzQ,SAAzB,CAAmC,UAAA0Q,MAAM,EAAI;AAC3C,mBAAI,CAACA,MAAL,GAAcA,MAAM,CAACC,OAAP,EAAd;AACD,WAFD;AAGD;;;8BAEYzG,C,EAAS;AACpB,eAAK1I,OAAL,CAAaoP,WAAb,CAAyB,IAAI,gEAAJ,CAAgB;AAACnL,iBAAK,EAAEyE,CAAR;AAAW1E,gBAAI,EAAE;AAAjB,WAAhB,CAAzB;AACD;;;iCAEe0E,C,EAAS;AACvB,eAAK1I,OAAL,CAAaoP,WAAb,CAAyB,IAAI,gEAAJ,CAAgB;AAACnL,iBAAK,EAAEyE,CAAR;AAAW1E,gBAAI,EAAE;AAAjB,WAAhB,CAAzB;AACD;;;gCAEa0E,C,EAAS;AACrB,cAAG,KAAKwG,MAAL,CAAY9I,MAAZ,KAAuB,CAA1B,EAA4B;AAC1B,iBAAK8I,MAAL,GAAcG,SAAd;AACD;;AACD,eAAKrP,OAAL,CAAaoP,WAAb,CAAyB,IAAI,gEAAJ,CAAgB;AAACnL,iBAAK,EAAEyE,CAAR;AAAW1E,gBAAI,EAAE;AAAjB,WAAhB,CAAzB;AACD;;;+BAEa0E,C,EAAS;AACrB,eAAK1I,OAAL,CAAaoP,WAAb,CAAyB,IAAI,gEAAJ,CAAgB;AAACnL,iBAAK,EAAEyE,CAAR;AAAW1E,gBAAI,EAAE;AAAjB,WAAhB,CAAzB;AACD;;;oCAEe;AACd,eAAKhE,OAAL,CAAaoP,WAAb,CAAyB,IAAI,gEAAJ,CAAgB;AAACnL,iBAAK,EAAE,CAAR;AAAWD,gBAAI,EAAE;AAAjB,WAAhB,CAAzB;AACD;;;wCAEmB;AAClB,eAAKhE,OAAL,CAAaoP,WAAb,CAAyB,IAAI,gEAAJ,CAAgB;AAACnL,iBAAK,EAAEqL,QAAQ,CAAC,KAAKC,WAAL,CAAiB9N,aAAjB,CAA+BoG,KAAhC,CAAhB;AAAwD7D,gBAAI,EAAE;AAA9D,WAAhB,CAAzB;AACD;;;oCAEe;AACd,eAAKhE,OAAL,CAAaoP,WAAb,CAAyB,IAAI,gEAAJ,CAAgB;AAACnL,iBAAK,EAAE,CAAR;AAAWD,gBAAI,EAAE;AAAjB,WAAhB,CAAzB;AACD;;;qCAEmBwL,U,EAAkB;AACpC,cAAIA,UAAU,KAAK,cAAnB,EAAmC;AACjC,mBAAO;AAACC,kBAAI,EAAC,eAAN;AAAuBlP,mBAAK,EAAE;AAA9B,aAAP;AACD;;AACD,iBAAO,yEAAYoE,MAAZ,CAAmByH,MAAnB,CAA0B,UAAA7L,KAAK;AAAA,mBAAIA,KAAK,CAACA,KAAN,IAAeiP,UAAnB;AAAA,WAA/B,EAA8D,CAA9D,CAAP;AACD;;;yCAEuB/H,E,EAAW;AACjC,cAAInG,OAAO,GAAGgO,QAAQ,CAAC,KAAKC,WAAL,CAAiB9N,aAAjB,CAA+BoG,KAAhC,CAAtB;;AACA,cAAIJ,EAAJ,EAAQ;AACJnG,mBAAO,GAAGoG,IAAI,CAACC,GAAL,CAASrG,OAAO,GAAG,EAAnB,EAAuB,GAAvB,CAAV;AACH,WAFD,MAEO;AACHA,mBAAO,GAAGoG,IAAI,CAACE,GAAL,CAAStG,OAAO,GAAG,EAAnB,EAAuB,CAAvB,CAAV;AACH;;AACD,eAAKiO,WAAL,CAAiB9N,aAAjB,CAA+BoG,KAA/B,GAAuCvG,OAAvC;AACA,eAAKoO,aAAL;AACD;;;iCAEe5G,K,EAAc7E,K,EAAe;AAC3C,eAAKiL,MAAL,CAAYS,OAAZ,CAAoB,UAAArS,CAAC,EAAI;AAAC,gBAAGA,CAAC,CAAC2G,KAAF,KAAY6E,KAAK,CAAC7E,KAArB,EAA2B3G,CAAC,CAACsS,MAAF,CAAS3L,KAAT;AAAgB,WAArE;AACA,eAAKjE,OAAL,CAAaoP,WAAb,CAAyB,IAAI,gEAAJ,CAAgBtG,KAAhB,CAAzB;AACD;;;4CAGmBQ,K,EAAsB;AACtC,cAAIA,KAAK,CAAC9L,IAAN,KAAe,SAAnB,EAA8B;AAAE,iBAAKqS,gBAAL,CAAsB,IAAtB;AAA8B;;AAC9D,cAAIvG,KAAK,CAAC9L,IAAN,KAAe,WAAnB,EAAgC;AAAE,iBAAKqS,gBAAL,CAAsB,KAAtB;AAA+B;;AACjE,cAAIvG,KAAK,CAAC9L,IAAN,KAAe,OAAnB,EAA4B;AAAE,iBAAKiH,SAAL;AAAmB;AAEpD;;;;;;;uBAtEUuK,e,EAAe,yI;AAAA,K;;;YAAfA,e;AAAe,iC;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;ACX5B;;AACI;;AACI;;AACI;;AACI;;AACI;;AAAiD;;AAAY;;AACjE;;AACA;;AAAwE;AAAA,mBAAS,IAAAU,aAAA,EAAT;AAAwB,WAAxB;;AAAxE;;AAEJ;;AACJ;;AACA;;AAA2C;;AAAsB;AAAA,mBAAS,IAAAI,SAAA,EAAT;AAAoB,WAApB;;AAAqD;;AACpG;;AAClB;;AAEJ;;AAEA;;AAoCA;;AACJ;;;;AArCkD;;AAAA;;AAoChB;;AAAA;;;;;;;;;sED1CrBd,e,EAAe;cAL3B,uDAK2B;eALjB;AACT7P,kBAAQ,EAAE,YADD;AAETC,qBAAW,EAAE,yBAFJ;AAGTC,mBAAS,EAAE,CAAC,wBAAD;AAHF,S;AAKiB,Q;;;;;;gBAGzB,uD;iBAAU,S;;;gBA6DV,0D;iBAAa,gB,EAAkB,CAAC,QAAD,C;;;;;;;;;;;;;;;;;;;;AE3ElC;AAAA;;;AAAA;AAAA;AAAA;;QAAa0Q,W,GACT,qBAAY9N,IAAZ,EAAuBuC,UAAvB,EAA0C;AAAA;;AACtC,WAAKR,IAAL,GAAY/B,IAAI,CAAC+B,IAAjB;AACA,WAAKC,KAAL,GAAahC,IAAI,CAACgC,KAAlB;AACA,UAAGO,UAAH,EACA,KAAKA,UAAL,GAAkBA,UAAlB;AACH,K;;;;;;;;;;;;;;;;;ACNL;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAEawL,K;;;AACT,qBAAY/N,IAAZ,EAAqB;AAAA;;AAAA;;AACjB,aAAK+B,IAAL,GAAY/B,IAAI,CAAC+B,IAAjB;AACA,aAAKC,KAAL,GAAahC,IAAI,CAACgC,KAAlB;AACA,aAAKgM,UAAL,GAAkB,KAAlB;;AACA,YAAGhO,IAAI,CAACgO,UAAL,KAAoB,SAAvB,EAAkC;AAC9B,eAAKA,UAAL,GAAkB,IAAlB;AACH;;AACD,YAAI,KAAKjM,IAAL,KAAc,cAAlB,EAAkC;AAC9B,eAAKW,MAAL,GAAc,EAAd;AACH,SAFD,MAEO;AACH,eAAKA,MAAL,GAAc,yEAAYA,MAAZ,CAAmByH,MAAnB,CAA0B,UAAA8D,IAAI;AAAA,mBAAIA,IAAI,CAAC3P,KAAL,IAAc,OAAI,CAACyD,IAAvB;AAAA,WAA9B,CAAd;AACH;AACJ;;;;+BAKaC,K,EAAa;AAAA;;AACvB,eAAKD,IAAL,GAAY,KAAKW,MAAL,CAAYV,KAAZ,EAAmB1D,KAA/B;AACA,eAAKoE,MAAL,GAAc,yEAAYA,MAAZ,CAAmByH,MAAnB,CAA0B,UAAA8D,IAAI;AAAA,mBAAIA,IAAI,CAAC3P,KAAL,IAAc,OAAI,CAACyD,IAAvB;AAAA,WAA9B,CAAd;AACH;;;;;;;;;;;;;;;;;;;;;ACvBL;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;ACGQ;;AACI;;AACI;;AACJ;;AACA;;AACI;;AAAoD;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAA4B;;AAAM;;AACtF;;AAAmD;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAA2B;;AAAM;;AACxF;;AACJ;;;;;;AANQ;;AAAA;;;;;;AAJhB;;AACI;;AACI;;AASJ;;AACJ;;;;;;AAVY;;AAAA;;;;QDMCmM,0B;;;AAEX,0CAAoBnQ,OAApB,EAA6C;AAAA;;AAAzB,aAAAA,OAAA,GAAAA,OAAA;AAA4B;;;;mCAExC;AACN,cAAI0I,CAAC,GAAG,KAAK0H,oBAAL,EAAR;;AACA,cAAI1H,CAAC,IAAI,EAAT,EAAa;AACXkG,iBAAK,8BAAuBlG,CAAC,GAAG,CAA3B,gIAAL;AACD;AACF;;;+BAEU;AACT,eAAK1I,OAAL,CAAaoP,WAAb,CAAyB,IAAI,gEAAJ,CAAgB;AAACnL,iBAAK,EAAE,CAAR;AAAWD,gBAAI,EAAE;AAAjB,WAAhB,CAAzB;AACA,eAAKoM,oBAAL;AACD;;;+CAE0B;AACzB,eAAKC,aAAL,GAAqB,EAArB;AACA,cAAMvO,OAAO,GAAGC,MAAM,CAACC,OAAP,CAAelD,YAAf,CAAhB;AACA,cAAI4J,CAAC,GAAG,CAAR;;AACA,wCAAmB5G,OAAnB,iCAA4B;AAAvB,gBAAMG,IAAI,iBAAV;;AACH,gBAAI,CAACA,IAAI,CAAC,CAAD,CAAJ,CAAQpD,QAAR,CAAiB,UAAjB,CAAL,EAAmC;AACjC,kBAAMjB,EAAE,GAAGqE,IAAI,CAAC,CAAD,CAAJ,CAAQjD,KAAR,CAAc,mBAAd,EAAmC,CAAnC,EAAsCkD,SAAtC,CAAgD,CAAhD,EAAmD,CAAnD,CAAX;AACA,mBAAKmO,aAAL,CAAmBlO,IAAnB,CAAwB;AAAEvE,kBAAE,EAAEA,EAAN;AAAU8I,oBAAI,EAAEzE,IAAI,CAAC,CAAD,CAApB;AAAyBqO,mBAAG,EAAErO,IAAI,CAAC,CAAD;AAAlC,eAAxB;AACD;;AACDyG,aAAC;AACF;;AACD,eAAK2H,aAAL,CAAmBE,IAAnB,CAAwB,UAACC,CAAD,EAAIC,CAAJ;AAAA,mBAAWD,CAAC,CAAC5S,EAAF,GAAO6S,CAAC,CAAC7S,EAAV,GAAgB,CAAhB,GAAoB,CAAC,CAA/B;AAAA,WAAxB;AACA,iBAAO8K,CAAP;AACD;;;+BACalE,U,EAAkB;AAC9B,eAAKxE,OAAL,CAAa0Q,MAAb,CAAoBlM,UAApB;AACD;;;gCAEa8L,G,EAAW;AACvBxR,sBAAY,CAAC+L,UAAb,CAAwByF,GAAxB;AACA,eAAKF,oBAAL;AACD;;;;;;;uBArCUD,0B,EAA0B,yI;AAAA,K;;;YAA1BA,0B;AAA0B,8C;AAAA,c;AAAA,a;AAAA,kS;AAAA;AAAA;ACTvC;;AAAI;;AAAmB;;AACvB;;AAaA;;AAAI;;AAAgB;;AAAoD;AAAA,mBAAS,IAAAQ,IAAA,EAAT;AAAe,WAAf;;AAAiB;;AAAI;;AAAS;;;;AAb/C;;AAAA;;;;;;;;;sEDQ1CR,0B,EAA0B;cALtC,uDAKsC;eAL5B;AACThR,kBAAQ,EAAE,yBADD;AAETC,qBAAW,EAAE,sCAFJ;AAGTC,mBAAS,EAAE,CAAC,qCAAD;AAHF,S;AAK4B,Q;;;;;;;;;;;;;;;;;;;;;;AETvC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;;QAKauR,iB;;;AACX,mCAAc;AAAA;AAAG;;;;+BAEHhT,E,EAAU;AACtB,iBAAO,mDAAG,CAAC8Q,IAAJ,CAAS,UAAA3K,GAAG;AAAA,mBAAIA,GAAG,CAACnG,EAAJ,KAAWA,EAAf;AAAA,WAAZ,EAA+B+Q,GAAtC;AACD;;;;;;;uBALUiC,iB;AAAiB,K;;;aAAjBA,iB;AAAiB,eAAjBA,iBAAiB,K;AAAA,kBAFhB;;;;;sEAEDA,iB,EAAiB;cAH7B,wDAG6B;eAHlB;AACVrD,oBAAU,EAAE;AADF,S;AAGkB,Q;;;;;;;;;;;;;;;;;;;;ACL9B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAUasD,c;;;AA8BX,gCAAc;AAAA;;AA7BP,aAAAxK,YAAA,GAAsB,yEAAY1B,MAAZ,CAAmB,CAAnB,CAAtB;AACA,aAAAmM,OAAA,GAA2B,IAAI,4CAAJ,EAA3B;AACA,aAAAC,QAAA,GAA4B,IAAI,4CAAJ,EAA5B;AACA,aAAA7B,MAAA,GAA2B,IAAI,4CAAJ,EAA3B;AACA,aAAA8B,WAAA,GAAoC,IAAI,4CAAJ,EAApC;AAGA,aAAA1I,UAAA,GAAqB,yEAAY2I,YAAjC,CAsBO,CAlBd;;AACO,aAAAC,kBAAA,GAAqB;AAC1B,kBAAQ;AACNjO,iBAAK,EAAE,IADD;AAENC,kBAAM,EAAE,GAFF;AAGNE,uBAAW,EAAE,IAHP;AAIND,wBAAY,EAAE;AAJR,WADkB;AAO1B,mBAAS;AACPF,iBAAK,EAAE,IADA;AAEPC,kBAAM,EAAE,IAFD;AAGPE,uBAAW,EAAE,IAHN;AAIPD,wBAAY,EAAE;AAJP;AAPiB,SAArB;AAeA,aAAAgO,MAAA,GAAS,MAAT;AAGN;;;;iCACelN,K,EAAa;AAC3B,eAAKoC,YAAL,GAAoB,yEAAY1B,MAAZ,CAAmBV,KAAnB,CAApB;AACD;;;oCAEkBzC,Q,EAAa;AAC9B,eAAKA,QAAL,GAAgBA,QAAhB;AACD;;;2CAEsB;AACrB,cAAI4P,gBAAgB,CAAC,KAAK7E,IAAL,CAAUtH,GAAV,CAAcpD,QAAd,CAAuB,CAAvB,CAAD,CAAhB,CAA4CwP,cAA5C,KAA+D,WAAnE,EAAgF;AAC9E,iBAAK9E,IAAL,CAAUtH,GAAV,CAAcpD,QAAd,CAAuB,CAAvB,EAA0B4B,KAA1B,CAAgC4N,cAAhC,GAAiD,MAAjD;AACD,WAFD,MAEO;AACL,iBAAK9E,IAAL,CAAUtH,GAAV,CAAcpD,QAAd,CAAuB,CAAvB,EAA0B4B,KAA1B,CAAgC4N,cAAhC,GAAiD,WAAjD;AACD;AACF;;;wCAEmB;AAClB,cAAID,gBAAgB,CAAC,KAAK7E,IAAL,CAAUtH,GAAV,CAAcpD,QAAd,CAAuB,CAAvB,CAAD,CAAhB,CAA4CwP,cAA5C,KAA+D,WAAnE,EAAgF;AAC9E,mBAAO,IAAP;AACD;;AACC,iBAAO,KAAP;AACH;;;mCAEc;AACb,iBAAO,KAAKhL,YAAZ;AACD;;;oCAEkB9C,G,EAAW;AAC5B,cAAI4N,MAAM,GAAG5N,GAAG,CAACvE,KAAJ,CAAU,4BAAV,EAAwC,CAAxC,EAA2CsS,KAA3C,CAAiD,GAAjD,EAAsD,CAAtD,CAAb;AACA,eAAKC,aAAL,CAAmBJ,MAAnB;;AACA,cAAI,KAAK5E,IAAL,IAAa,KAAKA,IAAL,CAAUtH,GAAV,CAAcpD,QAAd,CAAuB,CAAvB,EAA0BA,QAA1B,CAAmCuE,MAAnC,GAA4C,CAA7D,EAAgE;AAC9D,iBAAKgJ,WAAL,CAAiB,IAAI,gEAAJ,CAAgB;AAAEnL,mBAAK,EAAE,CAAT;AAAYD,kBAAI,EAAE;AAAlB,aAAhB,CAAjB;AACA,iBAAKsE,UAAL,GAAkB/E,GAAlB;AACA,iBAAKwN,QAAL,CAAcS,IAAd,CAAmBjO,GAAnB;AACD,WAJD,MAIO;AACL,iBAAK+E,UAAL,GAAkB/E,GAAlB;AACA,iBAAKwN,QAAL,CAAcS,IAAd,CAAmBjO,GAAnB;AACD;AACF;;;sCAEoB4N,M,EAAc;AACjC,eAAKA,MAAL,GAAcA,MAAd;AACD;;;wCAEmB;AAClB,iBAAO,KAAKD,kBAAL,CAAwB,KAAKC,MAA7B,CAAP;AACD;;;sCAEiB;AAChB,iBAAO,KAAKJ,QAAZ;AACD;;;6CAEwB;AACvB,iBAAO,KAAKzI,UAAZ;AACD;;;mCAEiB/E,G,EAAW;AAC3B,eAAKkO,cAAL,GAAsBlO,GAAtB;AACA,eAAKuN,OAAL,CAAaU,IAAb,CAAkBjO,GAAlB;AACA,eAAKwB,UAAL,CAAgB,KAAKwH,IAArB;AACD;;;qCAEgB;AACf,iBAAO,KAAKuE,OAAZ;AACD;;;mCAEiBvE,I,EAAI;AACpB,eAAKA,IAAL,GAAYA,IAAZ;AACA,cAAI2C,MAAM,GAAY,EAAtB;AACA,cAAIxG,CAAC,GAAG,CAAR;;AACA,cAAI6D,IAAI,CAACtH,GAAL,CAASpD,QAAT,CAAkB,CAAlB,EAAqBA,QAArB,CAA8BuE,MAA9B,GAAuC,CAA3C,EAA8C;AAC5CmG,gBAAI,CAACtH,GAAL,CAASpD,QAAT,CAAkB,CAAlB,EAAqBA,QAArB,CAA8B8N,OAA9B,CAAsC,UAAAnB,OAAO,EAAI;AAC/C,kBAAIA,OAAO,CAACzF,SAAR,CAAkB,CAAlB,MAAyB,cAA7B,EAA6C;AAC3C,oBAAMxI,KAAK,GAAGiO,OAAO,CAAC5F,YAAR,CAAqB,OAArB,CAAd;AACAsG,sBAAM,CAAC/M,IAAP,CAAY,IAAI,mDAAJ,CAAU;AAAE6B,sBAAI,EAAEzD,KAAR;AAAe0D,uBAAK,EAAEyE,CAAC,CAAC9J,QAAF,EAAtB;AAAoCqR,4BAAU,EAAEzB,OAAO,CAACkD,UAAR,CAAmBzB,UAAnB,CAA8BpI;AAA9E,iBAAV,CAAZ;AACD;;AACDa,eAAC;AACF,aAND;AAOA,iBAAKwG,MAAL,CAAYsC,IAAZ,CAAiBtC,MAAjB;AACD;AACF;;;qCAEgB;AACf,cAAI,KAAK3C,IAAL,CAAUtH,GAAV,CAAcpD,QAAd,CAAuB,CAAvB,EAA0BA,QAA1B,CAAmCuE,MAAnC,GAA4C,CAAhD,EAAmD;AAAA;AAAA;AAAA;;AAAA;AACjD,oCAAoB,KAAKmG,IAAL,CAAUtH,GAAV,CAAcpD,QAAd,CAAuB,CAAvB,EAA0BA,QAA9C,mIAAwD;AAAA,oBAA/C2M,OAA+C;;AACtD,oBAAIA,OAAO,CAACzF,SAAR,CAAkB,CAAlB,MAAyB,cAA7B,EAA6C;AAC3C,yBAAO,IAAP;AACD;AACF;AALgD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMlD;;AACD,iBAAO,KAAP;AACD;;;wCAEmB;AAClB,cAAI,KAAKwD,IAAL,CAAUtH,GAAV,CAAcpD,QAAd,CAAuB,CAAvB,EAA0BA,QAA1B,CAAmCuE,MAAnC,GAA4C,CAAhD,EAAmD;AAAA;AAAA;AAAA;;AAAA;AACjD,oCAAoB,KAAKmG,IAAL,CAAUtH,GAAV,CAAcpD,QAAd,CAAuB,CAAvB,EAA0BA,QAA9C,mIAAwD;AAAA,oBAA/C2M,OAA+C;;AACtD,oBAAIA,OAAO,CAACzF,SAAR,CAAkB,CAAlB,MAAyB,cAA7B,EAA6C;AAC3C,yBAAOyF,OAAO,CAAC3M,QAAR,CAAiB,CAAjB,EAAoB8P,IAApB,CAAyB1K,OAAhC;AACD;AACF;AALgD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMlD;AACF;;;kCAEgBiI,M,EAAe;AAC9B,eAAKA,MAAL,CAAYsC,IAAZ,CAAiBtC,MAAjB;AACD;;;oCAEe;AACd,iBAAO,KAAKA,MAAZ;AACD;;;oCAEkB0C,M,EAAmB;AACpC,cAAIA,MAAM,CAAC5N,IAAP,KAAgB,SAApB,EAA+B;AAC7B,iBAAK6N,cAAL,GAAsBD,MAAM,CAAC3N,KAAP,GAAe,GAArC;AACD;;AACD,eAAK+M,WAAL,CAAiBQ,IAAjB,CAAsBI,MAAtB;AACD;;;+BAEapN,U,EAAkB;AAC9B,cAAItH,GAAG,GAAG,IAAI,gEAAJ,CAAgB;AAAE8G,gBAAI,EAAE,QAAR;AAAkBC,iBAAK,EAAE;AAAzB,WAAhB,EAA8CO,UAA9C,CAAV;AACA,eAAKwM,WAAL,CAAiBQ,IAAjB,CAAsBtU,GAAtB;AACD;;;yCAEoB;AACnB,iBAAO,KAAK8T,WAAZ;AACD;;;;;;;uBA7JUH,c;AAAc,K;;;aAAdA,c;AAAc,eAAdA,cAAc,K;AAAA,kBAFb;;;;;sEAEDA,c,EAAc;cAH1B,wDAG0B;eAHf;AACVtD,oBAAU,EAAE;AADF,S;AAGe,Q;;;;;;;;;;;;;;;;;;;;ACV3B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAMauE,e;;;AAEX,iCAAc;AAAA;AAAG,O,CAEjB;AACA;;;;;0CAEyBC,a,EAAuC;AAAA,cAAhBC,IAAgB,uEAAJ,EAAI;;AAC9D,cAAI,CAACA,IAAI,CAACC,SAAV,EAAqB;AAAED,gBAAI,CAACC,SAAL,GAAiB,CAAjB;AAAqB;;AAC5C,cAAMC,KAAK,GAAG,EAAd;AACA,cAAMC,UAAU,GAAGH,IAAI,CAACC,SAAL,GAAiBD,IAAI,CAACC,SAAzC;AACA,cAAI7K,IAAI,GAAQ,EAAhB;AACA,cAAIgL,IAAJ;AACA,uEAAsB,4CAAQ,CAACL,aAAD,CAA9B,EAA+CpC,OAA/C,CAAuD,UAAA0C,GAAG,EAAI;AAC5D,oBAAQA,GAAG,CAAC7U,IAAZ;AACE,mBAAK,GAAL;AACE0U,qBAAK,CAAC/P,IAAN,CAAWiF,IAAI,GAAG,EAAlB;AACF;;AACA,mBAAK,GAAL;AACA,mBAAK,GAAL;AACA,mBAAK,GAAL;AACA,mBAAK,GAAL;AACE6B,mBAAG,CAACoJ,GAAG,CAAC1M,CAAL,EAAQ0M,GAAG,CAACtM,CAAZ,CAAH;;AACA,oBAAIsM,GAAG,CAAC7U,IAAJ,KAAa,GAAjB,EAAsB;AAAE4J,sBAAI,CAAC8D,MAAL,GAAc,IAAd;AAAqB;;AAC7C;;AAEF,mBAAK,GAAL;AACEoH,iCAAiB,CAACD,GAAG,CAACE,EAAL,EAASF,GAAG,CAACG,EAAb,EAAiBH,GAAG,CAACI,EAArB,EAAyBJ,GAAG,CAACK,EAA7B,EAAiCL,GAAG,CAACM,EAArC,EAAyCN,GAAG,CAACO,EAA7C,EAAiDP,GAAG,CAAC1M,CAArD,EAAwD0M,GAAG,CAACtM,CAA5D,CAAjB;AACAkD,mBAAG,CAACoJ,GAAG,CAAC1M,CAAL,EAAQ0M,GAAG,CAACtM,CAAZ,CAAH;AACA;;AAEF,mBAAK,GAAL;AACE,oBAAI0M,EAAE,GAAG,CAAT;AACA,oBAAIC,EAAE,GAAG,CAAT;;AACA,oBAAIN,IAAJ,EAAU;AACR,sBAAIA,IAAI,CAAC5U,IAAL,KAAc,GAAlB,EAAuB;AACrBiV,sBAAE,GAAGL,IAAI,CAACzM,CAAL,GAAS,CAAT,GAAayM,IAAI,CAACO,EAAvB;AACAD,sBAAE,GAAGN,IAAI,CAACrM,CAAL,GAAS,CAAT,GAAaqM,IAAI,CAACQ,EAAvB;AACD,mBAHD,MAGO;AACLH,sBAAE,GAAGL,IAAI,CAACzM,CAAV;AACA+M,sBAAE,GAAGN,IAAI,CAACrM,CAAV;AACD;AACF;;AACDuM,iCAAiB,CAACD,GAAG,CAACE,EAAL,EAASF,GAAG,CAACG,EAAb,EAAiBC,EAAjB,EAAqBC,EAArB,EAAyBL,GAAG,CAACM,EAA7B,EAAiCN,GAAG,CAACO,EAArC,EAAyCP,GAAG,CAAC1M,CAA7C,EAAgD0M,GAAG,CAACtM,CAApD,CAAjB;AACAkD,mBAAG,CAACoJ,GAAG,CAAC1M,CAAL,EAAQ0M,GAAG,CAACtM,CAAZ,CAAH;AACA;;AAEF;AACE0F,uBAAO,CAACd,KAAR,CAAc,gCAAgC0H,GAAG,CAACQ,OAApC,GAA8C,aAA9C,GAA8DR,GAAG,CAAC7U,IAAlE,GAAyE,0BAAvF;AACAsV,uBAAO,CAACC,IAAR,CAAa,CAAb;AAnCJ;;AAqCAX,gBAAI,GAAGC,GAAP;AACD,WAvCD;AAwCA,iBAAOH,KAAP,CA9C8D,CAgD9D;;AACA,mBAASI,iBAAT,CAA2BC,EAA3B,EAA+BC,EAA/B,EAAmCC,EAAnC,EAAuCC,EAAvC,EAA2CC,EAA3C,EAA+CC,EAA/C,EAAmDI,EAAnD,EAAuDC,EAAvD,EAA2D;AACzD;AACA,gBAAMC,GAAG,GAAG,CAACX,EAAE,GAAGE,EAAN,IAAY,CAAxB;AACA,gBAAMU,GAAG,GAAG,CAACX,EAAE,GAAGE,EAAN,IAAY,CAAxB;AACA,gBAAMU,GAAG,GAAG,CAACX,EAAE,GAAGE,EAAN,IAAY,CAAxB;AACA,gBAAMU,GAAG,GAAG,CAACX,EAAE,GAAGE,EAAN,IAAY,CAAxB;AACA,gBAAMU,GAAG,GAAG,CAACX,EAAE,GAAGK,EAAN,IAAY,CAAxB;AACA,gBAAMO,GAAG,GAAG,CAACX,EAAE,GAAGK,EAAN,IAAY,CAAxB;AACA,gBAAMO,IAAI,GAAG,CAACN,GAAG,GAAGE,GAAP,IAAc,CAA3B;AACA,gBAAMK,IAAI,GAAG,CAACN,GAAG,GAAGE,GAAP,IAAc,CAA3B;AACA,gBAAMK,IAAI,GAAG,CAACN,GAAG,GAAGE,GAAP,IAAc,CAA3B;AACA,gBAAMK,IAAI,GAAG,CAACN,GAAG,GAAGE,GAAP,IAAc,CAA3B;AACA,gBAAMK,KAAK,GAAG,CAACJ,IAAI,GAAGE,IAAR,IAAgB,CAA9B;AACA,gBAAMG,KAAK,GAAG,CAACJ,IAAI,GAAGE,IAAR,IAAgB,CAA9B,CAbyD,CAezD;;AACA,gBAAMG,EAAE,GAAGd,EAAE,GAAGT,EAAhB;AACA,gBAAMwB,EAAE,GAAGd,EAAE,GAAGT,EAAhB;AAEA,gBAAMwB,EAAE,GAAGtM,IAAI,CAACuM,GAAL,CAAU,CAACxB,EAAE,GAAGO,EAAN,IAAYe,EAAZ,GAAiB,CAACrB,EAAE,GAAGO,EAAN,IAAYa,EAAvC,CAAX;AACA,gBAAMI,EAAE,GAAGxM,IAAI,CAACuM,GAAL,CAAU,CAACtB,EAAE,GAAGK,EAAN,IAAYe,EAAZ,GAAiB,CAACnB,EAAE,GAAGK,EAAN,IAAYa,EAAvC,CAAX;;AAEA,gBAAK,CAACE,EAAE,GAAGE,EAAN,KAAaF,EAAE,GAAGE,EAAlB,CAAD,GAA2B/B,UAAU,IAAI2B,EAAE,GAAGA,EAAL,GAAUC,EAAE,GAAGA,EAAnB,CAAzC,EAAkE;AAAE9K,iBAAG,CAAC2K,KAAD,EAAQC,KAAR,CAAH;AAAoB,aAAxF,MAA8F;AAAE;AAC9FvB,+BAAiB,CAACC,EAAD,EAAKC,EAAL,EAASU,GAAT,EAAcC,GAAd,EAAmBK,IAAnB,EAAyBC,IAAzB,EAA+BG,KAA/B,EAAsCC,KAAtC,CAAjB;AACAvB,+BAAiB,CAACsB,KAAD,EAAQC,KAAR,EAAeH,IAAf,EAAqBC,IAArB,EAA2BL,GAA3B,EAAgCC,GAAhC,EAAqCP,EAArC,EAAyCC,EAAzC,CAAjB;AACD;AACF;;AAED,mBAAShK,GAAT,CAAatD,CAAb,EAAgBI,CAAhB,EAAmB;AACjB,gBAAIiM,IAAI,CAACmC,QAAL,IAAiBnC,IAAI,CAACmC,QAAL,IAAiB,CAAtC,EAAyC;AACvCxO,eAAC,GAAGA,CAAC,CAACyO,OAAF,CAAUpC,IAAI,CAACmC,QAAf,IAA2B,CAA/B;AACApO,eAAC,GAAGA,CAAC,CAACqO,OAAF,CAAUpC,IAAI,CAACmC,QAAf,IAA2B,CAA/B;AACD;;AACD/M,gBAAI,CAACjF,IAAL,CAAU,CAACwD,CAAD,EAAII,CAAJ,CAAV;AACD;AACF,S,CAGD;AACA;;;;oCACmBS,K,EAAO6N,E,EAAI;AAC5B;AACA;AAEA,cAAM1O,CAAC,GAAGa,KAAK,CAAC,CAAD,CAAf;AACA,cAAMT,CAAC,GAAGS,KAAK,CAAC,CAAD,CAAf;AAEA,cAAI8N,MAAM,GAAG,KAAb;;AACA,eAAK,IAAI5L,CAAC,GAAG,CAAR,EAAW6L,CAAC,GAAGF,EAAE,CAACjO,MAAH,GAAY,CAAhC,EAAmCsC,CAAC,GAAG2L,EAAE,CAACjO,MAA1C,EAAkDmO,CAAC,GAAG7L,CAAC,EAAvD,EAA2D;AACzD,gBAAM8L,EAAE,GAAGH,EAAE,CAAC3L,CAAD,CAAF,CAAM,CAAN,CAAX;AACA,gBAAM+L,EAAE,GAAGJ,EAAE,CAAC3L,CAAD,CAAF,CAAM,CAAN,CAAX;AACA,gBAAMgM,EAAE,GAAGL,EAAE,CAACE,CAAD,CAAF,CAAM,CAAN,CAAX;AACA,gBAAMI,EAAE,GAAGN,EAAE,CAACE,CAAD,CAAF,CAAM,CAAN,CAAX;AAEA,gBAAMK,SAAS,GAAKH,EAAE,GAAG1O,CAAN,KAAc4O,EAAE,GAAG5O,CAApB,IACZJ,CAAC,GAAG,CAAC+O,EAAE,GAAGF,EAAN,KAAazO,CAAC,GAAG0O,EAAjB,KAAwBE,EAAE,GAAGF,EAA7B,IAAmCD,EAD7C;;AAEA,gBAAII,SAAJ,EAAe;AAAEN,oBAAM,GAAG,CAACA,MAAV;AAAmB;AACrC;;AAED,iBAAOA,MAAP;AACD;;;;;;;uBApHUxC,e;AAAe,K;;;aAAfA,e;AAAe,eAAfA,eAAe,K;AAAA,kBAFd;;;;;sEAEDA,e,EAAe;cAH3B,wDAG2B;eAHhB;AACVvE,oBAAU,EAAE;AADF,S;AAGgB,Q;;;;;;;;;;;;;;;;;;;;ACN5B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAUasH,e;;;AAEX,+BAAoB7U,OAApB,EAA6C;AAAA;;AAAzB,aAAAA,OAAA,GAAAA,OAAA;AAA4B;;;;+BAGrC;AAAA;;AACT,cAAMyG,MAAM,GAAG,IAAf;AACA,eAAK7D,UAAL,GAAkB,KAAK5C,OAAL,CAAa6C,aAAb,EAAlB;;AACA,cAAI,CAAC,KAAK7C,OAAL,CAAamB,UAAb,EAAL,EAAgC;AAC9B,iBAAKnB,OAAL,CAAauM,IAAb,CAAkBvH,EAAlB,CAAqBrB,SAArB,CAA+B,eAA/B,EAAgDX,IAAhD,CAAqD,SAArD,EAAgE,CAAhE;AACA,iBAAKhD,OAAL,CAAauM,IAAb,CAAkBvH,EAAlB,CAAqBrB,SAArB,CAA+B,eAA/B,EAAgDX,IAAhD,CAAqD,YAArD,EAAmE,SAAnE;AACA,iBAAKhD,OAAL,CAAauM,IAAb,CAAkBvH,EAAlB,CAAqBrB,SAArB,CAA+B,QAA/B,EAAyCX,IAAzC,CAA8C,SAA9C,EAAyD,CAAzD;AACA,iBAAKhD,OAAL,CAAauM,IAAb,CAAkBvH,EAAlB,CAAqB8P,MAArB,CAA4B,SAA5B,EAAuC,cAAvC,EAAuD9R,IAAvD,CAA4D,OAA5D,EAAqE,YAArE,EAAmFS,KAAnF,CAAyF,MAAzF,EAAiG,SAAjG,EACGT,IADH,CACQ,QADR,EACkB,WAAS,KAAKJ,UAAL,CAAgBO,YAAzB,GAAsC,GAAtC,GAA0C,KAAKP,UAAL,CAAgBQ,WAA1D,GAAsE,GAAtE,GAA0E,KAAKR,UAAL,CAAgBO,YAA1F,GAAuG,GAAvG,GAA2G,KAAKP,UAAL,CAAgBQ,WAA3H,GAAuI,IADzJ,EAC+JJ,IAD/J,CACoK,iBADpK,EACuL,YADvL;AAGA,yEAAqB,KAAKhD,OAAL,CAAauM,IAAb,CAAkBtH,GAAlB,CAAsBpD,QAAtB,CAA+B,CAA/B,CAArB,EAAwD,KAAK7B,OAAL,CAAa+U,kBAAb,GAAkC/V,KAAlC,CAAwC,mBAAxC,EAA6D,CAA7D,EACrD6M,OADqD,CAC7C,YAD6C,EAC/B,EAD+B,CAAxD,EAC8B;AAAE5I,mBAAK,EAAE,KAAKL,UAAL,CAAgBK,KAAzB;AAAgCC,oBAAM,EAAE,KAAKN,UAAL,CAAgBM,MAAxD;AAAgE8R,iBAAG,EAAE,EAArE;AAAyEC,kBAAI,EAAE,EAA/E;AAAmFC,4BAAc,EAAE,GAAnG;AAAwGC,mBAAK,EAAG,IAAIlW,MAAM,CAACmW;AAA3H,aAD9B,EAC8K/X,IAD9K,CAEI,YAAM;AACJ,qBAAI,CAAC2C,OAAL,CAAauM,IAAb,CAAkBvH,EAAlB,CAAqBrB,SAArB,CAA+B,eAA/B,EAAgDX,IAAhD,CAAqD,SAArD,EAAgE,OAAI,CAAChD,OAAL,CAAa6R,cAA7E;;AACA,qBAAI,CAAC7R,OAAL,CAAauM,IAAb,CAAkBvH,EAAlB,CAAqBrB,SAArB,CAA+B,QAA/B,EAAyCX,IAAzC,CAA8C,SAA9C,EAAyD,CAAzD;;AACA,qBAAI,CAAChD,OAAL,CAAauM,IAAb,CAAkBvH,EAAlB,CAAqBrB,SAArB,CAA+B,aAA/B,EAA8CC,MAA9C;AACD,aANL;AASD,WAhBD,MAgBO;AACL,iBAAK5D,OAAL,CAAauM,IAAb,CAAkBvH,EAAlB,CAAqBrB,SAArB,CAA+B,eAA/B,EAAgDX,IAAhD,CAAqD,SAArD,EAAgE,CAAhE;AACA,iBAAKhD,OAAL,CAAauM,IAAb,CAAkBvH,EAAlB,CAAqBrB,SAArB,CAA+B,eAA/B,EAAgDX,IAAhD,CAAqD,YAArD,EAAmE,SAAnE;AACA,iBAAKhD,OAAL,CAAauM,IAAb,CAAkBvH,EAAlB,CAAqBrB,SAArB,CAA+B,QAA/B,EAAyCX,IAAzC,CAA8C,SAA9C,EAAyD,CAAzD;AACA,wEAAoB,KAAKhD,OAAL,CAAauM,IAAb,CAAkBtH,GAAlB,CAAsBpD,QAAtB,CAA+B,CAA/B,CAApB,EAAuD;AAAEoB,mBAAK,EAAE,KAAKL,UAAL,CAAgBK,KAAzB;AAAgCC,oBAAM,EAAE,KAAKN,UAAL,CAAgBM,MAAxD;AAAgE8R,iBAAG,EAAE,EAArE;AAAyEC,kBAAI,EAAE,EAA/E;AAAmFC,4BAAc,EAAE,GAAnG;AAAwGC,mBAAK,EAAG,IAAIlW,MAAM,CAACmW;AAA3H,aAAvD,EACG/X,IADH,CACQ,UAAAgY,GAAG,EAAI;AACX,wDAAU,OAAI,CAACrV,OAAL,CAAasV,aAAb,EAAV,EAAwC,UAACC,GAAD,EAAMC,YAAN,EAAuB;AAC7D,0DAAUH,GAAV,EAAe,UAACE,GAAD,EAAME,KAAN,EAAgB;AAC7BD,8BAAY,CAACE,SAAb,CAAuBD,KAAvB,EAA8B,CAA9B,EAAiC,CAAjC;AACAhP,wBAAM,CAACkP,aAAP,CAAqBH,YAArB;AACD,iBAHD;AAID,eALD;;AAMA,qBAAI,CAACxV,OAAL,CAAauM,IAAb,CAAkBvH,EAAlB,CAAqBrB,SAArB,CAA+B,eAA/B,EAAgDX,IAAhD,CAAqD,SAArD,EAAgE,OAAI,CAAChD,OAAL,CAAa6R,cAA7E;;AACA,qBAAI,CAAC7R,OAAL,CAAauM,IAAb,CAAkBvH,EAAlB,CAAqBrB,SAArB,CAA+B,QAA/B,EAAyCX,IAAzC,CAA8C,SAA9C,EAAyD,CAAzD;AACD,aAVH;AAYD;AACF;;;sCAEoByS,K,EAAO;AAAA;;AAC1BA,eAAK,CAACG,SAAN,CAAgB,yCAAhB,EAA2B,UAACL,GAAD,EAAMM,GAAN,EAAc;AACvC,gBAAMC,QAAQ,GAAGC,QAAQ,CAACC,aAAT,CAAuB,GAAvB,CAAjB;AACAF,oBAAQ,CAACnE,IAAT,GAAgBkE,GAAhB;AACAC,oBAAQ,CAACA,QAAT,GAAoB,OAAI,CAAC9V,OAAL,CAAasI,UAAb,CAAwBtJ,KAAxB,CAA8B,mBAA9B,EAAmD,CAAnD,CAApB;AACA8W,oBAAQ,CAACG,KAAT;AACD,WALD;AAMD;;;sCAGiB;AAAA;;AAChB,cAAMxP,MAAM,GAAG,IAAf;AACA,cAAIyP,QAAJ;;AACA,cAAI,CAAC,KAAKlW,OAAL,CAAamB,UAAb,EAAL,EAAgC;AAC9B,iBAAKyB,UAAL,GAAkB,KAAK5C,OAAL,CAAa6C,aAAb,EAAlB;AACA,iBAAK7C,OAAL,CAAauM,IAAb,CAAkBvH,EAAlB,CAAqBrB,SAArB,CAA+B,eAA/B,EAAgDX,IAAhD,CAAqD,SAArD,EAAgE,CAAhE;AACA,iBAAKhD,OAAL,CAAauM,IAAb,CAAkBvH,EAAlB,CAAqBrB,SAArB,CAA+B,eAA/B,EAAgDX,IAAhD,CAAqD,YAArD,EAAmE,SAAnE;AACA,iBAAKhD,OAAL,CAAauM,IAAb,CAAkBvH,EAAlB,CAAqBrB,SAArB,CAA+B,QAA/B,EAAyCX,IAAzC,CAA8C,SAA9C,EAAyD,CAAzD;AACA,iBAAKhD,OAAL,CAAauM,IAAb,CAAkBvH,EAAlB,CAAqB8P,MAArB,CAA4B,SAA5B,EAAuC,cAAvC,EAAuD9R,IAAvD,CAA4D,OAA5D,EAAqE,YAArE,EAAmFS,KAAnF,CAAyF,MAAzF,EAAiG,SAAjG,EACGT,IADH,CACQ,QADR,EACkB,WAAS,KAAKJ,UAAL,CAAgBO,YAAzB,GAAsC,GAAtC,GAA0C,KAAKP,UAAL,CAAgBQ,WAA1D,GAAsE,GAAtE,GAA0E,KAAKR,UAAL,CAAgBO,YAA1F,GAAuG,GAAvG,GAA2G,KAAKP,UAAL,CAAgBQ,WAA3H,GAAuI,IADzJ,EAC+JJ,IAD/J,CACoK,iBADpK,EACuL,YADvL;AAEA,mBAAO,4DAAoB,KAAKhD,OAAL,CAAauM,IAAb,CAAkBtH,GAAlB,CAAsBpD,QAAtB,CAA+B,CAA/B,CAApB,EACL;AAAEoB,mBAAK,EAAE,KAAKL,UAAL,CAAgBK,KAAzB;AAAgCC,oBAAM,EAAE,KAAKN,UAAL,CAAgBM,MAAxD;AAAgE8R,iBAAG,EAAE,EAArE;AAAyEC,kBAAI,EAAE,EAA/E;AAAmFC,4BAAc,EAAE;AAAnG,aADK,EACqG7X,IADrG,CAEH,UAACoY,KAAD,EAAW;AACTS,sBAAQ,GAAGT,KAAX;;AACA,qBAAI,CAACzV,OAAL,CAAauM,IAAb,CAAkBvH,EAAlB,CAAqBrB,SAArB,CAA+B,eAA/B,EAAgDX,IAAhD,CAAqD,SAArD,EAAgE,OAAI,CAAChD,OAAL,CAAa6R,cAA7E;;AACA,qBAAI,CAAC7R,OAAL,CAAauM,IAAb,CAAkBvH,EAAlB,CAAqBrB,SAArB,CAA+B,QAA/B,EAAyCX,IAAzC,CAA8C,SAA9C,EAAyD,CAAzD;;AACA,qBAAI,CAAChD,OAAL,CAAauM,IAAb,CAAkBvH,EAAlB,CAAqBrB,SAArB,CAA+B,aAA/B,EAA8CC,MAA9C;;AACA,qBAAI,CAAC0I,UAAL,GAAkBmJ,KAAlB;AACA,qBAAOA,KAAP;AACD,aATE,CAAP;AAWD,WAlBD,MAkBO;AACL,iBAAKzV,OAAL,CAAauM,IAAb,CAAkBvH,EAAlB,CAAqBrB,SAArB,CAA+B,eAA/B,EAAgDX,IAAhD,CAAqD,SAArD,EAAgE,CAAhE;AACA,iBAAKhD,OAAL,CAAauM,IAAb,CAAkBvH,EAAlB,CAAqBrB,SAArB,CAA+B,eAA/B,EAAgDX,IAAhD,CAAqD,YAArD,EAAmE,SAAnE;AACA,iBAAKhD,OAAL,CAAauM,IAAb,CAAkBvH,EAAlB,CAAqBrB,SAArB,CAA+B,QAA/B,EAAyCX,IAAzC,CAA8C,SAA9C,EAAyD,CAAzD;AACA,mBAAO,4DAAoB,KAAKhD,OAAL,CAAauM,IAAb,CAAkBtH,GAAlB,CAAsBpD,QAAtB,CAA+B,CAA/B,CAApB,EAAuD;AAAEoB,mBAAK,EAAE,KAAKL,UAAL,CAAgBK,KAAzB;AAAgCC,oBAAM,EAAE,KAAKN,UAAL,CAAgBM,MAAxD;AAAgE8R,iBAAG,EAAE,EAArE;AAAyEC,kBAAI,EAAE,EAA/E;AAAmFC,4BAAc,EAAE;AAAnG,aAAvD,EACJ7X,IADI,CACC,UAAAgY,GAAG,EAAI;AACX,wDAAU,OAAI,CAACrV,OAAL,CAAasV,aAAb,EAAV,EAAwC,UAACC,GAAD,EAAMC,YAAN,EAAuB;AAC7D,0DAAUH,GAAV,EAAe,UAACE,GAAD,EAAME,KAAN,EAAgB;AAC7BD,8BAAY,CAACE,SAAb,CAAuBD,KAAvB,EAA8B,CAA9B,EAAiC,CAAjC;AACA,yBAAOD,YAAY,CAACI,SAAb,CAAuB,WAAvB,EAAoC,UAACL,GAAD,EAAMM,GAAN,EAAc;AACvD,2BAAI,CAACvJ,UAAL,GAAkBuJ,GAAlB;AACA,2BAAOA,GAAP;AACD,mBAHM,CAAP;AAID,iBAND;AAOD,eARD;;AASA,qBAAI,CAAC7V,OAAL,CAAauM,IAAb,CAAkBvH,EAAlB,CAAqBrB,SAArB,CAA+B,eAA/B,EAAgDX,IAAhD,CAAqD,SAArD,EAAgE,OAAI,CAAChD,OAAL,CAAa6R,cAA7E;;AACA,qBAAI,CAAC7R,OAAL,CAAauM,IAAb,CAAkBvH,EAAlB,CAAqBrB,SAArB,CAA+B,QAA/B,EAAyCX,IAAzC,CAA8C,SAA9C,EAAyD,CAAzD;AACD,aAbI,CAAP;AAeD;AAEF;;;kCAEgByS,K,EAAK;AACpB,iBAAOA,KAAK,CAACG,SAAN,CAAgB,yCAAhB,EAA2B,UAACL,GAAD,EAAMM,GAAN,EAAc;AAC9C,mBAAOA,GAAP;AACD,WAFM,CAAP;AAGD;;;;;;;uBArGUhB,e,EAAe,uH;AAAA,K;;;aAAfA,e;AAAe,eAAfA,eAAe,K;AAAA,kBAFd;;;;;sEAEDA,e,EAAe;cAH3B,wDAG2B;eAHhB;AACVtH,oBAAU,EAAE;AADF,S;AAGgB,Q;;;;;;;;;;;;;;;;;;;;;;ACV5B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAQa4I,yB;;;AAEX,yCAAoBC,UAApB,EAAgD;AAAA;;AAA5B,aAAAA,UAAA,GAAAA,UAAA;AACb,aAAAC,aAAA,GAAyB,KAAzB;AAD4C;;;;mCAE3C,CACP;;;4CAGmB/M,K,EAAsB;AACtC,cAAIA,KAAK,CAAC9L,IAAN,KAAe,MAAnB,EAA2B;AAAE,iBAAK8Y,gBAAL;AAA0B;AAC1D;;;2CAEsB;AACrB,eAAKF,UAAL,CAAgBE,gBAAhB;AACA,eAAKD,aAAL,GAAqB,CAAC,KAAKA,aAA3B;AACD;;;;;;;uBAfUF,yB,EAAyB,yI;AAAA,K;;;YAAzBA,yB;AAAyB,4C;AAAA;AAAA;;;;;;;;;;;;;;sEAAzBA,yB,EAAyB;cALrC,uDAKqC;eAL3B;AACThX,kBAAQ,EAAE,uBADD;AAETC,qBAAW,EAAE,oCAFJ;AAGTC,mBAAS,EAAE,CAAC,mCAAD;AAHF,S;AAK2B,Q;;;;;;gBAOnC,0D;iBAAa,gB,EAAkB,CAAC,QAAD,C;;;;;;;;;;;;;;;;;;;;ACflC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;ACKQ;;AAEC;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;AAAA,iBAAsB,YAAtB;AAAoC,SAApC;;AACA;;AAAc;;;;;;;;AAFd;;AAEA;;AAAA;;;;;;;;;;;;;;AART;;AACI;;AAEC;;AAAc;;AACf;;AACI;;AAIJ;;AACJ;;;;;;AAVmE;;AAE7D;;AAAA;;AACD;;AAAA;;AAEW;;AAAA;;;;;;;;;;;;;;;;AAQhB;;AAEE;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AACD;;AAAc;;;;;;;;AAFd;;AAEA;;AAAA;;;;;;AAJD;;AACA;;AAIA;;;;;;AAJS;;AAAA;;;;QDJIkX,6B;;;AAEX,6CAAmBvW,OAAnB,EAA4C;AAAA;;AAAzB,aAAAA,OAAA,GAAAA,OAAA;AAEZ,aAAAwW,KAAA,GAAQ,yEAAY7R,MAAZ,CAAmB,CAAnB,CAAR;AACA,aAAA8R,mBAAA,GAAsB,KAAtB;AAHwC;;;;mCAKvC;AACN,eAAKC,gBAAL,CAAsBzX,MAAM,CAAC0X,UAA7B;AACD;;;yCAEuBC,W,EAAa;AAAA;;AACnC,cAAIA,WAAW,GAAG,IAAlB,EAAwB;AACtB,iBAAKH,mBAAL,GAA2B,IAA3B;AACA,iBAAK9R,MAAL,GAAc,yEAAYA,MAAZ,CAAmByH,MAAnB,CAA0B,UAAA8D,IAAI;AAAA,qBAAIA,IAAI,CAACT,IAAL,IAAa,OAAI,CAAC+G,KAAL,CAAW/G,IAA5B;AAAA,aAA9B,CAAd;AACD,WAHD,MAGO;AACL,iBAAKgH,mBAAL,GAA2B,KAA3B;AACA,iBAAK9R,MAAL,GAAc,yEAAYA,MAA1B;AACD;AACF;;;iCAEeV,K,EAAa;AAAA;;AAC3B,eAAKuS,KAAL,GAAa,KAAK7R,MAAL,CAAYV,KAAZ,CAAb;;AACA,cAAI,KAAKwS,mBAAT,EAA8B;AAC5B,iBAAKzW,OAAL,CAAa6W,QAAb,CAAsB,yEAAYlS,MAAZ,CAAmBmS,SAAnB,CAA6B,UAAAxZ,CAAC;AAAA,qBAAIA,CAAC,CAACmS,IAAF,KAAW,OAAI,CAAC+G,KAAL,CAAW/G,IAA1B;AAAA,aAA9B,CAAtB;AACA,iBAAK9K,MAAL,GAAc,yEAAYA,MAAZ,CAAmByH,MAAnB,CAA0B,UAAA8D,IAAI;AAAA,qBAAIA,IAAI,CAACT,IAAL,IAAa,OAAI,CAAC+G,KAAL,CAAW/G,IAA5B;AAAA,aAA9B,CAAd;AACD,WAHD,MAGO;AACL,iBAAKzP,OAAL,CAAa6W,QAAb,CAAsB5S,KAAtB;AACA,iBAAKU,MAAL,GAAc,yEAAYA,MAA1B;AACD;AACF;;;4CAImB2E,K,EAAsB;AACxC,cAAMyN,MAAM,GAAG,CAAC,MAAD,EAAS,MAAT,EAAiB,MAAjB,EAAyB,MAAzB,EAAiC,MAAjC,CAAf;;AACA,cAAIA,MAAM,CAAClY,QAAP,CAAgByK,KAAK,CAAC9L,IAAtB,CAAJ,EAAiC;AAC/B,gBAAMyG,KAAK,GAAG8S,MAAM,CAACD,SAAP,CAAiB,UAAAxZ,CAAC;AAAA,qBAAIA,CAAC,KAAKgM,KAAK,CAAC9L,IAAhB;AAAA,aAAlB,CAAd;;AACA,gBAAI,KAAKiZ,mBAAT,EAA8B;AAC5B,kBAAMhH,IAAI,GAAG,yEAAY9K,MAAZ,CAAmBV,KAAnB,EAA0BwL,IAAvC;;AACA,kBAAIA,IAAI,KAAK,KAAK+G,KAAL,CAAW/G,IAAxB,EAA8B;AAC5B,qBAAKoH,QAAL,CAAc,KAAKlS,MAAL,CAAYmS,SAAZ,CAAsB,UAAAxZ,CAAC;AAAA,yBAAIA,CAAC,CAACmS,IAAF,KAAWA,IAAf;AAAA,iBAAvB,CAAd;AACD;AACF,aALD,MAKO;AACL,mBAAKoH,QAAL,CAAc5S,KAAd;AACD;AACF;AACF;;;iCAGQqF,K,EAAO;AACd,eAAKoN,gBAAL,CAAsBzX,MAAM,CAAC0X,UAA7B;AACD;;;;;;;uBApDUJ,6B,EAA6B,yI;AAAA,K;;;YAA7BA,6B;AAA6B,iD;AAAA;AAAA;;;;;;;;;;;;;ACT1C;;AAYA;;;;AAZuC;;AAYlC;;AAAA;;;;;;;;;sEDHQA,6B,EAA6B;cALzC,uDAKyC;eAL/B;AACTpX,kBAAQ,EAAE,4BADD;AAETC,qBAAW,EAAE,yCAFJ;AAGTC,mBAAS,EAAE,CAAC,wCAAD;AAHF,S;AAK+B,Q;;;;;;gBAiCvC,0D;iBAAa,gB,EAAkB,CAAC,QAAD,C;;;gBAgB/B,0D;iBAAa,e,EAAiB,CAAC,QAAD,C;;;;;;;;;;;;;;;;;;;;AE1DjC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QASa2X,gB;;;AAEX,gCAAoB/W,QAApB,EAA+C;AAAA;;AAA3B,aAAAA,QAAA,GAAAA,QAAA;AADb,aAAAgX,OAAA,GAAkB,oDAAlB;AAC2C;;;;mCAE1C,CACP;;;+BAEU;AACT,eAAKhX,QAAL,CAAc0Q,IAAd;AACD;;;;;;;uBATUqG,gB,EAAgB,2I;AAAA,K;;;YAAhBA,gB;AAAgB,kC;AAAA,gB;AAAA,a;AAAA,w1C;AAAA;AAAA;ACT7B;;AACI;;AAAwB;;AAAa;;AACrC;;AAEA;;AACI;;AAA4E;;AAAS;;AACrF;;AACI;;AACJ;;AACJ;;AAEA;;AACI;;AAA4E;;AAAM;;AAClF;;AAEI;;AACJ;;AACJ;;AACA;;AACI;;AAA4E;;AAAQ;;AACpF;;AAGI;;AACA;;AACA;;AACJ;;AACJ;;AACA;;AACI;;AAA4E;;AAAI;;AAChF;;AAGI;;AAAI;;AAAQ;;AACZ;;AACI;;AACI;;AACI;;AAAgB;;AAAG;;AACnB;;AAAgB;;AAAM;;AAC1B;;AACJ;;AACA;;AACI;;AACI;;AAAgB;;AAAM;;AACtB;;AAAI;;AAAI;;AACZ;;AACA;;AACI;;AAAgB;;AAAU;;AAC1B;;AAAI;;AAAW;;AACnB;;AACA;;AACI;;AAAgB;;AAAW;;AAC3B;;AAAI;;AAAG;;AACX;;AACA;;AACI;;AAAgB;;AAAa;;AAC7B;;AAAI;;AAAY;;AACpB;;AACA;;AACI;;AAAgB;;AAAM;;AACtB;;AAAI;;AAAI;;AACZ;;AACA;;AACI;;AAAgB;;AAAC;;AACjB;;AAAI;;AAAkC;;AAC1C;;AACA;;AACI;;AAAgB;;AAAC;;AACjB;;AAAI;;AAAqB;;AAC7B;;AACA;;AACI;;AAAgB;;AAAkD;;AAAmD;;AACrH;;AAAI;;AAAiB;;AACzB;;AACA;;AACI;;AAAgB;;AAAC;;AACjB;;AAAI;;AAA2B;;AACnC;;AACA;;AACI;;AAAgB;;AAAC;;AACjB;;AAAI;;AAA+B;;AACvC;;AACA;;AACI;;AAAgB;;AAAC;;AACjB;;AAAI;;AAAyB;;AACjC;;AACA;;AACI;;AAAgB;;AAAW;;AAC3B;;AAAI;;AAAY;;AACpB;;AACJ;;AACJ;;AACA;;AACA;;AAAI;;AAAU;;AACd;;AAGA;;AAAiB;;AAAgC;;AACrD;;AACJ;;AACA;;AAAoD;AAAA,mBAAS,IAAArG,IAAA,EAAT;AAAe,WAAf;;AAAiB;;AAAI;;AACzE;;AAAqD;;AAAK;;AAI9D;;;;AAR6B;;AAAA;;;;;;;;;sEDxFhBqG,gB,EAAgB;cAL5B,uDAK4B;eALlB;AACT7X,kBAAQ,EAAE,aADD;AAETC,qBAAW,EAAE,0BAFJ;AAGTC,mBAAS,EAAE,CAAC,yBAAD;AAHF,S;AAKkB,Q;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AET7B;AAAA;;;AAAA;AAAA;AAAA,O,CAAA;AACA;AACA;;;AAEO,QAAM6X,WAAW,GAAG;AACzBC,gBAAU,EAAE,KADa;AAEzBxS,YAAM,EAAE,CACN;AAAC8K,YAAI,EAAE,MAAP;AAAelP,aAAK,EAAE;AAAtB,OADM,EAEN;AAACkP,YAAI,EAAE,eAAP;AAAwBlP,aAAK,EAAE;AAA/B,OAFM,EAGN;AAACkP,YAAI,EAAE,YAAP;AAAqBlP,aAAK,EAAE;AAA5B,OAHM,EAIN;AAACkP,YAAI,EAAE,SAAP;AAAkBlP,aAAK,EAAE;AAAzB,OAJM,EAKN;AAACkP,YAAI,EAAE,QAAP;AAAiBlP,aAAK,EAAE;AAAxB,OALM,CAFiB;AASzB0Q,kBAAY,EAAE,sHATW;AAUzBpD,wBAAkB,EAAE,MAVK;AAWzBY,oBAAc,EAAE,iEAXS;AAYzBI,qBAAe,EAAE,kEAZQ;AAazBb,wBAAkB,EAAE,MAbK;AAczBC,uBAAiB,EAAE;AAdM,KAApB;AAiBP;;;;;;;AAOA;;;;;;;;;;;;;;;;;AC5BA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AAMA,QAAI,sEAAYkJ,UAAhB,EAA4B;AAC1B;AACD;;AAED,gFAAyBC,eAAzB,CAAyC,yDAAzC,EACGC,KADH,CACS,UAAA9B,GAAG;AAAA,aAAI9J,OAAO,CAACd,KAAR,CAAc4K,GAAd,CAAJ;AAAA,KADZ","file":"main-es5.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { GitComponent } from './git/git.component';\nimport { DrawingCanvasComponent } from './drawing-canvas/drawing-canvas.component';\n\nconst routes: Routes = [\n  {path: '', component: DrawingCanvasComponent},\n  {path: 'authresponse', component: GitComponent}\n];\n\n@NgModule({\n  imports: [RouterModule.forRoot(routes)],\n  exports: [RouterModule]\n})\nexport class AppRoutingModule { }\n","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { GitService } from './git.service';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent implements OnInit{\n  constructor(private route: ActivatedRoute, private git: GitService){}\n  ngOnInit(): void {\n    this.route.queryParams.subscribe(params => {\n      if(params.code){\n        this.git.getGithubToken(params.code).subscribe( ret => {\n          if (!ret.toString().includes('error')) {\n            localStorage.setItem('gitToken', 'Bearer ' + ret.toString().match(/(?<==)(.*?)(?=&)/)[0]);\n            window.close();\n          } else {\n            localStorage.setItem('gitToken', 'ERROR');\n            window.close();\n          }\n        });\n      }\n    });\n  }\n  title = 'img-labeler';\n}\n","<router-outlet>\n<ngx-ui-loader></ngx-ui-loader>\n","import { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\nimport { AppRoutingModule } from './app-routing.module';\nimport { AppComponent } from './app.component';\nimport { DrawingCanvasComponent } from './drawing-canvas/drawing-canvas.component';\nimport { Ng2PanZoomModule } from 'ng2-panzoom';\nimport {NgbModule} from '@ng-bootstrap/ng-bootstrap';\nimport { NgxUiLoaderModule } from 'ngx-ui-loader';\nimport { GitComponent } from './git/git.component';\nimport { HttpClientModule } from '@angular/common/http';\nimport { GitManageComponent } from './git-manage/git-manage.component';\nimport { ToolbarComponent } from './toolbar/toolbar.component';\nimport { ToolbarColorSelectorComponent } from './toolbar-color-selector/toolbar-color-selector.component';\nimport { ImageSelectorComponent } from './image-selector/image-selector.component';\nimport { LayersComponent } from './layers/layers.component';\nimport { RevertFromHistoryComponent } from './revert-from-history/revert-from-history.component';\nimport { TogglePixelationComponent } from './toggle-pixelation/toggle-pixelation.component';\n\n\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    DrawingCanvasComponent,\n    GitComponent,\n    GitManageComponent,\n    ToolbarComponent,\n    ToolbarColorSelectorComponent,\n    ImageSelectorComponent,\n    LayersComponent,\n    RevertFromHistoryComponent,\n    TogglePixelationComponent\n  ],\n  imports: [\n    BrowserModule,\n    AppRoutingModule,\n    Ng2PanZoomModule,\n    NgbModule,\n    NgxUiLoaderModule,\n    HttpClientModule,\n    ],\n  providers: [],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","import { Component, OnInit, ViewChild, Renderer2, HostListener, AfterViewInit, Output } from '@angular/core';\nimport * as d3 from 'd3';\nimport * as svg from 'save-svg-as-png';\nimport { PanZoomConfig, PanZoomAPI, PanZoomModel } from 'ng2-panzoom';\nimport { Subscription, Observable } from 'rxjs';\nimport * as cloneDeep from 'node_modules/lodash.clonedeep';\nimport * as potrace from 'potrace';\nimport * as Jimp from 'jimp';\nimport { PngToSvgService } from '../services/png-to-svg.service';\nimport { NgxUiLoaderService } from 'ngx-ui-loader';\nimport { LutServiceService } from '../services/lut-service.service';\nimport { ActivatedRoute } from '@angular/router';\nimport { MaskingService } from '../services/masking.service';\nimport { Layer } from '../models/layer';\nimport { SvgtopngService } from '../services/svgtopng.service';\nimport { environment } from 'src/environments/environment';\n@Component({\n    selector: 'app-drawing-canvas',\n    templateUrl: './drawing-canvas.component.html',\n    styleUrls: ['./drawing-canvas.component.css']\n})\nexport class DrawingCanvasComponent implements OnInit, AfterViewInit {\n    public gitImage: string;\n    public imageName: string;\n    public dragging = false;\n    public drawing = false;\n    public startPoint = [];\n    public svg;\n    public g;\n    public isCollapsed = false;\n    public points = [];\n    public loadedColors: number;\n    public color = '#402020';\n    public colorIndex = 0;\n    public history = [];\n    public providedURL: string;\n    public customMaskURL: string;\n    public svgElement;\n    public panzoomConfig: PanZoomConfig = new PanZoomConfig({\n        zoomLevels: 10,\n        scalePerZoomLevel: 1.5,\n        zoomStepDuration: 0.2,\n        freeMouseWheel: false,\n        invertMouseWheel: true,\n        zoomToFitZoomLevelFactor: 0.9,\n        dragMouseButton: 'right',\n        initialZoomLevel: 1\n    });\n    private panZoomAPI: PanZoomAPI;\n    public panzoomModel: PanZoomModel;\n    private apiSubscription: Subscription;\n    private modelChangedSubscription: Subscription;\n    public layers;\n    public loadedMask = false;\n    public layerPoints = [];\n    public localStorage = [];\n    public previewShown = false;\n    @ViewChild('artboard') artboard;\n    public opacity: number = 100;\n    @ViewChild('imageNumber') imageNumber;\n    @ViewChild('url') url;\n    @Output() Layers;\n\n    private dimensions;\n\n    ngAfterViewInit(): void {\n        this.maskSvc.setArtboard(this.artboard.nativeElement.innerHTML);\n        this.setLayers();\n        this.svgElement = this.artboard.nativeElement.children[0];\n    }\n\n    constructor(private renderer: Renderer2, private pngToSvg: PngToSvgService,\n        private ngxService: NgxUiLoaderService, private lut: LutServiceService,\n        private activatedRoute: ActivatedRoute, private maskSvc: MaskingService,\n        private svgToPng: SvgtopngService) { }\n\n    ngOnInit(): void {\n        const storage = Object.entries(localStorage);\n        for (const item of storage) {\n            if (item[0].includes('github')) {\n                item[0] = item[0].match(/[\\w-]+\\.(png|jpg)/)[0].substring(0, 4);\n                this.localStorage.push(item);\n            }\n        }\n        this.apiSubscription = this.panzoomConfig.api.subscribe((api: PanZoomAPI) => this.panZoomAPI = api);\n        this.modelChangedSubscription = this.panzoomConfig.modelChanged.subscribe((model: PanZoomModel) => {\n            this.onModelChanged(model);\n            this.panzoomModel = model;\n        });\n\n        this.dimensions = this.maskSvc.getDimensions();\n        this.svg = d3.select('.artboard').append('svg')\n            .attr('background-size', this.dimensions.width+'px '+this.dimensions.height+'px')\n            .attr('height', this.dimensions.canvasHeight)\n            .attr('width', this.dimensions.canvasWidth);\n\n        this.activatedRoute.queryParams.subscribe(params => {\n            const userId = params.userId;\n        });\n\n        this.maskSvc.getImageUrl().subscribe(url => {\n            this.updateCanvas();\n            this.svg.style('background-image', `url('${url}')`);\n        })\n\n        this.maskSvc.getMaskUrl().subscribe(url => {\n            this.loadedMask = true;\n            this.svg.selectAll('.existingMask').remove();\n            const g = this.svg.append('g').attr('class', 'existingMask' + ' completePoly').attr('layerHidden', 'false')\n                .attr('color', 'existingMask')\n                .attr('opacity', this.opacity)\n                .attr('visibility', 'visible');\n            g.append('svg:image')\n                .attr('href', url)\n                .attr('x', 43)\n                .attr('y', 38);\n        })\n\n        this.maskSvc.getLayerChange().subscribe(obj => {\n            if (obj.type === 'opacity') {\n                this.svg.selectAll('.completePoly').attr('opacity', obj.index * .01);\n                this.opacity = obj.index * .01;\n            }\n            if (this.previewShown) {\n                return;\n            }\n            if (obj.type === 'delete') {\n                this.deleteLayer(obj.index);\n            }\n            if (obj.type === 'up') {\n                this.toFront(obj.index);\n            }\n            if (obj.type === 'down') {\n                this.toBottom(obj.index);\n            }\n            if (obj.type === 'toggle') {\n                this.toggleVisibility(obj.index);\n            }\n            if (obj.type === 'clearAll') {\n                this.deleteAllLayers();\n            }\n            if (obj.type === 'revert') {\n                this.revertFromLocalStorage(obj.collection);\n            }\n            if (obj.type === 'toggleAll') {\n                this.toggleAll();\n            }\n            if (obj.type === 'addToLocalStorage') {\n                this.addToLocalStorage();\n            }\n            if (environment.colors.map(e => e.color).includes(obj.type)) {\n                this.updateColor(obj.index, obj.type);\n            }\n            this.setLayers();\n        })\n\n    }\n\n    private updateCanvas(): void {\n      // Set canvas dimensions in case it changed\n      this.dimensions = this.maskSvc.getDimensions();\n      if (this.dimensions) {\n        this.svg = d3.select('.artboard').select('svg')\n          .attr('height', this.dimensions.canvasHeight)\n          .attr('width', this.dimensions.canvasWidth);\n        this.svg.style('background-size', this.dimensions.width+'px '+this.dimensions.height+'px');\n      }\n    }\n\n    private setLayers(): void {\n        this.maskSvc.updateMask({ d3: this.svg, dom: this.artboard.nativeElement, loadedMask: this.loadedMask });\n    }\n\n    private deleteLayerClick(e): void {\n        if (e.target.tagName === 'polygon') {\n            e.target.parentNode.remove();\n        }\n        this.setLayers();\n        this.addToLocalStorage();\n    }\n\n    public mouseUp(e) {\n        if(!this.drawing && e.altKey) {\n            this.deleteLayerClick(e);\n            return;\n        }\n        if (this.g) {\n            this.addToHistory(this.drawing, this.startPoint, this.g, this.points);\n        }\n        this.g = this.svg.select('g.drawPoly');\n        if (e.button !== 0) { return; }\n        if (this.dragging) { return; }\n        if (this.previewShown) { return; }\n        this.drawing = true;\n        this.startPoint = [(e.layerX - this.panzoomModel.pan.x) *\n            (1 / (this.artboard.nativeElement.getBoundingClientRect().width / this.artboard.nativeElement.offsetWidth)),\n        (e.layerY - this.panzoomModel.pan.y) *\n        (1 / (this.artboard.nativeElement.getBoundingClientRect().width / this.artboard.nativeElement.offsetWidth))];\n        if (this.svg.select('g.drawPoly').empty()) {\n            this.g = this.svg.append('g').attr('class', 'drawPoly');\n            this.svg.selectAll('circle').attr('cursor', 'default');\n        }\n        if (e.toElement.tagName === 'circle') {\n            this.closePolygon();\n            return;\n        }\n        this.points.push([(e.layerX - this.panzoomModel.pan.x) *\n            (1 / (this.artboard.nativeElement.getBoundingClientRect().width / this.artboard.nativeElement.offsetWidth)),\n        (e.layerY - this.panzoomModel.pan.y) *\n        (1 / (this.artboard.nativeElement.getBoundingClientRect().width / this.artboard.nativeElement.offsetWidth))]);\n        this.svg.select('g.drawPoly').append('polyline').attr('points', this.points)\n            .style('fill', 'none')\n            .attr('stroke-width', 1 / (this.panzoomModel.zoomLevel / 2))\n            .attr('stroke', '#000');\n        this.svg.select('g.drawPoly').append('circle')\n            .attr('cx', this.points[this.points.length - 1][0])\n            .attr('cy', this.points[this.points.length - 1][1])\n            .attr('r', 4 / (this.panzoomModel.zoomLevel / 1.5))\n            .attr('stroke-width', 1 / (this.panzoomModel.zoomLevel / 2))\n            .attr('fill', this.maskSvc.currentColor.color)\n            .attr('stroke', '#000')\n            .attr('is-handle', 'true')\n            .attr('class', 'inProgressCircle')\n            .attr('style', 'cursor:pointer');\n    }\n    public closePolygon(childPoly?: boolean) {\n        let child = '';\n        if (childPoly) {\n            child = ' child';\n        }\n        this.svg.selectAll('circle').attr('cursor', 'move');\n        this.svg.select('g.drawPoly').remove();\n        const g = this.svg.append('g').attr('class', this.maskSvc.currentColor.color + ' completePoly' + child).attr('layerHidden', 'false')\n            .attr('color', this.maskSvc.currentColor.color)\n            .attr('opacity', this.opacity)\n            .attr('visibility', 'visible');\n        g.append('polygon')\n            .attr('points', this.points)\n            .attr('shape-rendering', 'crispEdges')\n            .style('fill', this.maskSvc.currentColor.color);\n        for (const point of this.points) {\n            const holder = this;\n            g.selectAll('circles')\n                .data([point])\n                .enter()\n                .append('circle')\n                .attr('cx', point[0])\n                .attr('cy', point[1])\n                .attr('r', 4 / this.panzoomModel.zoomLevel)\n                .attr('stroke-width', 1 / (this.panzoomModel.zoomLevel / 2))\n                .attr('fill', '#FDBC07')\n                .attr('stroke', '#000')\n                .attr('is-handle', 'true')\n                .attr('class', 'dragCircle')\n                .attr('cursor', 'move')\n                .call(d3.drag()\n                    .on('drag', function () {\n                        holder.handleDrag(this);\n                    })\n                    .on('end', () => {\n                        this.dragging = false;\n                        this.addToHistory(this.drawing, this.startPoint, this.g, this.points);\n                    })\n                );\n\n        }\n        this.points.splice(0);\n        this.drawing = false;\n        this.setLayers();\n        this.addToLocalStorage();\n        this.addToHistory(this.drawing, this.startPoint, this.g, this.points);\n    }\n\n    public enableDragging() {\n        const holder = this;\n        this.svg.selectAll('.dragCircle').call(d3.drag()\n            .on('drag', function () {\n                holder.handleDrag(this);\n            })\n            .on('end', () => {\n                this.dragging = false;\n                this.addToHistory(this.drawing, this.startPoint, this.g, this.points);\n            })\n        );\n    }\n    public mouseMove(e) {\n        if (!this.drawing) { return; }\n        const g = d3.select('g.drawPoly');\n        if (e.target.tagName === 'line') { return; }\n        if (e.target.className.baseVal === 'inProgressCircle') {\n            g.select('line').remove();\n            return;\n        }\n        g.select('line').remove();\n        g.append('line')\n            .attr('x1', this.startPoint[0])\n            .attr('y1', this.startPoint[1])\n            .attr('x2', (e.layerX - this.panzoomModel.pan.x) *\n                (1 / (this.artboard.nativeElement.getBoundingClientRect().width / this.artboard.nativeElement.offsetWidth)))\n            .attr('y2', (e.layerY - this.panzoomModel.pan.y) *\n                (1 / (this.artboard.nativeElement.getBoundingClientRect().width / this.artboard.nativeElement.offsetWidth)))\n            .attr('stroke', '#53DBF3')\n            .attr('stroke-width', 1 / (this.panzoomModel.zoomLevel * 1.3));\n    }\n\n    public handleDrag(e) {\n        if (this.drawing) { return; }\n        const newPoints = [];\n        let circle;\n        this.dragging = true;\n        const poly = d3.select(e.parentNode).select('polygon');\n        const circles = d3.select(e.parentNode).selectAll('circle');\n        e.setAttribute('cy', d3.event.y);\n        e.setAttribute('cx', d3.event.x);\n        for (const circleGroup of circles._groups[0]) {\n            circle = d3.select(circleGroup);\n            newPoints.push([circle.attr('cx'), circle.attr('cy')]);\n        }\n        poly.attr('points', newPoints);\n    }\n\n    public incrementOpacity(up: boolean): void {\n        if (up) {\n            this.opacity = Math.min(this.opacity + 20, 100);\n        } else {\n            this.opacity = Math.max(this.opacity - 20, 0);\n        }\n        // this.updateOpacity();\n    }\n\n\n\n    public updateImage(url?): void {\n        if (url) { this.svg.style('background-image', `url('${url}')`); } else {\n            this.svg.style('background-image', `url('${this.url.nativeElement.value}')`);\n            this.imageNumber.nativeElement.value = this.url.nativeElement.value.match(/[\\w-]+\\.(png|jpg)/)[0].substring(0, 4);\n        }\n    }\n\n    public updateImageByNumber(): void {\n        this.svg.style('background-image', `url('https://raw.githubusercontent.com/commaai/comma10k/master/imgs/${this.lut.getUrl(this.imageNumber.nativeElement.value.padStart(4, '0'))}')`);\n        this.url.nativeElement.value = `https://raw.githubusercontent.com/commaai/comma10k/master/imgs/${this.lut.getUrl(this.imageNumber.nativeElement.value.padStart(4, '0'))}`;\n        this.imageNumber.nativeElement.value = this.imageNumber.nativeElement.value.padStart(4, '0');\n    }\n\n    onModelChanged(model: PanZoomModel): void {\n        if (this.artboard && model.zoomLevel >= 1) {\n            this.svg.selectAll('circle').attr('r', 4 / (model.zoomLevel / 1.5));\n            this.svg.selectAll('polyline').attr('stroke-width', 1 / (model.zoomLevel / 2));\n            this.svg.selectAll('circle').attr('stroke-width', 1 / (model.zoomLevel / 2));\n        }\n    }\n\n    public addToHistory(drawing, startPoint, g, points): void {\n        const collection = this.svgElement.innerHTML;\n        this.history.unshift([JSON.stringify(collection), JSON.stringify(drawing),\n        JSON.stringify(startPoint), cloneDeep(g), JSON.stringify(points)]);\n        if (this.history.length > 15) {\n            this.history.pop();\n        }\n    }\n\n    public addToLocalStorage(): void {\n        const collection = this.artboard.nativeElement.innerHTML;\n        const contents = JSON.stringify({\n            artboard: JSON.stringify(collection),\n            url: this.maskSvc.currentUrl,\n            opacity: this.opacity\n        });\n        localStorage.setItem(this.maskSvc.currentUrl, contents);\n    }\n\n    public revertFromLocalStorage(collection: string): void {\n        this.deleteAllLayers();\n        const contents = JSON.parse(collection);\n        this.artboard.nativeElement.innerHTML = JSON.parse(contents.artboard);\n        this.svg = d3.select('svg');\n        this.maskSvc.currentUrl = contents.url;\n        this.enableDragging();\n        this.setLayers();\n        this.loadedMask = this.maskSvc.loadedMask();\n        this.svgElement = this.artboard.nativeElement.children[0];\n    }\n\n    public undo(): void {\n        if (this.history.length > 0) {\n            this.svgElement.innerHTML = JSON.parse(this.history[0][0]);\n            this.drawing = JSON.parse(this.history[0][1]);\n            this.startPoint = JSON.parse(this.history[0][2]);\n            this.g = this.history[0][3];\n            this.points = JSON.parse(this.history[0][4]);\n            this.history.shift();\n        }\n        this.enableDragging();\n    }\n\n    public toFront(i: number) {\n        this.svgElement.append(this.svgElement.children[i]);\n    }\n\n    public toBottom(i: number) {\n        this.svgElement.prepend(this.svgElement.children[i]);\n    }\n\n    public updateColor(i: number, color: string) {\n        this.svgElement.children[i].children[0].setAttribute('style', 'fill: ' + color + ';');\n        this.svgElement.children[i].setAttribute('color', color);\n        // TODO update local storage?\n    }\n\n    public toggleVisibility(i: number) {\n        if (this.svgElement.children[i].getAttribute('visibility') !== 'hidden') {\n            this.svgElement.children[i].setAttribute('visibility', 'hidden');\n            this.svgElement.children[i].setAttribute('layerHidden', 'true');\n            return;\n        }\n        this.svgElement.children[i].setAttribute('visibility', 'visible');\n        this.svgElement.children[i].setAttribute('layerHidden', 'false');\n        this.setLayers();\n    }\n\n    public toggleAll(): void {\n        if (this.svgElement.children.length > 0) {\n            if (this.getVisibility(0)) {\n                for (const layer of this.svgElement.children) {\n                    if (layer.classList.contains('completePoly')) {\n                        layer.setAttribute('visibility', 'hidden');\n                        layer.setAttribute('layerHidden', 'true');\n                    }\n                }\n            } else {\n                for (const layer of this.svgElement.children) {\n                    layer.setAttribute('visibility', 'visible');\n                    layer.setAttribute('layerHidden', 'false');\n                }\n            }\n        }\n    }\n\n    public toggleControlPoints(): void {\n        if (this.svgElement.classList.contains('hideCircles')) {\n            this.svgElement.classList.remove('hideCircles');\n        } else {\n            this.svgElement.classList.add('hideCircles');\n        }\n    }\n\n    public previewExport(): void {\n        if (!this.previewShown) {\n            if (this.drawing) {\n                return;\n            }\n            this.previewShown = true;\n            this.svgToPng.base64ToGit()\n                .then(base64 => {\n                    const g = this.svg.append('g').attr('class', 'existingMask' + ' completePoly' + ' preview').attr('layerHidden', 'false')\n                        .attr('color', 'existingMask')\n                        .attr('opacity', (this.opacity > 0.2 ? this.opacity : 0.2))\n                        .attr('visibility', 'visible');\n                    g.append('svg:image')\n                        .attr('href', base64)\n                        .attr('x', 43)\n                        .attr('y', 38)\n                    for (const layer of this.svgElement.children) {\n                        if (!layer.classList.contains('preview')) {\n                            layer.setAttribute('visibility', 'hidden');\n                            layer.setAttribute('layerHidden', 'true');\n                        }\n                    }\n                    this.setLayers();\n                });\n        } else {\n            this.svg.selectAll('.preview').remove();\n            this.previewShown = false;\n            for (const layer of this.svgElement.children) {\n                layer.setAttribute('visibility', 'visible');\n                layer.setAttribute('layerHidden', 'false');\n            }\n            this.setLayers();\n        }\n    }\n\n    public getVisibility(i: number): boolean {\n        if (this.svgElement.children[i].getAttribute('visibility') === 'visible') {\n            return true;\n        }\n        return false;\n    }\n\n    public deleteLayer(i: number) {\n        if (this.getLayerType(i) === 'Existing Mask') {\n            this.loadedMask = false;\n        }\n        this.svgElement.children[i].remove();\n    }\n\n    public deleteAllLayers() {\n        if (this.drawing) { return; }\n        if (confirm('Warning: This will remove all current layers')) {\n            this.svg.selectAll('g').remove();\n        }\n    }\n\n    public deleteCurrentLayer() {\n        if (!this.drawing) { return; }\n        this.drawing = false;\n        this.startPoint = [];\n        this.points = [];\n        this.svg.select('g.drawPoly').remove();\n    }\n\n\n    @HostListener('document:keyup', ['$event'])\n    handleKeyboardEvent(event: KeyboardEvent) {\n        if (event.code === 'Escape') { this.deleteCurrentLayer(); }\n        if (event.code === 'BracketLeft') { this.toggleControlPoints(); }\n        if (event.code === 'KeyO') { this.previewExport(); }\n        if (event.code === 'KeyZ' && event.ctrlKey === true) { this.undo(); }\n        if (event.code === 'Numpad0' || event.code === 'Digit0') { this.panZoomAPI.resetView() }\n    }\n\n    public getLayerType(i: number): string {\n\n        const colors = [['#402020 completePoly', 'Road'], ['#ff0000 completePoly', 'Lane Markings'], ['#808060 completePoly', 'Undrivable'],\n        ['#00ff66 completePoly', 'Movable'], ['#cc00ff completePoly', 'My Car'], ['existingMask completePoly', 'Existing Mask']];\n        for (const color of colors) {\n            if (color[0] === this.svgElement.children[i].getAttribute('class')) {\n                return color[1];\n            }\n        }\n        return 'In Progress';\n    }\n\n\n\n}\n","<app-toolbar></app-toolbar>\n<div class=\"container-fluid mb-4\" style=\"position: absolute; top: 75px; bottom: 0; left: 0; right: 0;\">\n    <pan-zoom [config]=\"panzoomConfig\">\n        <div class=\"artboard\" (mouseup)=\"mouseUp($event)\" (mousemove)=\"mouseMove($event)\" #artboard>\n        </div>\n    </pan-zoom>\n</div>","import { Component, OnInit, Input, Output, EventEmitter } from '@angular/core';\nimport { GitService } from '../git.service';\nimport { switchMap } from 'rxjs/operators';\nimport { NgxUiLoaderService } from 'ngx-ui-loader';\nimport { MaskingService } from '../services/masking.service';\nimport { SvgtopngService } from '../services/svgtopng.service';\n\n@Component({\n  selector: 'app-git-manage',\n  templateUrl: './git-manage.component.html',\n  styleUrls: ['./git-manage.component.css']\n})\nexport class GitManageComponent implements OnInit {\n\n  constructor(private git: GitService, private ngxService: NgxUiLoaderService,\n  private maskSvc: MaskingService, private svgToPng: SvgtopngService) { }\n  public authenticated = false;\n  public errorOccurred = false;\n  public userData;\n  public branches;\n  public commitReturn: boolean = false;\n\n  ngOnInit(): void {\n    if(localStorage.getItem('gitToken') && localStorage.getItem('gitToken') != 'ERROR'){\n      this.gitLoad();\n    }\n  }\n\n  public gitLoad(){\n    this.commitReturn = false;\n    this.git.getUserInfo().pipe(\n      switchMap( ret => {\n        this.userData = ret;\n        return this.git.getRepoBranches(ret.login);\n      })\n    )\n  .subscribe((ret) => {\n    this.branches = ret;\n    this.authenticated = true;\n  },\n  error => {\n    this.logout();\n\n  });\n  }\n\n  public logout(){\n    localStorage.removeItem('gitToken');\n    this.authenticated = false;\n  }\n\n  public githubAuthenticate() {\n    const s = window.open('https://github.com/login/oauth/authorize?client_id=efab4921711c71a51b5b&scope=public_repo', '_blank');\n    const timer = setInterval(() => {\n            if (s.closed) {\n                if (localStorage.getItem('gitToken') === 'ERROR') {\n                  this.errorOccurred = true;\n                  clearInterval(timer);\n                } else {\n                  clearInterval(timer);\n                  this.gitLoad();\n                }\n            }\n        }, 1000);\n  }\n\n  public commit(sha: string, branch: string): void {\n    let imgUrl = this.maskSvc.currentUrl.match(/[\\w-]+\\.png/)[0];\n    const imgs2 = (imgUrl.indexOf('_') === 5);\n    console.log(imgs2)\n    this.svgToPng.base64ToGit()\n    .then(base64 => {\n    this.ngxService.start();\n    let defaultMessage = `${imgUrl.replace('_', '').substr(0, 4)} ${this.userData.login}`\n    if(imgs2){\n      defaultMessage = `${imgUrl.replace('_', '').substr(0, 6)} ${this.userData.login}`\n    } \n    const commitMessage =  prompt('Enter Commit Message', defaultMessage).valueOf();\n    this.git.getTree(this.userData.login, sha).pipe(\n      switchMap(ret => {\n        if(imgs2) { return this.git.getTree(this.userData.login, ret.tree.filter(item => item.path === 'masks2')[0].sha); }\n        else{\n          return this.git.getTree(this.userData.login, ret.tree.filter(item => item.path === 'masks')[0].sha);\n        }\n      })\n    )\n    .pipe(\n      switchMap(ret => {\n      return this.git.commitFile(this.userData.login, commitMessage, this.svgToPng.base64Mask.replace('data:image/png;base64,', ''),\n          ret.tree.filter(mask => mask.path === imgUrl)[0].sha, branch, imgUrl);\n      })\n    ).subscribe(ret => {\n      this.commitReturn = true;\n      this.ngxService.stop();\n    });\n    }); \n  }\n\n}\n","<h5>Github Integration</h5>\n\n<button *ngIf=\"!authenticated\" type=\"button\" class=\"btn btn-sm btn-outline-primary\" (click)=\"githubAuthenticate()\">Log In</button>\n<button *ngIf=\"authenticated\" type=\"button\" class=\"btn btn-sm btn-outline-primary\" (click)=\"gitLoad()\">Reload</button>\n<button *ngIf=\"authenticated\" type=\"button\" class=\"btn btn-sm btn-outline-primary ml-2\" (click)=\"logout()\">Log Out</button>\n\n<div *ngIf=\"authenticated\" class=\"mt-2\">\n    Welcome: {{userData.login}}<br>\n    <table class=\"table table-striped table-dark table-sm\">\n        <thead>\n        <tr>\n            <td>Branch Name</td>\n            <td></td>\n        </tr>\n    </thead>\n    <tbody>\n    <tr *ngFor=\"let branch of branches\">\n        \n        <td>{{branch.name}}</td><td><button type=\"button\" class=\"btn btn-outline-primary btn-sm\" (click)=\"commit(branch.commit.sha, branch.name)\">Commit</button></td>\n        </tr>\n</tbody>\n</table>\n<div class=\"alert alert-success\" *ngIf=\"commitReturn\">Successfully committed mask</div>\n</div>\n","import { Injectable } from '@angular/core';\nimport { HttpClient, HttpParams, HttpHeaders } from '@angular/common/http';\nimport { Observable } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class GitService {\n\n  constructor(private http: HttpClient) { }\n  public githubToken: string;\n  public gitTokenHeader;\n\n  private setHeaders(): void {\n    this.gitTokenHeader = new HttpHeaders({\n      'Content-Type':  'application/json',\n      'Authorization': localStorage.getItem('gitToken')\n    });\n  }\n  \n  public getGithubCode(): Observable<any> {\n    const url = 'https://github.com/login/oauth/authorize';\n    let params = new HttpParams().set('client_id', 'efab4921711c71a51b5b');\n    params = params.set('scope', 'public_repo');\n    return this.http.get(url, {params});\n  }\n\n  public getGithubToken(code: string): Observable<any> {\n    const url = `https://z4nv5b8ws6.execute-api.us-east-1.amazonaws.com/default/img-labeler-token-endpoint?code=${code}`;\n    return this.http.get(url);\n  }\n\n  public getUserInfo(): Observable<any> {\n    this.setHeaders();\n    const url = `https://api.github.com/user`;\n    return this.http.get(url, {headers: this.gitTokenHeader});\n  }\n\n  public getUserRepos(user: string): Observable<any> {\n    this.setHeaders();\n    const url = `https://api.github.com/users/${user}/repos`;\n    return this.http.get(url, {headers: this.gitTokenHeader});\n  }\n\n  public getRepoBranches(user: string): Observable<any> {\n    this.setHeaders();\n    const url = `https://api.github.com/repos/${user}/comma10k/branches`;\n    return this.http.get(url, {headers: this.gitTokenHeader});\n  }\n\n  public createCommit(user: string, message: string): Observable<any> {\n    this.setHeaders();\n    const url = `https://api.github.com/repos/${user}/comma10k/branches`;\n    return this.http.get(url, {headers: this.gitTokenHeader});\n  }\n\n  public getTree(user: string, sha: string): Observable<any> {\n    this.setHeaders();\n    const url = `https://api.github.com/repos/${user}/comma10k/git/trees/${sha}`;\n    return this.http.get(url, {headers: this.gitTokenHeader});\n  }\n\n  public commitFile(user: string, message: string, content: string, sha: string, branch: string, imageName: string) {\n    this.setHeaders();\n    const body = {\n      \"message\": message,\n      \"sha\": sha,\n      \"branch\": branch,\n      \"content\": content\n    };\n    let header = new HttpHeaders({\n      'Content-Type':  'application/json',\n      'Authorization': localStorage.getItem('gitToken')\n    });\n    let url = `https://api.github.com/repos/${user}/comma10k/contents/masks/${imageName}`;\n    if(imageName.indexOf('_') === 5){\n      url = `https://api.github.com/repos/${user}/comma10k/contents/masks2/${imageName}`;\n    }\n    return this.http.put(url, body, {headers: header});\n  }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { GitService } from '../git.service';\nimport { ActivatedRoute } from '@angular/router';\n\n@Component({\n  selector: 'app-git',\n  templateUrl: './git.component.html',\n  styleUrls: ['./git.component.css']\n})\nexport class GitComponent implements OnInit {\n\n  constructor(private git: GitService, private route: ActivatedRoute) { }\n\n  ngOnInit(): void {\n    this.git.getGithubToken(this.route.snapshot.queryParamMap.get(\"code\")).subscribe( ret => {\n      if (!ret.toString().includes('error')) {\n        localStorage.setItem('gitToken', 'Bearer ' + ret.toString().match(/(?<==)(.*?)(?=&)/)[0]);\n        window.close();\n      } else {\n        localStorage.setItem('gitToken', 'ERROR');\n      }\n    });\n  }\n}\n","import { Component, OnInit, ViewChild, AfterViewInit } from '@angular/core';\nimport { environment } from 'src/environments/environment';\nimport { MaskingService } from '../services/masking.service';\nimport lut from 'src/assets/images.json'\nimport { ActivatedRoute } from '@angular/router';\n\n@Component({\n  selector: 'app-image-selector',\n  templateUrl: './image-selector.component.html',\n  styleUrls: ['./image-selector.component.css']\n})\nexport class ImageSelectorComponent implements OnInit, AfterViewInit {\n  @ViewChild('url') url;\n  @ViewChild('imageNumber') num;\n\n  constructor(private maskSvc: MaskingService, private activatedRoute: ActivatedRoute) { }\n\n  ngOnInit(): void {\n  }\n\n  ngAfterViewInit(): void {\n    this.activatedRoute.queryParams.subscribe(params => {\n      if (params.imageNumber) {\n        this.updateImageByNum(params.imageNumber);\n      } else {\n        this.updateImageByNum(environment.defaultImageNumber);\n      }\n      setTimeout(() => {\n        if (params.showMask) {\n          if (params.showMask === 'true') {\n            this.showMask();\n          } else {\n            this.showMask(params.showMask)\n          }\n        }\n      });\n\n    });\n  }\n  public showMask(url?: string): void {\n    if (!url) {\n      url = this.url.nativeElement.value.replace(environment.imageDirectoryName, environment.maskDirectoryName);\n    }\n    this.maskSvc.setMaskUrl(url);\n  }\n\n  public fromUrl(): void {\n    this.showMask(prompt('Enter Mask URL').valueOf().replace('imgs', 'masks').replace('?raw=true', '')\n      .replace('https://github.com', 'https://raw.githubusercontent.com').replace('/blob', ''));\n  }\n\n  public updateImage(): void {\n    this.maskSvc.setImageUrl(this.url.nativeElement.value);\n  }\n\n  public updateImageByNum(number?: string): void {\n    if (!['e', 'f'].includes(this.num.nativeElement.value.slice(-1))) {\n      let imgN = this.num.nativeElement.value.padStart(4, '0');\n      if (number) {\n        imgN = number.padStart(4, '0');\n        this.num.nativeElement.value = imgN;\n      }\n      if (lut.filter(element => element.id === imgN).length > 0) {\n        let url = `${environment.imageDirectory}${lut.find(obj => obj.id === imgN).val}`;\n        this.url.nativeElement.value = url;\n        this.maskSvc.setImageUrl(url);\n      }\n      else {\n        alert(`Image ${imgN} does not exist.`);\n      }\n    } else {\n      let imgN = this.num.nativeElement.value.padStart(6, '0');\n      if (number) {\n        imgN = number.padStart(6, '0');\n        this.num.nativeElement.value = imgN;\n      }\n      if (lut.filter(element => element.id === imgN).length > 0) {\n        let url = `${environment.image2Directory}${lut.find(obj => obj.id === imgN).val}`;\n        this.url.nativeElement.value = url;\n        this.maskSvc.setImageUrl(url);\n      }\n      else {\n        alert(`Image ${imgN} does not exist.`);\n      }\n    }\n  }\n\n}\n","<div class=\"ml-2 mt-1 mb-1 mr-2\">\n    <div class=\"input-group mb-2\" style=\"width:500px\">\n        <div class=\"input-group-prepend\">\n            <span class=\"input-group-text\" id=\"basic-addon1\">Image URL</span>\n        </div>\n        <input type=\"text\" class=\"form-control\"\n            (input)=\"updateImage()\"\n            #url aria-describedby=\"basic-addon1\">\n    </div>\n\n    <div class=\"input-group\" style=\"width:300px\">\n        <div class=\"input-group-prepend\">\n            <span class=\"input-group-text\" id=\"basic-addon1\">Image Number</span>\n        </div>\n        <input type=\"text\" class=\"form-control\" maxlength=\"7\" #imageNumber aria-describedby=\"basic-addon1\">\n        <div class=\"btn btn-outline-primary ml-1\" (click)=\"updateImageByNum()\">Go</div>\n    </div>\n    <button type=\"button\" class=\"btn btn-outline-primary mt-2\" (click)=\"showMask()\">Show Existing Mask</button>\n    <br><a (click)=\"fromUrl()\"><small>From URL</small></a>\n</div>","import { Component, OnInit, ViewChild, HostListener } from '@angular/core';\nimport { MaskingService } from '../services/masking.service';\nimport { Layer } from '../models/layer';\nimport { environment } from 'src/environments/environment';\nimport { LayerChange } from '../models/layer-change';\n\n@Component({\n  selector: 'app-layers',\n  templateUrl: './layers.component.html',\n  styleUrls: ['./layers.component.css']\n})\nexport class LayersComponent implements OnInit {\n  public layers: Layer[];\n  constructor(private maskSvc: MaskingService) { }\n  @ViewChild('opacity') opacityForm;\n  ngOnInit(): void {\n    this.maskSvc.getLayers().subscribe(layers => {\n      this.layers = layers.reverse();\n    })\n  }\n\n  public toTop(i: number): void {\n    this.maskSvc.modifyLayer(new LayerChange({index: i, type: 'up'}))\n  }\n\n  public toBottom(i: number): void {\n    this.maskSvc.modifyLayer(new LayerChange({index: i, type: 'down'}))\n  }\n\n  public delete(i: number): void {\n    if(this.layers.length === 1){\n      this.layers = undefined;\n    }\n    this.maskSvc.modifyLayer(new LayerChange({index: i, type: 'delete'}));\n  }\n\n  public toggle(i: number): void {\n    this.maskSvc.modifyLayer(new LayerChange({index: i, type: 'toggle'}));\n  }\n\n  public toggleAll(): void {\n    this.maskSvc.modifyLayer(new LayerChange({index: 0, type: 'toggleAll'}));\n  }\n\n  public updateOpacity(): void {\n    this.maskSvc.modifyLayer(new LayerChange({index: parseInt(this.opacityForm.nativeElement.value), type: 'opacity'}));\n  }\n\n  public deleteAll(): void {\n    this.maskSvc.modifyLayer(new LayerChange({index: 0, type: 'clearAll'}));\n  }  \n\n  public getLayerType(layerColor: string): {name:string, color:string}{\n    if( layerColor === 'existingMask') {\n      return {name:'Existing Mask', color: 'black'};\n    }\n    return environment.colors.filter(color => color.color == layerColor)[0];\n  }\n\n  public incrementOpacity(up: boolean): void {\n    let opacity = parseInt(this.opacityForm.nativeElement.value);\n    if (up) {\n        opacity = Math.min(opacity + 20, 100);\n    } else {\n        opacity = Math.max(opacity - 20, 0);\n    }\n    this.opacityForm.nativeElement.value = opacity;\n    this.updateOpacity();\n  }\n\n  public setColor(layer: Layer, index: number) {\n    this.layers.forEach(e => {if(e.index === layer.index)e.update(index)});\n    this.maskSvc.modifyLayer(new LayerChange(layer));\n  }\n\n  @HostListener('document:keyup', ['$event'])\n  handleKeyboardEvent(event: KeyboardEvent) {\n      if (event.code === 'ArrowUp') { this.incrementOpacity(true); }\n      if (event.code === 'ArrowDown') { this.incrementOpacity(false); }\n      if (event.code === 'Comma') { this.toggleAll(); }\n\n  }\n}\n","<div class=\"ml-2 mr-2\">\n    <div class=\"row\" style=\"max-width: 100%\">\n        <div class=\"col\">\n            <div class=\"input-group mt-1 mb-2\" style=\"width:250px\">\n                <div class=\"input-group-prepend\">\n                    <span class=\"input-group-text\" id=\"basic-addon1\">Mask Opacity</span>\n                </div>\n                <input type=\"number\" class=\"form-control\" min=\"0\" max=\"100\" value='100' (input)=\"updateOpacity()\" #opacity\n                    aria-describedby=\"basic-addon1\">\n            </div>\n        </div>\n        <div class=\"col\" style=\"text-align:right\"> <button type=\"button\" (click)=\"deleteAll()\" class=\"btn btn-outline-danger\">Clear\n                All Layers</button>\n        </div>\n\n    </div>\n\n    <table class=\"table table-striped table-dark\" *ngIf=\"layers\">\n        <thead>\n            <tr>\n                <th scope=\"col\">Layer</th>\n                <th scope=\"col\">Type</th>\n                <th scope=\"col\">To Top</th>\n                <th scope=\"col\">To Bottom</th>\n                <th scope=\"col\">Hide&nbsp;/ Show</th>\n                <th scope=\"col\">Delete</th>\n            </tr>\n        </thead>\n        <tbody>\n            <tr *ngFor=\"let layer of layers\">\n                <th>{{layer.index}}</th>\n                <th><div ngbDropdown #myDrop=\"ngbDropdown\" [autoClose]=\"false\" display=\"dynamic\" placement=\"top-left\">\n                    <button class=\"btn btn-outline-light\" id=\"dropdownBasic3\" ngbDropdownToggle\n                      [ngStyle]=\"{'width': '150px', 'border-color': getLayerType(layer.type).color, 'background-color': getLayerType(layer.type).color}\"\n                    >{{getLayerType(layer.type).name}}</button>\n                    <div ngbDropdownMenu aria-labelledby=\"dropdownBasic3\" style=\"width: 450px;\" class=\"bg-dark\">\n                        <button *ngFor=\"let color of layer.colors index as i\" class=\"btn btn-dark ml-2\" type=\"button\"\n                         [ngStyle]=\"{'border-color': color.color, 'background-color': color.color}\"\n                         (click)=\"setColor(layer, i); myDrop.close()\"\n                        >{{color.name}}</button>\n                    </div>\n                </div>\n                </th>\n                <th><i class=\"fa fa-arrow-up\" (click)=\"toTop(layer.index)\" aria-hidden=\"true\"></i></th>\n                <th><i class=\"fa fa-arrow-down\" (click)=\"toBottom(layer.index)\" aria-hidden=\"true\"></i></th>\n                <th><i (click)=\"toggle(layer.index)\" *ngIf=\"layer.visibility\" class=\"fa fa-eye\"\n                        aria-hidden=\"true\"></i><i (click)=\"toggle(layer.index)\" *ngIf=\"!layer.visibility\"\n                        class=\"fa fa-eye-slash\" aria-hidden=\"true\"></i></th>\n                <th><i class=\"fa fa-close\" (click)=\"delete(layer.index)\" aria-hidden=\"true\"></i>\n                </th>\n            </tr>\n        </tbody>\n    </table>\n    <div class=\"alert alert-dark\" *ngIf=\"!layers\">No Layers Yet</div>\n</div>","export class LayerChange {\n    constructor(item: any, collection?: string){\n        this.type = item.type;\n        this.index = item.index;\n        if(collection)\n        this.collection = collection;\n    }\n\n    public type: string;\n    public index: number;\n    public collection: string;\n}\n","import { environment } from 'src/environments/environment';\n\nexport class Layer {\n    constructor(item: any){\n        this.type = item.type;\n        this.index = item.index;\n        this.visibility = false;\n        if(item.visibility === 'visible') {\n            this.visibility = true;\n        }\n        if (this.type === 'existingMask') {\n            this.colors = []\n        } else {\n            this.colors = environment.colors.filter(elem => elem.color != this.type);\n        }\n    }\n    public colors; // other possible color options\n    public type: string;\n    public index: number;\n    public visibility: boolean;\n    public update(index: number): void {\n        this.type = this.colors[index].color;\n        this.colors = environment.colors.filter(elem => elem.color != this.type);\n    }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { MaskingService } from '../services/masking.service';\nimport { LayerChange } from '../models/layer-change';\n\n@Component({\n  selector: 'app-revert-from-history',\n  templateUrl: './revert-from-history.component.html',\n  styleUrls: ['./revert-from-history.component.css']\n})\nexport class RevertFromHistoryComponent implements OnInit {\n  public previousMasks: { id: string, data: any, key: string }[];\n  constructor(private maskSvc: MaskingService) { }\n\n  ngOnInit(): void {\n    let i = this.loadMasksFromStorage()\n    if (i >= 31) {\n      alert(`You currently have ${i - 1} masks in in local storage. img-labeler recommends you don't exceed 30, consider deleting some under the Advanced dropdown`)\n    }\n  }\n\n  public save(){\n    this.maskSvc.modifyLayer(new LayerChange({index: 0, type: 'addToLocalStorage'}));\n    this.loadMasksFromStorage();\n  }\n\n  public loadMasksFromStorage(): number{\n    this.previousMasks = [];\n    const storage = Object.entries(localStorage);\n    let i = 0;\n    for (const item of storage) {\n      if (!item[0].includes('gitToken')) {\n        const id = item[0].match(/[\\w-]+\\.(png|jpg)/)[0].substring(0, 4);\n        this.previousMasks.push({ id: id, data: item[1], key: item[0] });\n      }\n      i++;\n    }\n    this.previousMasks.sort((a, b) => (a.id > b.id) ? 1 : -1);\n    return i;\n  }\n  public revert(collection: string): void {\n    this.maskSvc.revert(collection);\n  }\n\n  public delete(key: string): void {\n    localStorage.removeItem(key);\n    this.loadMasksFromStorage();\n  }\n\n}\n","<h5>Revert From History</h5>\n<table class=\"table table-striped table-dark table-sm\" *ngIf=\"previousMasks\">\n    <tbody>\n        <tr *ngFor=\"let mask of previousMasks\">\n            <td>\n                {{mask.id}}\n            </td>\n            <td>\n                <button class=\"btn btn-outline-primary btn-sm ml-1\" (click)=\"revert(mask.data)\">Revert</button>\n                <button class=\"btn btn-outline-danger btn-sm ml-1\" (click)=\"delete(mask.key)\">Delete</button>\n            </td>\n        </tr>\n    </tbody>\n</table>\n<h6>Save To History <button class=\"btn btn-outline-primary btn-sm ml-1\" (click)=\"save()\">Save</button></h6>","import { Injectable } from '@angular/core';\nimport lut from 'src/assets/images.json'\n@Injectable({\n  providedIn: 'root'\n})\nexport class LutServiceService {\n  constructor() { }\n\n  public getUrl(id: string): string {\n    return lut.find(obj => obj.id === id).val;\n  }\n\n\n}\n","import { Injectable } from '@angular/core';\nimport { environment } from 'src/environments/environment';\nimport { Color } from '../models/color';\nimport { Observable, Subject } from 'rxjs';\nimport { Layer } from '../models/layer';\nimport { LayerChange } from '../models/layer-change';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class MaskingService {\n  public currentColor: Color = environment.colors[0];\n  public maskUrl: Subject<string> = new Subject<string>();\n  public imageUrl: Subject<string> = new Subject<string>();\n  public layers: Subject<Layer[]> = new Subject<Layer[]>();\n  public layerChange: Subject<LayerChange> = new Subject<LayerChange>();\n  public mask: any;\n  public currentOpacity: number;\n  public currentUrl: string = environment.defaultImage;\n  public currentMaskUrl: string;\n  public artboard: any;\n\n  // TODO: This is a hack, do this right (using a model?)!\n  public imgDimensionConfig = {\n    \"imgs\": {\n      width: 1164,\n      height: 874,\n      canvasWidth: 1250,\n      canvasHeight: 950\n    },\n    \"imgs2\": {\n      width: 1928,\n      height: 1208,\n      canvasWidth: 2014,\n      canvasHeight: 1284\n    }\n  };\n\n  public series = \"imgs\";\n\n  constructor() {\n  }\n  public setColor(index: number): void {\n    this.currentColor = environment.colors[index];\n  }\n\n  public setArtboard(artboard: any): void {\n    this.artboard = artboard;\n  }\n\n  public togglePixelation(): void {\n    if (getComputedStyle(this.mask.dom.children[0]).imageRendering === 'pixelated') {\n      this.mask.dom.children[0].style.imageRendering = 'auto';\n    } else {\n      this.mask.dom.children[0].style.imageRendering = 'pixelated';\n    }\n  }\n\n  public getPixelation(): boolean {\n    if (getComputedStyle(this.mask.dom.children[0]).imageRendering === 'pixelated') {\n      return true;\n    }\n      return false;\n  }\n\n  public getColor(): Color {\n    return this.currentColor;\n  }\n\n  public setImageUrl(url: string): void {\n    var series = url.match(/[\\w-]+\\/[\\w-]+\\.(png|jpg)$/)[0].split(\"/\")[0];\n    this.setDimensions(series);\n    if (this.mask && this.mask.dom.children[0].children.length > 0) {\n      this.modifyLayer(new LayerChange({ index: 0, type: 'clearAll' }));\n      this.currentUrl = url;\n      this.imageUrl.next(url);\n    } else {\n      this.currentUrl = url;\n      this.imageUrl.next(url);\n    }\n  }\n\n  public setDimensions(series: string): void {\n    this.series = series;\n  }\n\n  public getDimensions(): void {\n    return this.imgDimensionConfig[this.series];\n  }\n\n  public getImageUrl(): Observable<string> {\n    return this.imageUrl;\n  }\n\n  public getCurrentImageUrl(): string {\n    return this.currentUrl;\n  }\n\n  public setMaskUrl(url: string): void {\n    this.currentMaskUrl = url;\n    this.maskUrl.next(url);\n    this.updateMask(this.mask);\n  }\n\n  public getMaskUrl(): Observable<string> {\n    return this.maskUrl;\n  }\n\n  public updateMask(mask): void {\n    this.mask = mask;\n    let layers: Layer[] = [];\n    let i = 0;\n    if (mask.dom.children[0].children.length > 0) {\n      mask.dom.children[0].children.forEach(element => {\n        if (element.classList[1] === 'completePoly') {\n          const color = element.getAttribute('color');\n          layers.push(new Layer({ type: color, index: i.toString(), visibility: element.attributes.visibility.value }))\n        }\n        i++;\n      });\n      this.layers.next(layers);\n    }\n  }\n\n  public loadedMask(): boolean {\n    if (this.mask.dom.children[0].children.length > 0) {\n      for (let element of this.mask.dom.children[0].children) {\n        if (element.classList[0] === 'existingMask') {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n\n  public loadedMaskUrl(): string {\n    if (this.mask.dom.children[0].children.length > 0) {\n      for (let element of this.mask.dom.children[0].children) {\n        if (element.classList[0] === 'existingMask') {\n          return element.children[0].href.baseVal\n        }\n      }\n    }\n  }\n\n  public setLayers(layers: Layer[]): void {\n    this.layers.next(layers);\n  }\n\n  public getLayers(): Observable<Layer[]> {\n    return this.layers;\n  }\n\n  public modifyLayer(change: LayerChange): void {\n    if (change.type === 'opacity') {\n      this.currentOpacity = change.index * .01;\n    }\n    this.layerChange.next(change);\n  }\n\n  public revert(collection: string): void {\n    let req = new LayerChange({ type: 'revert', index: 0 }, collection)\n    this.layerChange.next(req);\n  }\n\n  public getLayerChange(): Observable<LayerChange> {\n    return this.layerChange;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport * as parseSVG from 'svg-path-parser';\nimport { Observable } from 'rxjs';\n@Injectable({\n  providedIn: 'root'\n})\nexport class PngToSvgService {\n\n  constructor() { }\n\n  // this is from https://github.com/Phrogz/svg-path-to-polygons/blob/master/svg-path-to-polygons.js\n  // imported into service to fix broken packaging\n\n  public svgPathToPolygons(svgPathString: string, opts: any = {}) {\n    if (!opts.tolerance) { opts.tolerance = 1; }\n    const polys = [];\n    const tolerance2 = opts.tolerance * opts.tolerance;\n    let poly: any = [];\n    let prev;\n    parseSVG.makeAbsolute(parseSVG(svgPathString)).forEach(cmd => {\n      switch (cmd.code) {\n        case 'M':\n          polys.push(poly = []);\n        // intentional flow-through\n        case 'L':\n        case 'H':\n        case 'V':\n        case 'Z':\n          add(cmd.x, cmd.y);\n          if (cmd.code === 'Z') { poly.closed = true; }\n          break;\n\n        case 'C':\n          sampleCubicBÃ©zier(cmd.x0, cmd.y0, cmd.x1, cmd.y1, cmd.x2, cmd.y2, cmd.x, cmd.y);\n          add(cmd.x, cmd.y);\n          break;\n\n        case 'S':\n          let x1 = 0;\n          let y1 = 0;\n          if (prev) {\n            if (prev.code === 'C') {\n              x1 = prev.x * 2 - prev.x2;\n              y1 = prev.y * 2 - prev.y2;\n            } else {\n              x1 = prev.x;\n              y1 = prev.y;\n            }\n          }\n          sampleCubicBÃ©zier(cmd.x0, cmd.y0, x1, y1, cmd.x2, cmd.y2, cmd.x, cmd.y);\n          add(cmd.x, cmd.y);\n          break;\n\n        default:\n          console.error('Our deepest apologies, but ' + cmd.command + ' commands (' + cmd.code + ') are not yet supported.');\n          process.exit(2);\n      }\n      prev = cmd;\n    });\n    return polys;\n\n    // http://antigrain.com/research/adaptive_bezier/\n    function sampleCubicBÃ©zier(x0, y0, x1, y1, x2, y2, x3, y3) {\n      // Calculate all the mid-points of the line segments\n      const x01 = (x0 + x1) / 2;\n      const y01 = (y0 + y1) / 2;\n      const x12 = (x1 + x2) / 2;\n      const y12 = (y1 + y2) / 2;\n      const x23 = (x2 + x3) / 2;\n      const y23 = (y2 + y3) / 2;\n      const x012 = (x01 + x12) / 2;\n      const y012 = (y01 + y12) / 2;\n      const x123 = (x12 + x23) / 2;\n      const y123 = (y12 + y23) / 2;\n      const x0123 = (x012 + x123) / 2;\n      const y0123 = (y012 + y123) / 2;\n\n      // Try to approximate the full cubic curve by a single straight line\n      const dx = x3 - x0;\n      const dy = y3 - y0;\n\n      const d1 = Math.abs(((x1 - x3) * dy - (y1 - y3) * dx));\n      const d2 = Math.abs(((x2 - x3) * dy - (y2 - y3) * dx));\n\n      if (((d1 + d2) * (d1 + d2)) < (tolerance2 * (dx * dx + dy * dy))) { add(x0123, y0123); } else { // Continue subdivision\n        sampleCubicBÃ©zier(x0, y0, x01, y01, x012, y012, x0123, y0123);\n        sampleCubicBÃ©zier(x0123, y0123, x123, y123, x23, y23, x3, y3);\n      }\n    }\n\n    function add(x, y) {\n      if (opts.decimals && opts.decimals >= 0) {\n        x = x.toFixed(opts.decimals) * 1;\n        y = y.toFixed(opts.decimals) * 1;\n      }\n      poly.push([x, y]);\n    }\n  }\n\n\n  // this is from https://github.com/substack/point-in-polygon/blob/master/index.js\n  // imported into service to fix broken packaging\n  public pointInPoly(point, vs) {\n    // ray-casting algorithm based on\n    // http://www.ecse.rpi.edu/Homepages/wrf/Research/Short_Notes/pnpoly.html\n\n    const x = point[0];\n    const y = point[1];\n\n    let inside = false;\n    for (let i = 0, j = vs.length - 1; i < vs.length; j = i++) {\n      const xi = vs[i][0];\n      const yi = vs[i][1];\n      const xj = vs[j][0];\n      const yj = vs[j][1];\n\n      const intersect = ((yi > y) !== (yj > y))\n        && (x < (xj - xi) * (y - yi) / (yj - yi) + xi);\n      if (intersect) { inside = !inside; }\n    }\n\n    return inside;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Observable, from } from 'rxjs';\nimport { MaskingService } from './masking.service';\nimport * as svgSave from 'save-svg-as-png';\nimport * as Jimp from 'jimp';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class SvgtopngService {\n  public base64Mask: string;\n  constructor(private maskSvc: MaskingService) { }\n  public dimensions;\n\n  public save(): void {\n    const holder = this;\n    this.dimensions = this.maskSvc.getDimensions();\n    if (!this.maskSvc.loadedMask()) {\n      this.maskSvc.mask.d3.selectAll('.completePoly').attr('opacity', 1);\n      this.maskSvc.mask.d3.selectAll('.completePoly').attr('visibility', 'visible');\n      this.maskSvc.mask.d3.selectAll('circle').attr('opacity', 0);\n      this.maskSvc.mask.d3.insert('polygon', ':first-child').attr('class', 'background').style('fill', '#808060')\n        .attr('points', '0,0,0,'+this.dimensions.canvasHeight+','+this.dimensions.canvasWidth+','+this.dimensions.canvasHeight+','+this.dimensions.canvasWidth+',0').attr('shape-rendering', 'crispEdges');\n\n      svgSave.saveSvgAsPng(this.maskSvc.mask.dom.children[0], this.maskSvc.getCurrentImageUrl().match(/[\\w-]+\\.(png|jpg)/)[0]\n        .replace(/.(png|jpg)/, ''), { width: this.dimensions.width, height: this.dimensions.height, top: 38, left: 43, encoderOptions: 0.0, scale: (1 / window.devicePixelRatio) }).then(\n          () => {\n            this.maskSvc.mask.d3.selectAll('.completePoly').attr('opacity', this.maskSvc.currentOpacity);\n            this.maskSvc.mask.d3.selectAll('circle').attr('opacity', 1);\n            this.maskSvc.mask.d3.selectAll('.background').remove();\n          }\n        );\n\n    } else {\n      this.maskSvc.mask.d3.selectAll('.completePoly').attr('opacity', 1);\n      this.maskSvc.mask.d3.selectAll('.completePoly').attr('visibility', 'visible');\n      this.maskSvc.mask.d3.selectAll('circle').attr('opacity', 0);\n      svgSave.svgAsPngUri(this.maskSvc.mask.dom.children[0], { width: this.dimensions.width, height: this.dimensions.height, top: 38, left: 43, encoderOptions: 0.0, scale: (1 / window.devicePixelRatio) })\n        .then(uri => {\n          Jimp.read(this.maskSvc.loadedMaskUrl(), (err, originalMask) => {\n            Jimp.read(uri, (err, image) => {\n              originalMask.composite(image, 0, 0);\n              holder.downloadImage(originalMask);\n            });\n          });\n          this.maskSvc.mask.d3.selectAll('.completePoly').attr('opacity', this.maskSvc.currentOpacity);\n          this.maskSvc.mask.d3.selectAll('circle').attr('opacity', 1);\n        }\n        );\n    }\n  }\n\n  public downloadImage(image) {\n    image.getBase64(Jimp.AUTO, (err, res) => {\n      const download = document.createElement('a');\n      download.href = res;\n      download.download = this.maskSvc.currentUrl.match(/[\\w-]+\\.(png|jpg)/)[0];\n      download.click();\n    });\n  }\n\n\n  public base64ToGit(): Promise<string> {\n    const holder = this;\n    let gitImage;\n    if (!this.maskSvc.loadedMask()) {\n      this.dimensions = this.maskSvc.getDimensions();\n      this.maskSvc.mask.d3.selectAll('.completePoly').attr('opacity', 1);\n      this.maskSvc.mask.d3.selectAll('.completePoly').attr('visibility', 'visible');\n      this.maskSvc.mask.d3.selectAll('circle').attr('opacity', 0);\n      this.maskSvc.mask.d3.insert('polygon', ':first-child').attr('class', 'background').style('fill', '#808060')\n        .attr('points', '0,0,0,'+this.dimensions.canvasHeight+','+this.dimensions.canvasWidth+','+this.dimensions.canvasHeight+','+this.dimensions.canvasWidth+',0').attr('shape-rendering', 'crispEdges');\n      return svgSave.svgAsPngUri(this.maskSvc.mask.dom.children[0],\n        { width: this.dimensions.width, height: this.dimensions.height, top: 38, left: 43, encoderOptions: 0.0 }).then(\n          (image) => {\n            gitImage = image;\n            this.maskSvc.mask.d3.selectAll('.completePoly').attr('opacity', this.maskSvc.currentOpacity);\n            this.maskSvc.mask.d3.selectAll('circle').attr('opacity', 1);\n            this.maskSvc.mask.d3.selectAll('.background').remove();\n            this.base64Mask = image;\n            return image;\n          }\n        );\n    } else {\n      this.maskSvc.mask.d3.selectAll('.completePoly').attr('opacity', 1);\n      this.maskSvc.mask.d3.selectAll('.completePoly').attr('visibility', 'visible');\n      this.maskSvc.mask.d3.selectAll('circle').attr('opacity', 0);\n      return svgSave.svgAsPngUri(this.maskSvc.mask.dom.children[0], { width: this.dimensions.width, height: this.dimensions.height, top: 38, left: 43, encoderOptions: 0.0 })\n        .then(uri => {\n          Jimp.read(this.maskSvc.loadedMaskUrl(), (err, originalMask) => {\n            Jimp.read(uri, (err, image) => {\n              originalMask.composite(image, 0, 0);\n              return originalMask.getBase64('image/png', (err, res) => {\n                this.base64Mask = res;\n                return res;\n              });\n            });\n          });\n          this.maskSvc.mask.d3.selectAll('.completePoly').attr('opacity', this.maskSvc.currentOpacity);\n          this.maskSvc.mask.d3.selectAll('circle').attr('opacity', 1);\n        }\n        );\n    }\n\n  }\n\n  public setBase64(image): string {\n    return image.getBase64(Jimp.AUTO, (err, res) => {\n      return res;\n    });\n  }\n}\n","import { Component, OnInit, HostListener } from '@angular/core';\nimport { MaskingService } from '../services/masking.service';\n\n@Component({\n  selector: 'app-toggle-pixelation',\n  templateUrl: './toggle-pixelation.component.html',\n  styleUrls: ['./toggle-pixelation.component.css']\n})\nexport class TogglePixelationComponent implements OnInit {\n\n  constructor(private maskingSvc: MaskingService) { }\n  public pixelationOff: boolean = false;\n  ngOnInit(): void {\n  }\n\n  @HostListener('document:keyup', ['$event'])\n  handleKeyboardEvent(event: KeyboardEvent) {\n      if (event.code === 'KeyP') { this.togglePixelation(); }\n  }\n\n  public togglePixelation(): void{\n    this.maskingSvc.togglePixelation();\n    this.pixelationOff = !this.pixelationOff;\n  }\n}\n","import { Component, OnInit, HostListener } from '@angular/core';\nimport { environment } from 'src/environments/environment';\nimport { MaskingService } from '../services/masking.service';\n\n@Component({\n  selector: 'app-toolbar-color-selector',\n  templateUrl: './toolbar-color-selector.component.html',\n  styleUrls: ['./toolbar-color-selector.component.css']\n})\nexport class ToolbarColorSelectorComponent implements OnInit {\n\n  constructor(public maskSvc: MaskingService) { }\n  public colors;\n  public ntype = environment.colors[0];\n  public compactDropDownMenu = false;\n\n  ngOnInit(): void {\n    this.selectMenuLayout(window.innerWidth);\n  }\n\n  public selectMenuLayout(windowWidth) {\n    if (windowWidth < 1200) {\n      this.compactDropDownMenu = true;\n      this.colors = environment.colors.filter(elem => elem.name != this.ntype.name);\n    } else {\n      this.compactDropDownMenu = false;\n      this.colors = environment.colors;\n    }\n  }\n\n  public setColor(index: number){\n    this.ntype = this.colors[index];\n    if (this.compactDropDownMenu) {\n      this.maskSvc.setColor(environment.colors.findIndex(e => e.name === this.ntype.name));\n      this.colors = environment.colors.filter(elem => elem.name != this.ntype.name);\n    } else {\n      this.maskSvc.setColor(index);\n      this.colors = environment.colors;\n    }\n  }\n\n\n  @HostListener('document:keyup', ['$event'])\n  handleKeyboardEvent(event: KeyboardEvent) {\n    const KeyMap = ['KeyR', 'KeyL', 'KeyU', 'KeyM', 'KeyC'];\n    if (KeyMap.includes(event.code)) {\n      const index = KeyMap.findIndex(e => e === event.code);\n      if (this.compactDropDownMenu) {\n        const name = environment.colors[index].name;\n        if (name !== this.ntype.name) {\n          this.setColor(this.colors.findIndex(e => e.name === name));\n        }\n      } else {\n        this.setColor(index);\n      }\n    }\n  }\n  \n  @HostListener('window:resize', ['$event'])\n  onResize(event) {\n    this.selectMenuLayout(window.innerWidth);\n  }\n}\n","<div ngbDropdown #myDrop=\"ngbDropdown\" *ngIf=\"compactDropDownMenu\" [autoClose]=\"false\" display=\"dynamic\" placement=\"bottom-right\" class=\"d-inline-block\">\n    <button class=\"btn btn-outline-light\" id=\"dropdownBasic3\" ngbDropdownToggle\n      [ngStyle]=\"{'width': '150px', 'border-color': ntype.color, 'background-color': ntype.color}\"\n    >{{ntype.name}}</button>\n    <div ngbDropdownMenu aria-labelledby=\"dropdownBasic3\" style=\"overflow:auto; max-height: 600px;\" class=\"bg-dark\">\n        <button *ngFor=\"let color of colors index as i\" class=\"btn btn-dark ml-2\" type=\"button\"\n         [ngStyle]=\"{'width': '140px', 'border-color': color.color, 'background-color': color.color, 'text-decoration': this.maskSvc.currentColor.color === color.color ? 'underline' : 'none'}\"\n         (click)=\"setColor(i); myDrop.close()\"\n        >{{color.name}}</button>\n    </div>\n</div>\n\n<div *ngIf=\"!compactDropDownMenu\">\n<button  *ngFor=\"let color of colors index as i\" class=\"btn btn-dark ml-2\" type=\"button\"\n [ngStyle]=\"{'border-color': color.color, 'background-color': color.color, 'text-decoration': this.maskSvc.currentColor.color === color.color ? 'underline' : 'none'}\"\n  (click)=\"setColor(i)\">\n {{color.name}}</button>\n</div>","import { Component, OnInit } from '@angular/core';\nimport { SvgtopngService } from '../services/svgtopng.service';\nimport { version } from 'package.json';\n\n@Component({\n  selector: 'app-toolbar',\n  templateUrl: './toolbar.component.html',\n  styleUrls: ['./toolbar.component.css']\n})\nexport class ToolbarComponent implements OnInit {\n  public version: string = version;\n  constructor(private svgToPng: SvgtopngService) { }\n\n  ngOnInit(): void {\n  }\n\n  public save(){\n    this.svgToPng.save();\n  }\n\n}\n","<nav class=\"navbar navbar-dark bg-dark\">\n    <a class=\"navbar-brand\">Image Labeler</a>\n    <app-toolbar-color-selector></app-toolbar-color-selector>\n\n    <div ngbDropdown display=\"dynamic\" placement=\"bottom-right\" class=\"d-inline-block\">\n        <button class=\"btn btn-outline-light\" id=\"dropdownBasic3\" ngbDropdownToggle>Image URL</button>\n        <div ngbDropdownMenu aria-labelledby=\"dropdownBasic3\" style=\"overflow:auto; max-height: 600px;\" class=\"bg-dark\">\n            <app-image-selector></app-image-selector>\n        </div>\n    </div>\n\n    <div ngbDropdown display=\"dynamic\" placement=\"bottom-right\" class=\"d-inline-block\">\n        <button class=\"btn btn-outline-light\" id=\"dropdownBasic1\" ngbDropdownToggle>Layers</button>\n        <div ngbDropdownMenu aria-labelledby=\"dropdownBasic1\" style=\"overflow:auto; max-height: 600px; width:600px;\"\n            class=\"bg-dark\">\n            <app-layers></app-layers>\n        </div>\n    </div>\n    <div ngbDropdown display=\"dynamic\" placement=\"bottom-right\" class=\"d-inline-block\">\n        <button class=\"btn btn-outline-light\" id=\"dropdownBasic3\" ngbDropdownToggle>Advanced</button>\n        <div ngbDropdownMenu aria-labelledby=\"dropdownBasic3\"\n            style=\"overflow:auto; max-height: 600px; color:#eee; width:300px; padding: 10px 10px 10px 10px\"\n            class=\"bg-dark\">\n            <app-git-manage></app-git-manage>\n            <app-toggle-pixelation></app-toggle-pixelation>\n            <app-revert-from-history></app-revert-from-history>\n        </div>\n    </div>\n    <div ngbDropdown display=\"dynamic\" placement=\"bottom-right\" class=\"d-inline-block\">\n        <button class=\"btn btn-outline-light\" id=\"dropdownBasic4\" ngbDropdownToggle>Help</button>\n        <div ngbDropdownMenu aria-labelledby=\"dropdownBasic4\"\n            style=\"overflow:auto; max-height: 600px; color:#eee; width:300px; padding: 10px 10px 10px 10px\"\n            class=\"bg-dark\">\n            <h5>Controls</h5>\n            <table class=\"table table-striped table-dark\">\n                <thead>\n                    <tr>\n                        <th scope=\"col\">Key</th>\n                        <th scope=\"col\">Action</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    <tr>\n                        <th scope=\"row\">Scroll</th>\n                        <td>Zoom</td>\n                    </tr>\n                    <tr>\n                        <th scope=\"row\">Left Click</th>\n                        <td>Place Point</td>\n                    </tr>\n                    <tr>\n                        <th scope=\"row\">Right Click</th>\n                        <td>Pan</td>\n                    </tr>\n                    <tr>\n                        <th scope=\"row\">R, L, U, M, C</th>\n                        <td>Change Color</td>\n                    </tr>\n                    <tr>\n                        <th scope=\"row\">Ctrl+Z</th>\n                        <td>Undo</td>\n                    </tr>\n                    <tr>\n                        <th scope=\"row\">P</th>\n                        <td>Toggle background image pixelation</td>\n                    </tr>\n                    <tr>\n                        <th scope=\"row\">O</th>\n                        <td>Toggle export preview</td>\n                    </tr>\n                    <tr>\n                        <th scope=\"row\"><i class=\"fa fa-arrow-up\" aria-hidden=\"true\"></i> <i class=\"fa fa-arrow-down\" aria-hidden=\"true\"></i></th>\n                        <td>Increment Opacity</td>\n                    </tr>\n                    <tr>\n                        <th scope=\"row\">,</th>\n                        <td>Toggle all layer visibility</td>\n                    </tr>\n                    <tr>\n                        <th scope=\"row\">[</th>\n                        <td>Toggle control point visibility</td>\n                    </tr>\n                    <tr>\n                        <th scope=\"row\">0</th>\n                        <td>Reset pan and zoom levels</td>\n                    </tr>\n                    <tr>\n                        <th scope=\"row\">Alt + Click</th>\n                        <td>Delete Layer</td>\n                    </tr>\n                </tbody>\n            </table>\n            <br>\n            <h5>How to use</h5>\n            This is how I personally use this tool the quickest. First, I label all the movables and lane markings.\n            Next, I label the road, and move it to the bottom with the layer palette. Then I add a box of undrivable\n            over the entire image and move it to the bottom. Finally, I add the car section over the hood\n            <h6 class=\"mt-3\">img-labeler version: {{version}}</h6>\n        </div>\n    </div>\n    <button type=\"button\" class=\"btn btn-outline-light\" (click)=\"save()\">Save</button>\n    <button type=\"button\" class=\"btn btn-outline-danger\">Reset</button>\n\n\n\n</nav>","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false,\n  colors: [\n    {name: 'Road', color: '#402020'},\n    {name: 'Lane Markings', color: '#ff0000'},\n    {name: 'Undrivable', color: '#808060'},\n    {name: 'Movable', color: '#00ff66'},\n    {name: 'My Car', color: '#cc00ff'}\n  ],\n  defaultImage: 'https://raw.githubusercontent.com/commaai/comma10k/master/imgs/0005_836d09212ac1b8fa_2018-06-15--15-57-15_23_345.png',\n  defaultImageNumber: '0005',\n  imageDirectory: 'https://raw.githubusercontent.com/commaai/comma10k/master/imgs/',\n  image2Directory: 'https://raw.githubusercontent.com/commaai/comma10k/master/imgs2/',\n  imageDirectoryName: 'imgs',\n  maskDirectoryName: 'masks'\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n"]}